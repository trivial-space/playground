!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=69)}([function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return o})),n.d(e,"d",(function(){return s}));const r="position",i="normal",a="uv",c="source",o="coords",s={FLOAT:5126,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FLOAT_MAT2X3:35685,FLOAT_MAT2X4:35686,FLOAT_MAT3X2:35687,FLOAT_MAT3X4:35688,FLOAT_MAT4X2:35689,FLOAT_MAT4X3:35690,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT:5125,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,TEXTURE_2D:3553,TEXTURE_CUBE_MAP:34067,TEXTURE_3D:32879,TEXTURE_2D_ARRAY:35866,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,HALF_FLOAT:5131,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042},u=6403,f=33319,d=6407,l=6408,h=6402,b=33321,O=33323,p=32849,g=32856,j=33325,_=33327,m=34843,v=34842,y=33332,E=33338,M=36215,T=36214,A=33334,S=33340,R=36209,F=36208,w=33189,N=33190,x=36012;s.UNSIGNED_BYTE,s.UNSIGNED_SHORT,s.UNSIGNED_INT,s.FLOAT},function(t,e,n){"use strict";n.d(e,"i",(function(){return tt})),n.d(e,"f",(function(){return nt})),n.d(e,"j",(function(){return it})),n.d(e,"k",(function(){return ct})),n.d(e,"h",(function(){return st})),n.d(e,"g",(function(){return ft})),n.d(e,"e",(function(){return lt})),n.d(e,"d",(function(){return bt})),n.d(e,"m",(function(){return Ot})),n.d(e,"l",(function(){return pt})),n.d(e,"a",(function(){return jt})),n.d(e,"c",(function(){return _t})),n.d(e,"b",(function(){return mt}));var r=n(8);function i(t){function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}var a=n(4);var c=n(0);const o="CLAMP_TO_EDGE",s="LINEAR",u="NEAREST";const f={renderQuad:{attribs:{[c.b]:{buffer:new Float32Array([-1,1,-1,-1,1,1,1,-1]),storeType:"STATIC"},[c.c]:{buffer:new Float32Array([0,1,0,0,1,1,1,0]),storeType:"STATIC"}},drawType:"TRIANGLE_STRIP",itemCount:4}},d={basicEffect:{vert:`\nattribute vec2 ${c.b};\nattribute vec2 ${c.c};\nvarying vec2 ${c.f};\nvoid main() {\n\t${c.f} = ${c.c};\n\tgl_Position = vec4(${c.b}, 0.0, 1.0);\n}`,frag:`precision mediump float;\nuniform sampler2D ${c.e};\nvarying vec2 ${c.f};\nvoid main() {\n\tgl_FragColor = texture2D(${c.e}, ${c.f});\n}`}};function l(t){return m[t].bindPoint}function h(t,e){return n=>{t.uniform1i(e,n)}}function b(t,e){return n=>{t.uniform1iv(e,n)}}function O(t,e){return n=>{t.uniform2iv(e,n)}}function p(t,e){return n=>{t.uniform3iv(e,n)}}function g(t,e){return n=>{t.uniform4iv(e,n)}}function j(t,e,n,r){const i=l(e);return e=>{t.uniform1i(r,n),t.activeTexture(t.TEXTURE0+n),t.bindTexture(i,e._texture)}}function _(t,e,n,r,i){const a=l(e),c=new Int32Array(i);for(let t=0;t<i;++t)c[t]=n+t;return e=>{t.uniform1iv(r,c);for(const n in e)t.activeTexture(t.TEXTURE0+c[n]),t.bindTexture(a,e[n]._texture)}}const m={[c.d.FLOAT]:{Type:Float32Array,size:4,setter:function(t,e){return n=>{t.uniform1f(e,n)}},arraySetter:function(t,e){return n=>{t.uniform1fv(e,n)}}},[c.d.FLOAT_VEC2]:{Type:Float32Array,size:8,setter:function(t,e){return n=>{t.uniform2fv(e,n)}}},[c.d.FLOAT_VEC3]:{Type:Float32Array,size:12,setter:function(t,e){return n=>{t.uniform3fv(e,n)}}},[c.d.FLOAT_VEC4]:{Type:Float32Array,size:16,setter:function(t,e){return n=>{t.uniform4fv(e,n)}}},[c.d.INT]:{Type:Int32Array,size:4,setter:h,arraySetter:b},[c.d.INT_VEC2]:{Type:Int32Array,size:8,setter:O},[c.d.INT_VEC3]:{Type:Int32Array,size:12,setter:p},[c.d.INT_VEC4]:{Type:Int32Array,size:16,setter:g},[c.d.UNSIGNED_INT]:{Type:Uint32Array,size:4,setter:function(t,e){return n=>{t.uniform1ui(e,n)}},arraySetter:function(t,e){return n=>{t.uniform1uiv(e,n)}}},[c.d.UNSIGNED_INT_VEC2]:{Type:Uint32Array,size:8,setter:function(t,e){return n=>{t.uniform2uiv(e,n)}}},[c.d.UNSIGNED_INT_VEC3]:{Type:Uint32Array,size:12,setter:function(t,e){return n=>{t.uniform3uiv(e,n)}}},[c.d.UNSIGNED_INT_VEC4]:{Type:Uint32Array,size:16,setter:function(t,e){return n=>{t.uniform4uiv(e,n)}}},[c.d.BOOL]:{Type:Uint32Array,size:4,setter:h,arraySetter:b},[c.d.BOOL_VEC2]:{Type:Uint32Array,size:8,setter:O},[c.d.BOOL_VEC3]:{Type:Uint32Array,size:12,setter:p},[c.d.BOOL_VEC4]:{Type:Uint32Array,size:16,setter:g},[c.d.FLOAT_MAT2]:{Type:Float32Array,size:16,setter:function(t,e){return n=>{t.uniformMatrix2fv(e,!1,n)}}},[c.d.FLOAT_MAT3]:{Type:Float32Array,size:36,setter:function(t,e){return n=>{t.uniformMatrix3fv(e,!1,n)}}},[c.d.FLOAT_MAT4]:{Type:Float32Array,size:64,setter:function(t,e){return n=>{t.uniformMatrix4fv(e,!1,n)}}},[c.d.FLOAT_MAT2X3]:{Type:Float32Array,size:24,setter:function(t,e){return n=>{t.uniformMatrix2x3fv(e,!1,n)}}},[c.d.FLOAT_MAT2X4]:{Type:Float32Array,size:32,setter:function(t,e){return n=>{t.uniformMatrix2x4fv(e,!1,n)}}},[c.d.FLOAT_MAT3X2]:{Type:Float32Array,size:24,setter:function(t,e){return n=>{t.uniformMatrix3x2fv(e,!1,n)}}},[c.d.FLOAT_MAT3X4]:{Type:Float32Array,size:48,setter:function(t,e){return n=>{t.uniformMatrix3x4fv(e,!1,n)}}},[c.d.FLOAT_MAT4X2]:{Type:Float32Array,size:32,setter:function(t,e){return n=>{t.uniformMatrix4x2fv(e,!1,n)}}},[c.d.FLOAT_MAT4X3]:{Type:Float32Array,size:48,setter:function(t,e){return n=>{t.uniformMatrix4x3fv(e,!1,n)}}},[c.d.SAMPLER_2D]:{Type:null,size:0,setter:j,arraySetter:_,bindPoint:c.d.TEXTURE_2D},[c.d.SAMPLER_CUBE]:{Type:null,size:0,setter:j,arraySetter:_,bindPoint:c.d.TEXTURE_CUBE_MAP},[c.d.SAMPLER_3D]:{Type:null,size:0,setter:j,arraySetter:_,bindPoint:c.d.TEXTURE_3D},[c.d.SAMPLER_2D_SHADOW]:{Type:null,size:0,setter:j,arraySetter:_,bindPoint:c.d.TEXTURE_2D},[c.d.SAMPLER_2D_ARRAY]:{Type:null,size:0,setter:j,arraySetter:_,bindPoint:c.d.TEXTURE_2D_ARRAY},[c.d.SAMPLER_2D_ARRAY_SHADOW]:{Type:null,size:0,setter:j,arraySetter:_,bindPoint:c.d.TEXTURE_2D_ARRAY},[c.d.SAMPLER_CUBE_SHADOW]:{Type:null,size:0,setter:j,arraySetter:_,bindPoint:c.d.TEXTURE_CUBE_MAP},[c.d.INT_SAMPLER_2D]:{Type:null,size:0,setter:j,arraySetter:_,bindPoint:c.d.TEXTURE_2D},[c.d.INT_SAMPLER_3D]:{Type:null,size:0,setter:j,arraySetter:_,bindPoint:c.d.TEXTURE_3D},[c.d.INT_SAMPLER_CUBE]:{Type:null,size:0,setter:j,arraySetter:_,bindPoint:c.d.TEXTURE_CUBE_MAP},[c.d.INT_SAMPLER_2D_ARRAY]:{Type:null,size:0,setter:j,arraySetter:_,bindPoint:c.d.TEXTURE_2D_ARRAY},[c.d.UNSIGNED_INT_SAMPLER_2D]:{Type:null,size:0,setter:j,arraySetter:_,bindPoint:c.d.TEXTURE_2D},[c.d.UNSIGNED_INT_SAMPLER_3D]:{Type:null,size:0,setter:j,arraySetter:_,bindPoint:c.d.TEXTURE_3D},[c.d.UNSIGNED_INT_SAMPLER_CUBE]:{Type:null,size:0,setter:j,arraySetter:_,bindPoint:c.d.TEXTURE_CUBE_MAP},[c.d.UNSIGNED_INT_SAMPLER_2D_ARRAY]:{Type:null,size:0,setter:j,arraySetter:_,bindPoint:c.d.TEXTURE_2D_ARRAY}};function v(t,e,n){return r=>{t.bindBuffer(t.ARRAY_BUFFER,r.buffer),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,n.itemSize,c.d.FLOAT,r.normalize||!1,r.stride||0,r.offset||0)}}function y(t,e,n){return r=>{t.bindBuffer(t.ARRAY_BUFFER,r.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,n.itemSize,c.d.INT,r.stride||0,r.offset||0)}}function E(t,e,n){const r=n.size,i=n.count;return n=>{t.bindBuffer(t.ARRAY_BUFFER,n.buffer);const a=r,o=a/i,s=m[c.d.FLOAT].size*a,u=n.normalize||!1,f=n.offset||0,d=s/i;for(let n=0;n<i;++n)t.enableVertexAttribArray(e+n),t.vertexAttribPointer(e+n,o,c.d.FLOAT,u,s,f+d*n)}}const M={[c.d.FLOAT]:{size:4,setter:v,itemSize:1},[c.d.FLOAT_VEC2]:{size:8,setter:v,itemSize:2},[c.d.FLOAT_VEC3]:{size:12,setter:v,itemSize:3},[c.d.FLOAT_VEC4]:{size:16,setter:v,itemSize:4},[c.d.INT]:{size:4,setter:y,itemSize:1},[c.d.INT_VEC2]:{size:8,setter:y,itemSize:2},[c.d.INT_VEC3]:{size:12,setter:y,itemSize:3},[c.d.INT_VEC4]:{size:16,setter:y,itemSize:4},[c.d.UNSIGNED_INT]:{size:4,setter:y,itemSize:1},[c.d.UNSIGNED_INT_VEC2]:{size:8,setter:y,itemSize:2},[c.d.UNSIGNED_INT_VEC3]:{size:12,setter:y,itemSize:3},[c.d.UNSIGNED_INT_VEC4]:{size:16,setter:y,itemSize:4},[c.d.BOOL]:{size:4,setter:y,itemSize:1},[c.d.BOOL_VEC2]:{size:8,setter:y,itemSize:2},[c.d.BOOL_VEC3]:{size:12,setter:y,itemSize:3},[c.d.BOOL_VEC4]:{size:16,setter:y,itemSize:4},[c.d.FLOAT_MAT2]:{size:4,setter:E,count:2},[c.d.FLOAT_MAT3]:{size:9,setter:E,count:3},[c.d.FLOAT_MAT4]:{size:16,setter:E,count:4}};c.d.BYTE,Int8Array,c.d.UNSIGNED_BYTE,Uint8Array,c.d.SHORT,Int16Array,c.d.UNSIGNED_SHORT,Uint16Array,c.d.INT,Int32Array,c.d.UNSIGNED_INT,Uint32Array,c.d.FLOAT,Float32Array,c.d.UNSIGNED_SHORT_4_4_4_4,Uint16Array,c.d.UNSIGNED_SHORT_5_5_5_1,Uint16Array,c.d.UNSIGNED_SHORT_5_6_5,Uint16Array,c.d.HALF_FLOAT,Uint16Array,c.d.UNSIGNED_INT_2_10_10_10_REV,Uint32Array,c.d.UNSIGNED_INT_10F_11F_11F_REV,Uint32Array,c.d.UNSIGNED_INT_5_9_9_9_REV,Uint32Array,c.d.FLOAT_32_UNSIGNED_INT_24_8_REV,Uint32Array,c.d.UNSIGNED_INT_24_8,Uint32Array;function T(t,e){if(e.enable)for(const n of e.enable)t.enable(n);if(e.disable)for(const n of e.disable)t.disable(n);e.blendFunc&&t.blendFunc.apply(t,e.blendFunc),null!=e.depthFunc&&t.depthFunc(e.depthFunc),null!=e.cullFace&&t.cullFace(e.cullFace),null!=e.frontFace&&t.frontFace(e.frontFace),null!=e.lineWidth&&t.lineWidth(e.lineWidth),e.colorMask&&t.colorMask.apply(t,e.colorMask),null!=e.depthMask&&t.depthMask(e.depthMask),e.clearColor&&t.clearColor.apply(t,e.clearColor),null!=e.clearDepth&&t.clearDepth(e.clearDepth),null!=e.clearBits&&t.clear(e.clearBits)}function A(t,e){if(e.enable)for(const n of e.enable)t.disable(n);if(e.disable)for(const n of e.disable)t.enable(n)}let S=1;class R{constructor(t,e="Form"+S++){this._painter=t,this.id=e}update(t){const e=this._painter.gl;t.drawType&&(this._drawType=e[t.drawType]),t.itemCount&&(this._itemCount=t.itemCount),this._attribs=this._attribs||{};for(const n in t.attribs){const r=t.attribs[n];null==this._attribs[n]&&(this._attribs[n]={buffer:e.createBuffer()}),e.bindBuffer(e.ARRAY_BUFFER,this._attribs[n].buffer),e.bufferData(e.ARRAY_BUFFER,r.buffer,e[(r.storeType||"STATIC")+"_DRAW"])}if(t.elements){const n=t.elements.buffer;null==this._elements&&(this._elements={buffer:e.createBuffer(),glType:null}),this._elements.glType=function(t){if(t instanceof Int8Array)return c.d.BYTE;if(t instanceof Uint8Array)return c.d.UNSIGNED_BYTE;if(t instanceof Uint8ClampedArray)return c.d.UNSIGNED_BYTE;if(t instanceof Int16Array)return c.d.SHORT;if(t instanceof Uint16Array)return c.d.UNSIGNED_SHORT;if(t instanceof Int32Array)return c.d.INT;if(t instanceof Uint32Array)return c.d.UNSIGNED_INT;if(t instanceof Float32Array)return c.d.FLOAT;throw new Error("unsupported typed array type")}(n),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._elements.buffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e[(t.elements.storeType||"STATIC")+"_DRAW"])}return this}destroy(){const t=this._painter.gl;for(const e in this._attribs)t.deleteBuffer(this._attribs[e].buffer);this._attribs={},this._elements&&(t.deleteBuffer(this._elements.buffer),this._elements=void 0)}}var F=n(3),w=n(10);let N=1;class x{constructor(t,e="Texture"+N++){this._painter=t,this.id=e,this._texture=null,this._data={}}update(t){const e=this._painter.gl;if(null==this._texture&&(this._texture=e.createTexture()),e.bindTexture(e.TEXTURE_2D,this._texture),t.wrap&&t.wrap!==this._data.wrap||t.wrapS&&t.wrapS!==this._data.wrapS||t.wrapT&&t.wrapT!==this._data.wrapT){let n,r;t.wrap?n=r=t.wrap:(r=t.wrapT||o,n=t.wrapS||o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e[n]),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e[r])}else this._data.wrap||this._data.wrapS||this._data.wrapT||(this._data.wrap=this._data.wrapT=this._data.wrapS=o,e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e[this._data.wrap]),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e[this._data.wrap]));return t.magFilter&&t.magFilter!==this._data.magFilter?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e[t.magFilter]):this._data.magFilter||(this._data.magFilter=u,e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e[this._data.magFilter])),t.minFilter&&t.minFilter!==this._data.minFilter?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e[t.minFilter]):this._data.minFilter||(this._data.minFilter=s,e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e[this._data.minFilter])),t.asset&&e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.asset),void 0!==t.data&&e.texImage2D(e.TEXTURE_2D,0,"FLOAT"===t.type&&this._painter.isWebGL2?e.RGBA32F:e.RGBA,t.width,t.height,0,e.RGBA,e[t.type||"UNSIGNED_BYTE"],t.data),null!=t.flipY&&t.flipY!==this._data.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY),t.minFilter&&t.minFilter.indexOf("MIPMAP")>0&&e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null),Object.assign(this._data,t),this}destroy(){this._painter.gl.deleteTexture(this._texture),this._data={},this._texture=null}}let I=1;class U{constructor(t,e="Form"+I++){this._painter=t,this.id=e,this.width=0,this.height=0,this.antialias=!1,this.frameBuffer=null,this.antiAliasFrameBuffer=null,this.antiAliasRenderBuffer=null,this.textures=[],this.depthBuffer=null,this.bufferStructure=[],this._data={}}update(t){var e;const n=this._painter.gl,r=t.width||this.width,i=t.height||this.height;if(!r||!i)return this;if(r===this.width&&i===this.height){if(!t.bufferStructure)return this;if(t.bufferStructure.length===this.bufferStructure.length&&this.bufferStructure.every((e,n)=>Object(w.b)(e,t.bufferStructure[n])))return this}null==this.frameBuffer&&(this.frameBuffer=n.createFramebuffer()),null==this.depthBuffer&&(this.depthBuffer=n.createRenderbuffer()),t.bufferStructure&&t.bufferStructure.length&&(this.bufferStructure=t.bufferStructure,this.bufferStructure.some(t=>"FLOAT"===t.type)&&(this._painter.isWebGL2?n.getExtension("EXT_color_buffer_float"):n.getExtension("OES_texture_float")));const a=this.bufferStructure.length||1,c=[n.COLOR_ATTACHMENT0];if(n.bindFramebuffer(n.FRAMEBUFFER,this.frameBuffer),a>1){let t;this._painter.isWebGL2||(t=n.getExtension("WEBGL_draw_buffers"));const e=this._painter.isWebGL2?n.COLOR_ATTACHMENT0:t.COLOR_ATTACHMENT0_WEBGL;for(let t=0;t<a;t++)c[t]=e+t;this._painter.isWebGL2?n.drawBuffers(c):t.drawBuffersWEBGL(c)}if(this.antialias=1===a&&this._painter.isWebGL2&&(t.antialias||(null===(e=this._data)||void 0===e?void 0:e.antialias)),this.antialias){const t=n;null==this.antiAliasFrameBuffer&&(this.antiAliasFrameBuffer=n.createFramebuffer()),null==this.antiAliasRenderBuffer&&(this.antiAliasRenderBuffer=n.createRenderbuffer()),n.bindFramebuffer(n.FRAMEBUFFER,this.antiAliasFrameBuffer),n.bindRenderbuffer(n.RENDERBUFFER,this.antiAliasRenderBuffer),t.renderbufferStorageMultisample(n.RENDERBUFFER,Math.min(4,n.getParameter(t.MAX_SAMPLES)),t.RGBA8,r,i),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.antiAliasRenderBuffer),n.bindRenderbuffer(n.RENDERBUFFER,this.depthBuffer),t.renderbufferStorageMultisample(n.RENDERBUFFER,Math.min(4,n.getParameter(t.MAX_SAMPLES)),n.DEPTH_COMPONENT16,r,i),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthBuffer),n.bindFramebuffer(n.FRAMEBUFFER,this.frameBuffer)}else n.bindRenderbuffer(n.RENDERBUFFER,this.depthBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,r,i),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthBuffer);for(let t=0;t<a;t++){this.textures[t]||(this.textures[t]=new x(this._painter,this.id+"_Texture"+t));const e=this.textures[t];e.update(Object.assign(Object.assign({minFilter:"NEAREST",magFilter:"NEAREST"},this.bufferStructure[t]),{data:null,width:r,height:i})),n.framebufferTexture2D(n.FRAMEBUFFER,c[t],n.TEXTURE_2D,e._texture,0)}if(this.antialias){n.bindFramebuffer(n.FRAMEBUFFER,this.antiAliasFrameBuffer);const e=n.checkFramebufferStatus(n.FRAMEBUFFER);e!==n.FRAMEBUFFER_COMPLETE&&console.error("antialias framebuffer error",e,t),n.bindFramebuffer(n.FRAMEBUFFER,this.frameBuffer)}const o=n.checkFramebufferStatus(n.FRAMEBUFFER);return o!==n.FRAMEBUFFER_COMPLETE&&console.error("framebuffer error",o,t),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindTexture(n.TEXTURE_2D,null),n.bindRenderbuffer(n.RENDERBUFFER,null),Object.assign(this._data,t),this.width=r,this.height=i,this}destroy(){const t=this._painter.gl;t.deleteFramebuffer(this.frameBuffer),t.deleteRenderbuffer(this.depthBuffer);for(const e of this.textures)t.deleteTexture(e);this.antiAliasFrameBuffer&&t.deleteFramebuffer(this.antiAliasFrameBuffer),this.antiAliasRenderBuffer&&t.deleteRenderbuffer(this.antiAliasRenderBuffer),this.textures=[],this.frameBuffer=null,this.depthBuffer=null,this._data={},this.bufferStructure=[],this.width=0,this.height=0}}let D=1;class L{constructor(t,e="Frame"+D++){this._painter=t,this.id=e,this.width=0,this.height=0,this.layers=[],this._data={},this._targets=[],this._textures=[]}image(t=0){return this._targets.length&&this._targets[this._targets.length-1].textures[t]||this._textures[t]}update(t={}){var e,n,r,i;const a=this._painter.gl,c=Array.isArray(t.layers)?t.layers:t.layers?[t.layers]:this.layers,o=t.selfReferencing||this._data.selfReferencing,s=c.reduce((t,e)=>t+(e._uniforms.length||1),0),u=o||s>1?2:s,f=t.width||(null===(e=t.texture)||void 0===e?void 0:e.width)||this._data.width||(null===(n=this._data.texture)||void 0===n?void 0:n.width)||a.drawingBufferWidth,d=t.height||(null===(r=t.texture)||void 0===r?void 0:r.height)||this._data.height||(null===(i=this._data.texture)||void 0===i?void 0:i.height)||a.drawingBufferHeight,l=t.antialias||this._data.antialias||!0;u!==this._targets.length&&this._destroyTargets();const h=Object.assign(Object.assign({},t),{width:f,height:d,antialias:l});return!this._targets.length&&u>0?this._targets=Object(F.g)(t=>new U(this._painter,this.id+"_target"+(t+1)).update(h),u):this._targets.length&&this._targets.forEach(t=>{t.update(h)}),t.texture&&(this._textures[0]||(this._textures[0]=new x(this._painter,this.id+"_Texture0")),t.texture.width=f,t.texture.height=d,this._textures[0].update(t.texture)),Object.assign(this._data,t),this.layers=c,this.width=f,this.height=d,this}destroy(){this._destroyTargets(),this._textures.forEach(t=>t.destroy()),this._textures=[],this._data={},this.layers=[],this.width=0,this.height=0}_destroyTargets(){this._targets.forEach(t=>t.destroy()),this._targets=[]}_swapTargets(){if(this._targets.length>1){const t=this._targets[0];this._targets[0]=this._targets[1],this._targets[1]=t}}}let P=1;class z{constructor(t="DrawingLayer"+P++){this.id=t,this.sketches=[],this._data={},this._uniforms=[]}update(t){if(t.sketches&&(this.sketches=Array.isArray(t.sketches)?t.sketches:[t.sketches]),t.frag){const e=this.sketches&&this.sketches[0];e&&e.shade.update({frag:t.frag})}return t.uniforms&&(this._uniforms=Array.isArray(t.uniforms)?t.uniforms:[t.uniforms]),Object.assign(this._data,t),this}destroy(){for(const t of this.sketches)t.destroy();this._data.sketches=[],this._data={},this._uniforms=[]}}let B=1;class C{constructor(t,e="Shade"+B++){this._painter=t,this.id=e}update(t){const e=this._painter.gl,n=t.frag&&t.frag.trim()||this.fragSource,r=t.vert&&t.vert.trim()||this.vertSource;if(!n||!r||n===this.fragSource&&r===this.vertSource)return this;this.destroy(),n.indexOf("GL_EXT_draw_buffers")>=0&&e.getExtension("WEBGL_draw_buffers");const i=e.createProgram(),a=e.createShader(e.FRAGMENT_SHADER),c=e.createShader(e.VERTEX_SHADER);if(i&&c&&a){if(this._program=i,this._frag=a,this._vert=c,e.attachShader(i,c),e.attachShader(i,a),e.shaderSource(c,r),e.shaderSource(a,n),e.compileShader(c),e.compileShader(a),e.getShaderParameter(c,e.COMPILE_STATUS)||console.error("Error Compiling Vertex Shader!\n",e.getShaderInfoLog(c),G(r)),e.getShaderParameter(a,e.COMPILE_STATUS)||console.error("Error Compiling Fragment Shader!\n",e.getShaderInfoLog(a),G(n)),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS)){const t=e.getProgramInfoLog(i);console.error("Error in program linking:",t)}return this._uniformSetters=function(t,e){let n=0;function r(e,r){const i=t.getUniformLocation(e,r.name),a=r.size>1&&"[0]"===r.name.substr(-3),c=r.type,o=m[c];if(!o)throw new Error("unknown type: 0x"+c.toString(16));if(null==i)return;let s;if(null===o.Type){const e=n;n+=r.size,s=a?o.arraySetter(t,c,e,i,r.size):o.setter(t,c,e,i)}else s=o.arraySetter&&a?o.arraySetter(t,i):o.setter(t,i);return{setter:s,location:i}}const i={},a=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let n=0;n<a;++n){const a=t.getActiveUniform(e,n);if(!a)continue;let c=a.name;if("[0]"===c.substr(-3)&&(c=c.substr(0,c.length-3)),e){const t=r(e,a);t&&(i[c]=t)}}return i}(e,i),this._attributeSetters=function(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i);if(!r)break;const a=t.getAttribLocation(e,r.name),c=M[r.type],o=c.setter(t,a,c);n[r.name]={setter:o,location:a}}return n}(e,i),this.fragSource=n,this.vertSource=r,this}}destroy(){const t=this._painter.gl;t.deleteProgram(this._program),t.deleteShader(this._frag),t.deleteShader(this._vert),this.vertSource=void 0,this.fragSource=void 0,this._attributeSetters={},this._uniformSetters={}}}function G(t){return t.trim().split("\n").map((t,e)=>e+1+": "+t).join("\n")}let k=1;class X{constructor(t="Sketch"+k++){this.id=t,this._uniforms=[]}update(t){return t.drawSettings&&(this._drawSettings=t.drawSettings),t.form&&(this.form=t.form),t.shade&&(this.shade=t.shade),t.uniforms&&(this._uniforms=Array.isArray(t.uniforms)?t.uniforms:[t.uniforms]),this}destroy(){this.form&&this.form.destroy(),this.shade&&this.shade.destroy(),this._drawSettings=void 0,this._uniforms=[]}}var V=n(11);class ${constructor(t,e={}){this.canvas=t,this.isWebGL2=!0,this.maxBufferSamples=0;let n=null;if(e.useWebGL1||(n=t.getContext("webgl2",e)||t.getContext("experimental-webgl2",e)),null==n&&(this.isWebGL2=!1,n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)),null==n)throw Error("Cannot initialize WebGL.");this.gl=n,this.sizeMultiplier=e.sizeMultiplier||1,this.isWebGL2&&(this.maxBufferSamples=n.getParameter(n.MAX_SAMPLES)),this.resize(),T(n,function(t){return{clearColor:[0,0,0,1],blendFunc:[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA]}}(n)),this._renderQuad=this.createForm().update(f.renderQuad),this._staticSketch=this.createFlatSketch()}resize(){return Object(V.b)(this.gl.canvas,this.sizeMultiplier),this}destroy(){this._staticSketch.destroy(),this._renderQuad.destroy()}updateDrawSettings(t){return T(this.gl,Object.assign({},t)),this}createForm(t){return new R(this,t)}createShade(t){return new C(this,t)}createSketch(t){return new X(t)}createFlatSketch(t){const e=this.createSketch(t);return e.update({form:this._renderQuad,shade:this.createShade(e.id+"_defaultShade").update(d.basicEffect)})}createFrame(t){return new L(this,t)}createLayer(t){return new z(t)}createEffect(t){const e=this.createLayer(t);return e.update({sketches:this.createFlatSketch(e.id+"_effectSketch")})}draw(t,e){const n=this.gl;return n.bindFramebuffer(n.FRAMEBUFFER,null),n.viewport(0,0,n.drawingBufferWidth,n.drawingBufferHeight),Y(n,t,e),this}compose(...t){for(const e of t)K(this.gl,e);return this}display(t,e=0){return this.draw(this._staticSketch,{source:t.image(e)})}}function Y(t,e,n,r){const{shade:i,form:a,_drawSettings:c,_uniforms:o}=e;if(!i||!a)throw Error("cannot draw, shader or geometry are not set");t.useProgram(i._program),function(t,e){for(const n in e._attribs){const r=t._attributeSetters[n];r&&r.setter(e._attribs[n])}}(i,a),n&&H(i,n,r),c&&T(t,c);for(let n=0;n<(o.length||1);n++)q(t,e,o[n],r);c&&A(t,c)}function q(t,e,n,r){n&&H(e.shade,n,r),e.form._elements&&null!=e.form._elements.glType?(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.form._elements.buffer),t.drawElements(e.form._drawType,e.form._itemCount,e.form._elements.glType,0)):t.drawArrays(e.form._drawType,0,e.form._itemCount)}function H(t,e,n){for(const r in e){const i=t._uniformSetters[r];if(i){let t=e[r];"function"==typeof t&&(t=t()),"string"==typeof t&&n?i.setter(n[t]):i.setter(t)}}}function W(t,e,n,r,i){r?(t.bindFramebuffer(t.FRAMEBUFFER,r.antialias?r.antiAliasFrameBuffer:r.frameBuffer),t.viewport(0,0,r.width,r.height)):(t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)),e._data.drawSettings&&T(t,e._data.drawSettings);for(const r of e.sketches)Y(t,r,n,i);if(r&&r.antialias){const e=t;t.bindFramebuffer(e.READ_FRAMEBUFFER,r.antiAliasFrameBuffer),t.bindFramebuffer(e.DRAW_FRAMEBUFFER,r.frameBuffer),e.clearBufferfv(e.COLOR,0,[1,1,1,1]),e.blitFramebuffer(0,0,r.width,r.height,0,0,r.width,r.height,t.COLOR_BUFFER_BIT,t.LINEAR)}e._data.drawSettings&&A(t,e._data.drawSettings)}function K(t,e){for(let n=0;n<e.layers.length;n++){const r=e.layers[n],i=r._uniforms.length||1;for(let a=0;a<i;a++){const i=e._targets[0],c=n+a===0&&e._textures.length?e._textures:e._targets[1]&&e._targets[1].textures;W(t,r,r._uniforms[a],i,c),e._swapTargets()}}}var Q=n(9);let Z,J;function tt(t,e){return function(t,e){t!==Z&&(Z=t,J=new $(t,e),ht.device.canvas=t,vt&&vt(),yt&&yt(),Et&&Et(),vt=i(()=>Object(r.a)(()=>{J.sizeMultiplier=ht.device.sizeMultiplier,J.resize(),_t(mt.RESIZE)},"resize")),yt=Object(Q.b)({element:t,enableRightButton:!0,holdRadius:7,holdDelay:250},t=>ht.device.pointer=t),Et=Object(a.b)(t=>ht.device.keys=t))}(t,e),J}const et={};function nt(t,e){return et[e]||(et[e]=t.createForm("Form_"+e))}const rt={};function it(t,e){return rt[e]||(rt[e]=t.createShade("Shade_"+e))}const at={};function ct(t,e){return at[e]||(at[e]=t.createSketch("Sketch_"+e))}const ot={};function st(t,e){return ot[e]||(ot[e]=t.createLayer("Layer_"+e))}const ut={};function ft(t,e){return ut[e]||(ut[e]=t.createFrame("Frame_"+e))}const dt={};function lt(t,e){return dt[e]||(dt[e]=t.createEffect("Effect_"+e))}const ht={device:{tpf:0,sizeMultiplier:1}};function bt(t){return ht[t]}function Ot(t,e,n){const r=ht;if(r[t]){const i=n&&n.reset;!0!==i&&(e=function t(e,n,r){const i=r&&r.ignore;if("object"==typeof e&&"object"==typeof n&&!Array.isArray(e)&&!Array.isArray(n)&&e!==n){for(const r in e)if(e.hasOwnProperty(r)&&(!i||!(r in i)||!0!==i[r])){const a=e[r],c=n[r];void 0!==c&&(e[r]=t(a,c,{ignore:i&&i[r]}))}return e}return n}(e,r[t],{ignore:i}))}r[t]=e}function pt(){return ht}window.state=ht;const gt={};function jt(t,e){gt[t]=e}function _t(t){for(const e in gt)gt[e](t,ht)}const mt={FRAME:"frame",RESIZE:"resize"};let vt,yt,Et},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i}));var r={};n.r(r),n.d(r,"create",(function(){return u})),n.d(r,"clone",(function(){return f})),n.d(r,"copy",(function(){return d})),n.d(r,"fromValues",(function(){return l})),n.d(r,"set",(function(){return h})),n.d(r,"identity",(function(){return b})),n.d(r,"transpose",(function(){return O})),n.d(r,"invert",(function(){return p})),n.d(r,"adjoint",(function(){return g})),n.d(r,"determinant",(function(){return j})),n.d(r,"multiply",(function(){return _})),n.d(r,"translate",(function(){return m})),n.d(r,"scale",(function(){return v})),n.d(r,"rotate",(function(){return y})),n.d(r,"rotateX",(function(){return E})),n.d(r,"rotateY",(function(){return M})),n.d(r,"rotateZ",(function(){return T})),n.d(r,"fromTranslation",(function(){return A})),n.d(r,"fromScaling",(function(){return S})),n.d(r,"fromRotation",(function(){return R})),n.d(r,"fromXRotation",(function(){return F})),n.d(r,"fromYRotation",(function(){return w})),n.d(r,"fromZRotation",(function(){return N})),n.d(r,"fromRotationTranslation",(function(){return x})),n.d(r,"fromQuat2",(function(){return I})),n.d(r,"getTranslation",(function(){return U})),n.d(r,"getScaling",(function(){return D})),n.d(r,"getRotation",(function(){return L})),n.d(r,"fromRotationTranslationScale",(function(){return P})),n.d(r,"fromRotationTranslationScaleOrigin",(function(){return z})),n.d(r,"fromQuat",(function(){return B})),n.d(r,"frustum",(function(){return C})),n.d(r,"perspective",(function(){return G})),n.d(r,"perspectiveFromFieldOfView",(function(){return k})),n.d(r,"ortho",(function(){return X})),n.d(r,"lookAt",(function(){return V})),n.d(r,"targetTo",(function(){return $})),n.d(r,"str",(function(){return Y})),n.d(r,"frob",(function(){return q})),n.d(r,"add",(function(){return H})),n.d(r,"subtract",(function(){return W})),n.d(r,"multiplyScalar",(function(){return K})),n.d(r,"multiplyScalarAndAdd",(function(){return Q})),n.d(r,"exactEquals",(function(){return Z})),n.d(r,"equals",(function(){return J})),n.d(r,"mul",(function(){return tt})),n.d(r,"sub",(function(){return et}));var i={};n.r(i),n.d(i,"create",(function(){return nt})),n.d(i,"clone",(function(){return rt})),n.d(i,"length",(function(){return it})),n.d(i,"fromValues",(function(){return at})),n.d(i,"copy",(function(){return ct})),n.d(i,"set",(function(){return ot})),n.d(i,"add",(function(){return st})),n.d(i,"subtract",(function(){return ut})),n.d(i,"multiply",(function(){return ft})),n.d(i,"divide",(function(){return dt})),n.d(i,"ceil",(function(){return lt})),n.d(i,"floor",(function(){return ht})),n.d(i,"min",(function(){return bt})),n.d(i,"max",(function(){return Ot})),n.d(i,"round",(function(){return pt})),n.d(i,"scale",(function(){return gt})),n.d(i,"scaleAndAdd",(function(){return jt})),n.d(i,"distance",(function(){return _t})),n.d(i,"squaredDistance",(function(){return mt})),n.d(i,"squaredLength",(function(){return vt})),n.d(i,"negate",(function(){return yt})),n.d(i,"inverse",(function(){return Et})),n.d(i,"normalize",(function(){return Mt})),n.d(i,"dot",(function(){return Tt})),n.d(i,"cross",(function(){return At})),n.d(i,"lerp",(function(){return St})),n.d(i,"hermite",(function(){return Rt})),n.d(i,"bezier",(function(){return Ft})),n.d(i,"random",(function(){return wt})),n.d(i,"transformMat4",(function(){return Nt})),n.d(i,"transformMat3",(function(){return xt})),n.d(i,"transformQuat",(function(){return It})),n.d(i,"rotateX",(function(){return Ut})),n.d(i,"rotateY",(function(){return Dt})),n.d(i,"rotateZ",(function(){return Lt})),n.d(i,"angle",(function(){return Pt})),n.d(i,"zero",(function(){return zt})),n.d(i,"str",(function(){return Bt})),n.d(i,"exactEquals",(function(){return Ct})),n.d(i,"equals",(function(){return Gt})),n.d(i,"sub",(function(){return Xt})),n.d(i,"mul",(function(){return Vt})),n.d(i,"div",(function(){return $t})),n.d(i,"dist",(function(){return Yt})),n.d(i,"sqrDist",(function(){return qt})),n.d(i,"len",(function(){return Ht})),n.d(i,"sqrLen",(function(){return Wt})),n.d(i,"forEach",(function(){return Kt}));var a={};n.r(a),n.d(a,"create",(function(){return Jt})),n.d(a,"identity",(function(){return te})),n.d(a,"setAxisAngle",(function(){return ee})),n.d(a,"getAxisAngle",(function(){return ne})),n.d(a,"getAngle",(function(){return re})),n.d(a,"multiply",(function(){return ie})),n.d(a,"rotateX",(function(){return ae})),n.d(a,"rotateY",(function(){return ce})),n.d(a,"rotateZ",(function(){return oe})),n.d(a,"calculateW",(function(){return se})),n.d(a,"exp",(function(){return ue})),n.d(a,"ln",(function(){return fe})),n.d(a,"pow",(function(){return de})),n.d(a,"slerp",(function(){return le})),n.d(a,"random",(function(){return he})),n.d(a,"invert",(function(){return be})),n.d(a,"conjugate",(function(){return Oe})),n.d(a,"fromMat3",(function(){return pe})),n.d(a,"fromEuler",(function(){return ge})),n.d(a,"str",(function(){return je})),n.d(a,"clone",(function(){return Ae})),n.d(a,"fromValues",(function(){return Se})),n.d(a,"copy",(function(){return Re})),n.d(a,"set",(function(){return Fe})),n.d(a,"add",(function(){return we})),n.d(a,"mul",(function(){return Ne})),n.d(a,"scale",(function(){return xe})),n.d(a,"dot",(function(){return Ie})),n.d(a,"lerp",(function(){return Ue})),n.d(a,"length",(function(){return De})),n.d(a,"len",(function(){return Le})),n.d(a,"squaredLength",(function(){return Pe})),n.d(a,"sqrLen",(function(){return ze})),n.d(a,"normalize",(function(){return Be})),n.d(a,"exactEquals",(function(){return Ce})),n.d(a,"equals",(function(){return Ge})),n.d(a,"rotationTo",(function(){return ke})),n.d(a,"sqlerp",(function(){return Xe})),n.d(a,"setAxes",(function(){return Ve}));var c=1e-6,o="undefined"!=typeof Float32Array?Float32Array:Array,s=Math.random;Math.PI;function u(){var t=new o(16);return o!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function f(t){var e=new o(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function d(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function l(t,e,n,r,i,a,c,s,u,f,d,l,h,b,O,p){var g=new o(16);return g[0]=t,g[1]=e,g[2]=n,g[3]=r,g[4]=i,g[5]=a,g[6]=c,g[7]=s,g[8]=u,g[9]=f,g[10]=d,g[11]=l,g[12]=h,g[13]=b,g[14]=O,g[15]=p,g}function h(t,e,n,r,i,a,c,o,s,u,f,d,l,h,b,O,p){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=c,t[6]=o,t[7]=s,t[8]=u,t[9]=f,t[10]=d,t[11]=l,t[12]=h,t[13]=b,t[14]=O,t[15]=p,t}function b(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],a=e[6],c=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=i,t[13]=c,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function p(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],c=e[4],o=e[5],s=e[6],u=e[7],f=e[8],d=e[9],l=e[10],h=e[11],b=e[12],O=e[13],p=e[14],g=e[15],j=n*o-r*c,_=n*s-i*c,m=n*u-a*c,v=r*s-i*o,y=r*u-a*o,E=i*u-a*s,M=f*O-d*b,T=f*p-l*b,A=f*g-h*b,S=d*p-l*O,R=d*g-h*O,F=l*g-h*p,w=j*F-_*R+m*S+v*A-y*T+E*M;return w?(w=1/w,t[0]=(o*F-s*R+u*S)*w,t[1]=(i*R-r*F-a*S)*w,t[2]=(O*E-p*y+g*v)*w,t[3]=(l*y-d*E-h*v)*w,t[4]=(s*A-c*F-u*T)*w,t[5]=(n*F-i*A+a*T)*w,t[6]=(p*m-b*E-g*_)*w,t[7]=(f*E-l*m+h*_)*w,t[8]=(c*R-o*A+u*M)*w,t[9]=(r*A-n*R-a*M)*w,t[10]=(b*y-O*m+g*j)*w,t[11]=(d*m-f*y-h*j)*w,t[12]=(o*T-c*S-s*M)*w,t[13]=(n*S-r*T+i*M)*w,t[14]=(O*_-b*v-p*j)*w,t[15]=(f*v-d*_+l*j)*w,t):null}function g(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],c=e[4],o=e[5],s=e[6],u=e[7],f=e[8],d=e[9],l=e[10],h=e[11],b=e[12],O=e[13],p=e[14],g=e[15];return t[0]=o*(l*g-h*p)-d*(s*g-u*p)+O*(s*h-u*l),t[1]=-(r*(l*g-h*p)-d*(i*g-a*p)+O*(i*h-a*l)),t[2]=r*(s*g-u*p)-o*(i*g-a*p)+O*(i*u-a*s),t[3]=-(r*(s*h-u*l)-o*(i*h-a*l)+d*(i*u-a*s)),t[4]=-(c*(l*g-h*p)-f*(s*g-u*p)+b*(s*h-u*l)),t[5]=n*(l*g-h*p)-f*(i*g-a*p)+b*(i*h-a*l),t[6]=-(n*(s*g-u*p)-c*(i*g-a*p)+b*(i*u-a*s)),t[7]=n*(s*h-u*l)-c*(i*h-a*l)+f*(i*u-a*s),t[8]=c*(d*g-h*O)-f*(o*g-u*O)+b*(o*h-u*d),t[9]=-(n*(d*g-h*O)-f*(r*g-a*O)+b*(r*h-a*d)),t[10]=n*(o*g-u*O)-c*(r*g-a*O)+b*(r*u-a*o),t[11]=-(n*(o*h-u*d)-c*(r*h-a*d)+f*(r*u-a*o)),t[12]=-(c*(d*p-l*O)-f*(o*p-s*O)+b*(o*l-s*d)),t[13]=n*(d*p-l*O)-f*(r*p-i*O)+b*(r*l-i*d),t[14]=-(n*(o*p-s*O)-c*(r*p-i*O)+b*(r*s-i*o)),t[15]=n*(o*l-s*d)-c*(r*l-i*d)+f*(r*s-i*o),t}function j(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],c=t[5],o=t[6],s=t[7],u=t[8],f=t[9],d=t[10],l=t[11],h=t[12],b=t[13],O=t[14],p=t[15];return(e*c-n*a)*(d*p-l*O)-(e*o-r*a)*(f*p-l*b)+(e*s-i*a)*(f*O-d*b)+(n*o-r*c)*(u*p-l*h)-(n*s-i*c)*(u*O-d*h)+(r*s-i*o)*(u*b-f*h)}function _(t,e,n){var r=e[0],i=e[1],a=e[2],c=e[3],o=e[4],s=e[5],u=e[6],f=e[7],d=e[8],l=e[9],h=e[10],b=e[11],O=e[12],p=e[13],g=e[14],j=e[15],_=n[0],m=n[1],v=n[2],y=n[3];return t[0]=_*r+m*o+v*d+y*O,t[1]=_*i+m*s+v*l+y*p,t[2]=_*a+m*u+v*h+y*g,t[3]=_*c+m*f+v*b+y*j,_=n[4],m=n[5],v=n[6],y=n[7],t[4]=_*r+m*o+v*d+y*O,t[5]=_*i+m*s+v*l+y*p,t[6]=_*a+m*u+v*h+y*g,t[7]=_*c+m*f+v*b+y*j,_=n[8],m=n[9],v=n[10],y=n[11],t[8]=_*r+m*o+v*d+y*O,t[9]=_*i+m*s+v*l+y*p,t[10]=_*a+m*u+v*h+y*g,t[11]=_*c+m*f+v*b+y*j,_=n[12],m=n[13],v=n[14],y=n[15],t[12]=_*r+m*o+v*d+y*O,t[13]=_*i+m*s+v*l+y*p,t[14]=_*a+m*u+v*h+y*g,t[15]=_*c+m*f+v*b+y*j,t}function m(t,e,n){var r,i,a,c,o,s,u,f,d,l,h,b,O=n[0],p=n[1],g=n[2];return e===t?(t[12]=e[0]*O+e[4]*p+e[8]*g+e[12],t[13]=e[1]*O+e[5]*p+e[9]*g+e[13],t[14]=e[2]*O+e[6]*p+e[10]*g+e[14],t[15]=e[3]*O+e[7]*p+e[11]*g+e[15]):(r=e[0],i=e[1],a=e[2],c=e[3],o=e[4],s=e[5],u=e[6],f=e[7],d=e[8],l=e[9],h=e[10],b=e[11],t[0]=r,t[1]=i,t[2]=a,t[3]=c,t[4]=o,t[5]=s,t[6]=u,t[7]=f,t[8]=d,t[9]=l,t[10]=h,t[11]=b,t[12]=r*O+o*p+d*g+e[12],t[13]=i*O+s*p+l*g+e[13],t[14]=a*O+u*p+h*g+e[14],t[15]=c*O+f*p+b*g+e[15]),t}function v(t,e,n){var r=n[0],i=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function y(t,e,n,r){var i,a,o,s,u,f,d,l,h,b,O,p,g,j,_,m,v,y,E,M,T,A,S,R,F=r[0],w=r[1],N=r[2],x=Math.hypot(F,w,N);return x<c?null:(F*=x=1/x,w*=x,N*=x,i=Math.sin(n),o=1-(a=Math.cos(n)),s=e[0],u=e[1],f=e[2],d=e[3],l=e[4],h=e[5],b=e[6],O=e[7],p=e[8],g=e[9],j=e[10],_=e[11],m=F*F*o+a,v=w*F*o+N*i,y=N*F*o-w*i,E=F*w*o-N*i,M=w*w*o+a,T=N*w*o+F*i,A=F*N*o+w*i,S=w*N*o-F*i,R=N*N*o+a,t[0]=s*m+l*v+p*y,t[1]=u*m+h*v+g*y,t[2]=f*m+b*v+j*y,t[3]=d*m+O*v+_*y,t[4]=s*E+l*M+p*T,t[5]=u*E+h*M+g*T,t[6]=f*E+b*M+j*T,t[7]=d*E+O*M+_*T,t[8]=s*A+l*S+p*R,t[9]=u*A+h*S+g*R,t[10]=f*A+b*S+j*R,t[11]=d*A+O*S+_*R,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function E(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[4],c=e[5],o=e[6],s=e[7],u=e[8],f=e[9],d=e[10],l=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+u*r,t[5]=c*i+f*r,t[6]=o*i+d*r,t[7]=s*i+l*r,t[8]=u*i-a*r,t[9]=f*i-c*r,t[10]=d*i-o*r,t[11]=l*i-s*r,t}function M(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],c=e[1],o=e[2],s=e[3],u=e[8],f=e[9],d=e[10],l=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-u*r,t[1]=c*i-f*r,t[2]=o*i-d*r,t[3]=s*i-l*r,t[8]=a*r+u*i,t[9]=c*r+f*i,t[10]=o*r+d*i,t[11]=s*r+l*i,t}function T(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],c=e[1],o=e[2],s=e[3],u=e[4],f=e[5],d=e[6],l=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+u*r,t[1]=c*i+f*r,t[2]=o*i+d*r,t[3]=s*i+l*r,t[4]=u*i-a*r,t[5]=f*i-c*r,t[6]=d*i-o*r,t[7]=l*i-s*r,t}function A(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function S(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R(t,e,n){var r,i,a,o=n[0],s=n[1],u=n[2],f=Math.hypot(o,s,u);return f<c?null:(o*=f=1/f,s*=f,u*=f,r=Math.sin(e),a=1-(i=Math.cos(e)),t[0]=o*o*a+i,t[1]=s*o*a+u*r,t[2]=u*o*a-s*r,t[3]=0,t[4]=o*s*a-u*r,t[5]=s*s*a+i,t[6]=u*s*a+o*r,t[7]=0,t[8]=o*u*a+s*r,t[9]=s*u*a-o*r,t[10]=u*u*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function F(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function w(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function N(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function x(t,e,n){var r=e[0],i=e[1],a=e[2],c=e[3],o=r+r,s=i+i,u=a+a,f=r*o,d=r*s,l=r*u,h=i*s,b=i*u,O=a*u,p=c*o,g=c*s,j=c*u;return t[0]=1-(h+O),t[1]=d+j,t[2]=l-g,t[3]=0,t[4]=d-j,t[5]=1-(f+O),t[6]=b+p,t[7]=0,t[8]=l+g,t[9]=b-p,t[10]=1-(f+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function I(t,e){var n=new o(3),r=-e[0],i=-e[1],a=-e[2],c=e[3],s=e[4],u=e[5],f=e[6],d=e[7],l=r*r+i*i+a*a+c*c;return l>0?(n[0]=2*(s*c+d*r+u*a-f*i)/l,n[1]=2*(u*c+d*i+f*r-s*a)/l,n[2]=2*(f*c+d*a+s*i-u*r)/l):(n[0]=2*(s*c+d*r+u*a-f*i),n[1]=2*(u*c+d*i+f*r-s*a),n[2]=2*(f*c+d*a+s*i-u*r)),x(t,e,n),t}function U(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function D(t,e){var n=e[0],r=e[1],i=e[2],a=e[4],c=e[5],o=e[6],s=e[8],u=e[9],f=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(a,c,o),t[2]=Math.hypot(s,u,f),t}function L(t,e){var n=new o(3);D(n,e);var r=1/n[0],i=1/n[1],a=1/n[2],c=e[0]*r,s=e[1]*i,u=e[2]*a,f=e[4]*r,d=e[5]*i,l=e[6]*a,h=e[8]*r,b=e[9]*i,O=e[10]*a,p=c+d+O,g=0;return p>0?(g=2*Math.sqrt(p+1),t[3]=.25*g,t[0]=(l-b)/g,t[1]=(h-u)/g,t[2]=(s-f)/g):c>d&&c>O?(g=2*Math.sqrt(1+c-d-O),t[3]=(l-b)/g,t[0]=.25*g,t[1]=(s+f)/g,t[2]=(h+u)/g):d>O?(g=2*Math.sqrt(1+d-c-O),t[3]=(h-u)/g,t[0]=(s+f)/g,t[1]=.25*g,t[2]=(l+b)/g):(g=2*Math.sqrt(1+O-c-d),t[3]=(s-f)/g,t[0]=(h+u)/g,t[1]=(l+b)/g,t[2]=.25*g),t}function P(t,e,n,r){var i=e[0],a=e[1],c=e[2],o=e[3],s=i+i,u=a+a,f=c+c,d=i*s,l=i*u,h=i*f,b=a*u,O=a*f,p=c*f,g=o*s,j=o*u,_=o*f,m=r[0],v=r[1],y=r[2];return t[0]=(1-(b+p))*m,t[1]=(l+_)*m,t[2]=(h-j)*m,t[3]=0,t[4]=(l-_)*v,t[5]=(1-(d+p))*v,t[6]=(O+g)*v,t[7]=0,t[8]=(h+j)*y,t[9]=(O-g)*y,t[10]=(1-(d+b))*y,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function z(t,e,n,r,i){var a=e[0],c=e[1],o=e[2],s=e[3],u=a+a,f=c+c,d=o+o,l=a*u,h=a*f,b=a*d,O=c*f,p=c*d,g=o*d,j=s*u,_=s*f,m=s*d,v=r[0],y=r[1],E=r[2],M=i[0],T=i[1],A=i[2],S=(1-(O+g))*v,R=(h+m)*v,F=(b-_)*v,w=(h-m)*y,N=(1-(l+g))*y,x=(p+j)*y,I=(b+_)*E,U=(p-j)*E,D=(1-(l+O))*E;return t[0]=S,t[1]=R,t[2]=F,t[3]=0,t[4]=w,t[5]=N,t[6]=x,t[7]=0,t[8]=I,t[9]=U,t[10]=D,t[11]=0,t[12]=n[0]+M-(S*M+w*T+I*A),t[13]=n[1]+T-(R*M+N*T+U*A),t[14]=n[2]+A-(F*M+x*T+D*A),t[15]=1,t}function B(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],c=n+n,o=r+r,s=i+i,u=n*c,f=r*c,d=r*o,l=i*c,h=i*o,b=i*s,O=a*c,p=a*o,g=a*s;return t[0]=1-d-b,t[1]=f+g,t[2]=l-p,t[3]=0,t[4]=f-g,t[5]=1-u-b,t[6]=h+O,t[7]=0,t[8]=l+p,t[9]=h-O,t[10]=1-u-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function C(t,e,n,r,i,a,c){var o=1/(n-e),s=1/(i-r),u=1/(a-c);return t[0]=2*a*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*s,t[6]=0,t[7]=0,t[8]=(n+e)*o,t[9]=(i+r)*s,t[10]=(c+a)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=c*a*2*u,t[15]=0,t}function G(t,e,n,r,i){var a,c=1/Math.tan(e/2);return t[0]=c/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(r-i),t[10]=(i+r)*a,t[14]=2*i*r*a):(t[10]=-1,t[14]=-2*r),t}function k(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),c=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),s=2/(c+o),u=2/(i+a);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(c-o)*s*.5,t[9]=(i-a)*u*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function X(t,e,n,r,i,a,c){var o=1/(e-n),s=1/(r-i),u=1/(a-c);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*o,t[13]=(i+r)*s,t[14]=(c+a)*u,t[15]=1,t}function V(t,e,n,r){var i,a,o,s,u,f,d,l,h,O,p=e[0],g=e[1],j=e[2],_=r[0],m=r[1],v=r[2],y=n[0],E=n[1],M=n[2];return Math.abs(p-y)<c&&Math.abs(g-E)<c&&Math.abs(j-M)<c?b(t):(d=p-y,l=g-E,h=j-M,i=m*(h*=O=1/Math.hypot(d,l,h))-v*(l*=O),a=v*(d*=O)-_*h,o=_*l-m*d,(O=Math.hypot(i,a,o))?(i*=O=1/O,a*=O,o*=O):(i=0,a=0,o=0),s=l*o-h*a,u=h*i-d*o,f=d*a-l*i,(O=Math.hypot(s,u,f))?(s*=O=1/O,u*=O,f*=O):(s=0,u=0,f=0),t[0]=i,t[1]=s,t[2]=d,t[3]=0,t[4]=a,t[5]=u,t[6]=l,t[7]=0,t[8]=o,t[9]=f,t[10]=h,t[11]=0,t[12]=-(i*p+a*g+o*j),t[13]=-(s*p+u*g+f*j),t[14]=-(d*p+l*g+h*j),t[15]=1,t)}function $(t,e,n,r){var i=e[0],a=e[1],c=e[2],o=r[0],s=r[1],u=r[2],f=i-n[0],d=a-n[1],l=c-n[2],h=f*f+d*d+l*l;h>0&&(f*=h=1/Math.sqrt(h),d*=h,l*=h);var b=s*l-u*d,O=u*f-o*l,p=o*d-s*f;return(h=b*b+O*O+p*p)>0&&(b*=h=1/Math.sqrt(h),O*=h,p*=h),t[0]=b,t[1]=O,t[2]=p,t[3]=0,t[4]=d*p-l*O,t[5]=l*b-f*p,t[6]=f*O-d*b,t[7]=0,t[8]=f,t[9]=d,t[10]=l,t[11]=0,t[12]=i,t[13]=a,t[14]=c,t[15]=1,t}function Y(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function q(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function H(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function W(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function K(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Q(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Z(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function J(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],f=t[7],d=t[8],l=t[9],h=t[10],b=t[11],O=t[12],p=t[13],g=t[14],j=t[15],_=e[0],m=e[1],v=e[2],y=e[3],E=e[4],M=e[5],T=e[6],A=e[7],S=e[8],R=e[9],F=e[10],w=e[11],N=e[12],x=e[13],I=e[14],U=e[15];return Math.abs(n-_)<=c*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(r-m)<=c*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(i-v)<=c*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(a-y)<=c*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(o-E)<=c*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(s-M)<=c*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(u-T)<=c*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(f-A)<=c*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(d-S)<=c*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(l-R)<=c*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(h-F)<=c*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(b-w)<=c*Math.max(1,Math.abs(b),Math.abs(w))&&Math.abs(O-N)<=c*Math.max(1,Math.abs(O),Math.abs(N))&&Math.abs(p-x)<=c*Math.max(1,Math.abs(p),Math.abs(x))&&Math.abs(g-I)<=c*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(j-U)<=c*Math.max(1,Math.abs(j),Math.abs(U))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var tt=_,et=W;function nt(){var t=new o(3);return o!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function rt(t){var e=new o(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function it(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function at(t,e,n){var r=new o(3);return r[0]=t,r[1]=e,r[2]=n,r}function ct(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function ot(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function st(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function ut(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function ft(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function dt(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function lt(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function ht(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function bt(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function Ot(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function pt(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function gt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function jt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function _t(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function mt(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function vt(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function yt(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Et(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Mt(t,e){var n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function Tt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function At(t,e,n){var r=e[0],i=e[1],a=e[2],c=n[0],o=n[1],s=n[2];return t[0]=i*s-a*o,t[1]=a*c-r*s,t[2]=r*o-i*c,t}function St(t,e,n,r){var i=e[0],a=e[1],c=e[2];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=c+r*(n[2]-c),t}function Rt(t,e,n,r,i,a){var c=a*a,o=c*(2*a-3)+1,s=c*(a-2)+a,u=c*(a-1),f=c*(3-2*a);return t[0]=e[0]*o+n[0]*s+r[0]*u+i[0]*f,t[1]=e[1]*o+n[1]*s+r[1]*u+i[1]*f,t[2]=e[2]*o+n[2]*s+r[2]*u+i[2]*f,t}function Ft(t,e,n,r,i,a){var c=1-a,o=c*c,s=a*a,u=o*c,f=3*a*o,d=3*s*c,l=s*a;return t[0]=e[0]*u+n[0]*f+r[0]*d+i[0]*l,t[1]=e[1]*u+n[1]*f+r[1]*d+i[1]*l,t[2]=e[2]*u+n[2]*f+r[2]*d+i[2]*l,t}function wt(t,e){e=e||1;var n=2*s()*Math.PI,r=2*s()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function Nt(t,e,n){var r=e[0],i=e[1],a=e[2],c=n[3]*r+n[7]*i+n[11]*a+n[15];return c=c||1,t[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/c,t[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/c,t[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/c,t}function xt(t,e,n){var r=e[0],i=e[1],a=e[2];return t[0]=r*n[0]+i*n[3]+a*n[6],t[1]=r*n[1]+i*n[4]+a*n[7],t[2]=r*n[2]+i*n[5]+a*n[8],t}function It(t,e,n){var r=n[0],i=n[1],a=n[2],c=n[3],o=e[0],s=e[1],u=e[2],f=i*u-a*s,d=a*o-r*u,l=r*s-i*o,h=i*l-a*d,b=a*f-r*l,O=r*d-i*f,p=2*c;return f*=p,d*=p,l*=p,h*=2,b*=2,O*=2,t[0]=o+f+h,t[1]=s+d+b,t[2]=u+l+O,t}function Ut(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function Dt(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function Lt(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function Pt(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],c=e[1],o=e[2],s=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(a*a+c*c+o*o),u=s&&Tt(t,e)/s;return Math.acos(Math.min(Math.max(u,-1),1))}function zt(t){return t[0]=0,t[1]=0,t[2]=0,t}function Bt(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Ct(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Gt(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],s=e[2];return Math.abs(n-a)<=c*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=c*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=c*Math.max(1,Math.abs(i),Math.abs(s))}var kt,Xt=ut,Vt=ft,$t=dt,Yt=_t,qt=mt,Ht=it,Wt=vt,Kt=(kt=nt(),function(t,e,n,r,i,a){var c,o;for(e||(e=3),n||(n=0),o=r?Math.min(r*e+n,t.length):t.length,c=n;c<o;c+=e)kt[0]=t[c],kt[1]=t[c+1],kt[2]=t[c+2],i(kt,kt,a),t[c]=kt[0],t[c+1]=kt[1],t[c+2]=kt[2];return t});function Qt(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function Zt(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}!function(){var t,e=(t=new o(4),o!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t)}();function Jt(){var t=new o(4);return o!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function te(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function ee(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function ne(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>c?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function re(t,e){var n=Ie(t,e);return Math.acos(2*n*n-1)}function ie(t,e,n){var r=e[0],i=e[1],a=e[2],c=e[3],o=n[0],s=n[1],u=n[2],f=n[3];return t[0]=r*f+c*o+i*u-a*s,t[1]=i*f+c*s+a*o-r*u,t[2]=a*f+c*u+r*s-i*o,t[3]=c*f-r*o-i*s-a*u,t}function ae(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],c=e[3],o=Math.sin(n),s=Math.cos(n);return t[0]=r*s+c*o,t[1]=i*s+a*o,t[2]=a*s-i*o,t[3]=c*s-r*o,t}function ce(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],c=e[3],o=Math.sin(n),s=Math.cos(n);return t[0]=r*s-a*o,t[1]=i*s+c*o,t[2]=a*s+r*o,t[3]=c*s-i*o,t}function oe(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],c=e[3],o=Math.sin(n),s=Math.cos(n);return t[0]=r*s+i*o,t[1]=i*s-r*o,t[2]=a*s+c*o,t[3]=c*s-a*o,t}function se(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function ue(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],c=Math.sqrt(n*n+r*r+i*i),o=Math.exp(a),s=c>0?o*Math.sin(c)/c:0;return t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=o*Math.cos(c),t}function fe(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],c=Math.sqrt(n*n+r*r+i*i),o=c>0?Math.atan2(c,a)/c:0;return t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=.5*Math.log(n*n+r*r+i*i+a*a),t}function de(t,e,n){return fe(t,e),xe(t,t,n),ue(t,t),t}function le(t,e,n,r){var i,a,o,s,u,f=e[0],d=e[1],l=e[2],h=e[3],b=n[0],O=n[1],p=n[2],g=n[3];return(a=f*b+d*O+l*p+h*g)<0&&(a=-a,b=-b,O=-O,p=-p,g=-g),1-a>c?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-r)*i)/o,u=Math.sin(r*i)/o):(s=1-r,u=r),t[0]=s*f+u*b,t[1]=s*d+u*O,t[2]=s*l+u*p,t[3]=s*h+u*g,t}function he(t){var e=s(),n=s(),r=s(),i=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*n),t[1]=i*Math.cos(2*Math.PI*n),t[2]=a*Math.sin(2*Math.PI*r),t[3]=a*Math.cos(2*Math.PI*r),t}function be(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],c=n*n+r*r+i*i+a*a,o=c?1/c:0;return t[0]=-n*o,t[1]=-r*o,t[2]=-i*o,t[3]=a*o,t}function Oe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function pe(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var a=(i+1)%3,c=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*a+a]-e[3*c+c]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*a+c]-e[3*c+a])*n,t[a]=(e[3*a+i]+e[3*i+a])*n,t[c]=(e[3*c+i]+e[3*i+c])*n}return t}function ge(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var a=Math.sin(e),c=Math.cos(e),o=Math.sin(n),s=Math.cos(n),u=Math.sin(r),f=Math.cos(r);return t[0]=a*s*f-c*o*u,t[1]=c*o*f+a*s*u,t[2]=c*s*u-a*o*f,t[3]=c*s*f+a*o*u,t}function je(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var _e,me,ve,ye,Ee,Me,Te,Ae=function(t){var e=new o(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},Se=function(t,e,n,r){var i=new o(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i},Re=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},Fe=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},we=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},Ne=ie,xe=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},Ie=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},Ue=function(t,e,n,r){var i=e[0],a=e[1],c=e[2],o=e[3];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=c+r*(n[2]-c),t[3]=o+r*(n[3]-o),t},De=Qt,Le=De,Pe=Zt,ze=Pe,Be=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],c=n*n+r*r+i*i+a*a;return c>0&&(c=1/Math.sqrt(c)),t[0]=n*c,t[1]=r*c,t[2]=i*c,t[3]=a*c,t},Ce=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},Ge=function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=e[0],s=e[1],u=e[2],f=e[3];return Math.abs(n-o)<=c*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=c*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=c*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-f)<=c*Math.max(1,Math.abs(a),Math.abs(f))},ke=(_e=nt(),me=at(1,0,0),ve=at(0,1,0),function(t,e,n){var r=Tt(e,n);return r<-.999999?(At(_e,me,e),Ht(_e)<1e-6&&At(_e,ve,e),Mt(_e,_e),ee(t,_e,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(At(_e,e,n),t[0]=_e[0],t[1]=_e[1],t[2]=_e[2],t[3]=1+r,Be(t,t))}),Xe=(ye=Jt(),Ee=Jt(),function(t,e,n,r,i,a){return le(ye,e,i,a),le(Ee,n,r,a),le(t,ye,Ee,2*a*(1-a)),t}),Ve=(Me=new o(9),o!=Float32Array&&(Me[1]=0,Me[2]=0,Me[3]=0,Me[5]=0,Me[6]=0,Me[7]=0),Me[0]=1,Me[4]=1,Me[8]=1,Te=Me,function(t,e,n,r){return Te[0]=n[0],Te[3]=n[1],Te[6]=n[2],Te[1]=r[0],Te[4]=r[1],Te[7]=r[2],Te[2]=-e[0],Te[5]=-e[1],Te[8]=-e[2],Be(t,pe(t,Te))})},function(t,e,n){"use strict";n.d(e,"f",(function(){return i})),n.d(e,"a",(function(){return a})),n.d(e,"g",(function(){return c})),n.d(e,"h",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"e",(function(){return u})),n.d(e,"d",(function(){return f})),n.d(e,"b",(function(){return d}));var r=n(7);function i(t){return t[Object(r.b)(t.length)]}function a(t,e){for(let n=0;n<e;n++)t(n)}function c(t,e,n=[]){for(let r=0;r<e;r++)n[r]=t(r);return n}function o(t,e,n,r=[]){const i=Math.min(e.length,n.length);for(let a=0;a<i;a++)r[a]=t(e[a],n[a]);return r}function s(t,e=[]){for(const n of t){const t=e.length;for(let r=0;r<n.length;r++)e[r+t]=n[r]}return e}function u(t,e,n=[]){return s(e.map(t),n)}function f(t,e){if(Array.isArray(e))return e.map(t);{const n={};for(const r in e)n[r]=t(e[r],r);return n}}function d(t,e){for(const n in e)t(e[n],n)}},function(t,e,n){"use strict";var r;function i(t,e){const n=e||t,{element:r=window}=t,i={};function a(t){i[t.keyCode]=Date.now(),n(i)}function c(t){delete i[t.keyCode],n(i)}return r.addEventListener("keyup",c,!1),r.addEventListener("keydown",a,!1),n(i),function(){r.removeEventListener("keyup",c),r.removeEventListener("keydown",a)}}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),function(t){t[t.CANCEL=3]="CANCEL",t[t.HELP=6]="HELP",t[t.BACK_SPACE=8]="BACK_SPACE",t[t.TAB=9]="TAB",t[t.CLEAR=12]="CLEAR",t[t.RETURN=13]="RETURN",t[t.ENTER=14]="ENTER",t[t.SHIFT=16]="SHIFT",t[t.CONTROL=17]="CONTROL",t[t.ALT=18]="ALT",t[t.PAUSE=19]="PAUSE",t[t.CAPS_LOCK=20]="CAPS_LOCK",t[t.ESCAPE=27]="ESCAPE",t[t.SPACE=32]="SPACE",t[t.PAGE_UP=33]="PAGE_UP",t[t.PAGE_DOWN=34]="PAGE_DOWN",t[t.END=35]="END",t[t.HOME=36]="HOME",t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN",t[t.PRINTSCREEN=44]="PRINTSCREEN",t[t.INSERT=45]="INSERT",t[t.DELETE=46]="DELETE",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_1=49]="DIGIT_1",t[t.DIGIT_2=50]="DIGIT_2",t[t.DIGIT_3=51]="DIGIT_3",t[t.DIGIT_4=52]="DIGIT_4",t[t.DIGIT_5=53]="DIGIT_5",t[t.DIGIT_6=54]="DIGIT_6",t[t.DIGIT_7=55]="DIGIT_7",t[t.DIGIT_8=56]="DIGIT_8",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.EQUALS=61]="EQUALS",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.CONTEXT_MENU=93]="CONTEXT_MENU",t[t.NUMPAD0=96]="NUMPAD0",t[t.NUMPAD1=97]="NUMPAD1",t[t.NUMPAD2=98]="NUMPAD2",t[t.NUMPAD3=99]="NUMPAD3",t[t.NUMPAD4=100]="NUMPAD4",t[t.NUMPAD5=101]="NUMPAD5",t[t.NUMPAD6=102]="NUMPAD6",t[t.NUMPAD7=103]="NUMPAD7",t[t.NUMPAD8=104]="NUMPAD8",t[t.NUMPAD9=105]="NUMPAD9",t[t.MULTIPLY=106]="MULTIPLY",t[t.ADD=107]="ADD",t[t.SEPARATOR=108]="SEPARATOR",t[t.SUBTRACT=109]="SUBTRACT",t[t.DECIMAL=110]="DECIMAL",t[t.DIVIDE=111]="DIVIDE",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.F13=124]="F13",t[t.F14=125]="F14",t[t.F15=126]="F15",t[t.F16=127]="F16",t[t.F17=128]="F17",t[t.F18=129]="F18",t[t.F19=130]="F19",t[t.F20=131]="F20",t[t.F21=132]="F21",t[t.F22=133]="F22",t[t.F23=134]="F23",t[t.F24=135]="F24",t[t.NUM_LOCK=144]="NUM_LOCK",t[t.SCROLL_LOCK=145]="SCROLL_LOCK",t[t.COMMA=188]="COMMA",t[t.PERIOD=190]="PERIOD",t[t.SLASH=191]="SLASH",t[t.BACK_QUOTE=192]="BACK_QUOTE",t[t.OPEN_BRACKET=219]="OPEN_BRACKET",t[t.BACK_SLASH=220]="BACK_SLASH",t[t.CLOSE_BRACKET=221]="CLOSE_BRACKET",t[t.QUOTE=222]="QUOTE",t[t.META=224]="META"}(r||(r={}))},function(t,e,n){"use strict";function r(t,e,n=[]){for(let r=0;r<t.length;r++)n[r]=t[r]+e[r];return n}function i(t,e,n=[]){for(let r=0;r<t.length;r++)n[r]=t[r]-e[r];return n}function a(t,e,n=[]){for(let r=0;r<e.length;r++)n[r]=e[r]*t;return n}function c(t,e,n=[]){for(let r=0;r<e.length;r++)n[r]=e[r]/t;return n}function o(t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];e+=r*r}return Math.sqrt(e)}function s(t,e=[]){return c(o(t),t,e)}function u(t,e){let n=0;for(let r=0;r<t.length;r++)n+=t[r]*e[r];return n}function f(t,e,n=[]){return n[0]=t[1]*e[2]-t[2]*e[1],n[1]=t[2]*e[0]-t[0]*e[2],n[2]=t[0]*e[1]-t[1]*e[0],n}function d(t,e){return t[0]*e[1]-t[1]*e[0]}n.d(e,"a",(function(){return r})),n.d(e,"i",(function(){return i})),n.d(e,"g",(function(){return a})),n.d(e,"d",(function(){return c})),n.d(e,"f",(function(){return o})),n.d(e,"h",(function(){return s})),n.d(e,"e",(function(){return u})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return d}));n(10).a},function(t,e,n){"use strict";n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return f})),n.d(e,"d",(function(){return d})),n.d(e,"a",(function(){return l}));var r=n(38),i=n(35),a=n(32),c=n(22),o=n(45);const s=t=>{const[e,n,r]=Object(i.a)(t)?[t]:t;return{tag:"arg",type:e,id:n||Object(a.a)(),opts:Object.assign({q:"in"},r)}};function u(t,e,n,a){const u=n.map(s),f=a(...u.map(t=>Object(o.c)(t.type,t.id,t.opts))).filter(t=>null!=t),d=Object(c.f)((n,i)=>("ret"===i.tag&&(Object(r.a)(i.type===t,`wrong return type for function '${e}', expected ${t}, got ${i.type}`),n++),n),c.e,0,f);if("void"!==t&&!d)throw new Error(`function '${e}' must return a value of type ${t}`);const l=Object(c.f)((t,e)=>("call"===e.tag&&e.fn&&t.push(e.fn),t),c.a,[],f),h=(...t)=>function(t,...e){return Object(i.a)(t)?{tag:"call",type:e[0],id:t,args:e.slice(1)}:{tag:"call",type:t.type,id:t.id,args:e,fn:t}}(h,...t);return Object.assign(h,{tag:"fn",type:t,id:e,args:u,deps:l,scope:Object(c.d)(f)})}const f=t=>u("void","main",[],t);function d(t){return{tag:"ret",type:t?t.type:"void",val:t}}const l=(t,e,...n)=>({tag:"call_i",type:e,id:t,args:n})},function(t,e,n){"use strict";function r(t){return Math.floor(Math.random()*t)}function i(t,e){return r(e-t)+t}function a(){return(Math.random()+Math.random()+Math.random())/3}n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return d}));let r=null;const i={};let a=!1,c=0,o=0;function s(t){const e=o?t-o:o;if(o=t,r){for(const t in r)r[t](e);r=null}let n=0;for(const t in i)n++,i[t](e);n?requestAnimationFrame(s):(a=!1,o=0)}function u(t,e){e=e||t.name||c++,r=r||{},r[e]=t,a||(requestAnimationFrame(s),a=!0)}function f(t,e){return e=e||t.name||c++,i[e]=t,a||(requestAnimationFrame(s),a=!0),e}function d(t){"function"==typeof t&&(t=t.name),delete i[t]}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));const r={LEFT:0,MIDDLE:1,RIGHT:2};function i(t,e){const n=e||t,{element:i=document,enableRightButton:a,holdDelay:c=400,holdRadius:o=5}=t,s={pressed:{},drag:{x:0,y:0,dX:0,dY:0,xMax:0,yMax:0},dragging:!1,holding:!1};let u=0,f=0,d=0,l=0,h=null;function b(t){t.isPrimary?(s.pressed[t.button]=t,u=d=t.clientX,f=l=t.clientY,s.dragging=!0,null!=h&&clearTimeout(h),h=setTimeout(()=>{s.drag.xMax<o&&s.drag.yMax<o&&(s.holding=!0,n(s))},c)):s.pressed[r.RIGHT]=t,n(s)}function O(t){s.pressed={},delete s.drag.event,s.drag.x=0,s.drag.y=0,s.drag.dX=0,s.drag.dY=0,s.drag.xMax=0,s.drag.yMax=0,s.dragging=!1,s.holding=!1,null!=h&&clearTimeout(h),h=null,n(s)}function p(t){s.dragging&&(s.drag.event=t,s.drag.x=u-t.clientX,s.drag.y=f-t.clientY,s.drag.dX=d-t.clientX,s.drag.dY=l-t.clientY,s.drag.xMax=Math.max(Math.abs(s.drag.x),s.drag.xMax),s.drag.yMax=Math.max(Math.abs(s.drag.y),s.drag.yMax),d=t.clientX,l=t.clientY,n(s))}function g(t){t.preventDefault()}return i.addEventListener("pointerdown",b),document.addEventListener("pointermove",p),document.addEventListener("pointerup",O),document.addEventListener("pointerleave",O),document.addEventListener("pointercancel",O),a&&i.addEventListener("contextmenu",g),n(s),function(){i.removeEventListener("pointerdown",b),document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",O),document.removeEventListener("pointerleave",O),document.removeEventListener("pointercancel",O),a&&i.removeEventListener("contextmenu",g)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));function r(t,e){if(t===e)return!0;if(!e||!t)return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function i(t,e){if(t===e)return!0;if(!e)return!1;const n=Object.keys(t);if(!r(n,Object.keys(e)))return!1;for(const r of n)if(t[r]!==e[r])return!1;return!0}},function(t,e,n){"use strict";function r(t,...e){return e.reduce((e,n)=>e|t[n.toUpperCase()+"_BUFFER_BIT"],0)}function i(t,e=1){let n=t.width,r=t.height;return"clientWidth"in t&&"clientHeight"in t&&(n=t.clientWidth*e|0,r=t.clientHeight*e|0),(t.width!==n||t.height!==r)&&(t.width=n,t.height=r,!0)}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return f}));var r=n(20),i=n(18),a=n(5),c=n(3);const o=Object(r.a)((function(t,e,n,i){return Object(c.h)(Object(r.a)(t,e),n,i)}),i.b);function s(t,e){return e.map(e=>Object(a.a)(t,e))}function u(t){return function(t){return t.unshift(t.pop()),t}(t.concat())}function f(t){return Object(a.h)(Object(a.b)(Object(a.i)(t[0],t[1]),Object(a.i)(t[2],t[1])))}},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c}));const r=/^[iub]?vec[234]$/,i=/^mat[234]$/,a=t=>r.test(t.type),c=t=>i.test(t.type)},function(t,e,n){"use strict";n.d(e,"g",(function(){return o})),n.d(e,"h",(function(){return s})),n.d(e,"i",(function(){return u})),n.d(e,"k",(function(){return f})),n.d(e,"a",(function(){return g})),n.d(e,"c",(function(){return j})),n.d(e,"d",(function(){return _})),n.d(e,"b",(function(){return m})),n.d(e,"e",(function(){return v})),n.d(e,"f",(function(){return E})),n.d(e,"l",(function(){return w})),n.d(e,"m",(function(){return N})),n.d(e,"n",(function(){return x})),n.d(e,"j",(function(){return I}));var r=n(19),i=n(42),a=n(13);const c=(t,e,n)=>({tag:"lit",type:t,info:n,val:e}),o=t=>c("bool",Object(r.a)(t)?!!t:t),s=t=>c("float",Object(i.a)(t)?1&t:t),u=t=>c("int",Object(i.a)(t)?1&t:Object(r.a)(t)?0|t:t),f=t=>c("uint",Object(i.a)(t)?1&t:Object(r.a)(t)?t>>>0:t),d=(t,e)=>n=>Object(r.a)(n)?e(n):void 0===n||Object(a.b)(n)||n.type===t?n:e(n),l=d("float",s),h=d("int",u),b=d("uint",f),O=d("bool",o),p=(c("bool",!0),c("bool",!1)),g=s(0),j=s(1),_=s(2),m=s(.5),v=u(0),y=(u(1),f(0)),E=(f(1),s(Math.PI),s(2*Math.PI),s(Math.PI/2),s(Math.SQRT2)),M=(t,e)=>n=>[void 0===n[0]?e:t(n[0]),...n.slice(1).map(t)],T=M(l,g),A=(M(h,v),M(b,y),M(O,p),(t,e,n)=>c(t,n=e(n),["n","n"][n.length])),S=(t,e,n)=>c(t,n=e(n),["n","n","vn"][n.length]),R=(t,e,n)=>c(t,n=e(n),2===n.length?Object(a.b)(n[1])?"vv":"vn":["n","n",,"vnn"][n.length]),F=(t,e,n)=>c(t,n=T(n),e[n.length]);function w(...t){return A("vec2",T,t)}function N(...t){return S("vec3",T,t)}function x(...t){return R("vec4",T,t)}function I(...t){return F("mat2",["n","n","vv"],t)}},function(t,e,n){"use strict";n.d(e,"f",(function(){return a})),n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return f})),n.d(e,"e",(function(){return d})),n.d(e,"g",(function(){return l}));var r=n(3),i=n(12);function a(t){return[t[1],t[2]]}function c(t,e){return t.concat(Object(i.c)(e))}function o(t,e){return Object(i.c)(function(t,e){return c(Object(i.d)(t,e),e)}(t,e))}function s(t,e){return c(e,Object(i.d)(t,e))}function u(t,e,[n,r,a,c]){const o=Object(i.a)(t,n,c),s=Object(i.a)(e,r,a);return[[n,r,s,o],[o,s,a,c]]}function f(t,e,[n,r,a,c]){const o=Object(i.a)(t,n,r),s=Object(i.a)(e,c,a);return[[n,o,s,c],[o,r,a,s]]}const d=[[0,2,1],[0,3,2]];function l(t){return Object(r.c)(Object(r.g)(t=>d.map(e=>e.map(e=>4*t+e)),t))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s}));var r=n(2),i=n(4),a=n(9);class c extends class{constructor(t){this.position=[0,0,0],this.rotationX=0,this.rotationY=0,this.rotationXMat=r.a.create(),this.rotationYMat=r.a.create(),this.projectionMat=r.a.create(),this.viewMat=r.a.create(),this.needsUpdateView=!0,Object.assign(this,t),this.updateRotationX(),this.updateRotationY()}updateRotationX(t=0){this.rotationX+=t,r.a.fromXRotation(this.rotationXMat,this.rotationX),this.needsUpdateView=!0}updateRotationY(t=0){this.rotationY+=t,r.a.fromYRotation(this.rotationYMat,this.rotationY),this.needsUpdateView=!0}moveForward(t){const e=r.c.fromValues(this.rotationYMat[8],this.rotationYMat[9],this.rotationYMat[10]);r.c.add(this.position,this.position,r.c.scale(e,e,-t)),this.needsUpdateView=!0}moveLeft(t){const e=r.c.fromValues(this.rotationYMat[0],this.rotationYMat[1],this.rotationYMat[2]);r.c.add(this.position,this.position,r.c.scale(e,e,-t)),this.needsUpdateView=!0}moveUp(t){const e=r.c.fromValues(this.rotationYMat[4],this.rotationYMat[5],this.rotationYMat[6]);r.c.add(this.position,this.position,r.c.scale(e,e,t)),this.needsUpdateView=!0}update(){this.needsUpdateView&&(r.a.fromTranslation(this.viewMat,this.position),r.a.multiply(this.viewMat,this.viewMat,this.rotationYMat),r.a.multiply(this.viewMat,this.viewMat,this.rotationXMat),r.a.invert(this.viewMat,this.viewMat),this.needsUpdateView=!1)}}{constructor(t){super(t),this.fovy=.6*Math.PI,this.aspect=1,this.near=.1,this.far=1e3,this.needsUpdateProjection=!0,Object.assign(this,t),this.update()}update(){super.update(),this.needsUpdateProjection&&(r.a.perspective(this.projectionMat,this.fovy,this.aspect,this.near,this.far),this.needsUpdateProjection=!1)}}function o(t){return class extends t{updatePosFromInput(t,e,n){(e||n)&&(((null==e?void 0:e[i.a.UP])||(null==e?void 0:e[i.a.W])||(null==n?void 0:n.holding)&&!n.pressed[a.a.RIGHT])&&this.moveForward(t),((null==e?void 0:e[i.a.DOWN])||(null==e?void 0:e[i.a.S])||(null==n?void 0:n.pressed[a.a.RIGHT]))&&this.moveForward(-t),((null==e?void 0:e[i.a.LEFT])||(null==e?void 0:e[i.a.A]))&&this.moveLeft(t),((null==e?void 0:e[i.a.RIGHT])||(null==e?void 0:e[i.a.D]))&&this.moveLeft(-t))}}}function s(t){return class extends t{constructor(){super(...arguments),this._oldMouse={x:0,y:0}}updateRotFromPointer(t,e){if(e.dragging){const n=this._oldMouse.x-e.drag.x,r=this._oldMouse.y-e.drag.y;this._oldMouse.x=e.drag.x,this._oldMouse.y=e.drag.y,r&&this.updateRotationX(r*t),n&&this.updateRotationY(n*t)}else this._oldMouse.x&&(this._oldMouse.x=0),this._oldMouse.y&&(this._oldMouse.y=0)}}}},,function(t,e,n){"use strict";function r(t){return t>0?1:t<0?-1:0}function i(t,e,n){return e+t*(n-e)}function a(t,e,n){return Math.max(t,Math.min(n,e))}n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a}));Math.PI},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>"number"==typeof t},function(t,e,n){"use strict";function r(t,...e){return t.bind(null,...e)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return a})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return o}));var r=n(14);const i=t=>t.replace("[]",""),a=(t,e)=>{const n=t.type[0];return"i"===n?Object(r.i)(e):"u"===n?Object(r.k)(e):"b"===n?Object(r.g)(e):Object(r.h)(e)},c=(t,e)=>{const n={vec2:r.l,vec3:r.m,vec4:r.n}[t.type];return n?n(e):e},o=t=>({float:"bool",int:"bool",uint:"bool",vec2:"bvec2",ivec2:"bvec2",uvec2:"bvec2",vec3:"bvec3",ivec3:"bvec3",uvec3:"bvec3",vec4:"bvec4",ivec4:"bvec4",uvec4:"bvec4"}[t.type])},function(t,e,n){"use strict";n.d(e,"e",(function(){return K})),n.d(e,"a",(function(){return Q})),n.d(e,"f",(function(){return Z})),n.d(e,"b",(function(){return tt})),n.d(e,"d",(function(){return et})),n.d(e,"c",(function(){return nt}));const r=Array.isArray;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function i(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c}var a=n(46);Object.getPrototypeOf;const c=Object.getPrototypeOf({}),o="function",s=(t,e)=>{let n;return t===e||(null==t?t==e:typeof t.equiv===o?t.equiv(e):null==e?t==e:typeof e.equiv===o?e.equiv(t):"string"!=typeof t&&"string"!=typeof e&&(n=Object.getPrototypeOf(t),null!=n&&n!==c||(n=Object.getPrototypeOf(e),null!=n&&n!==c)?typeof t!==o&&void 0!==t.length&&typeof e!==o&&void 0!==e.length?u(t,e):t instanceof Set&&e instanceof Set?f(t,e):t instanceof Map&&e instanceof Map?d(t,e):t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():t instanceof RegExp&&e instanceof RegExp?t.toString()===e.toString():t!=t&&e!=e:l(t,e)))},u=(t,e,n=s)=>{let r=t.length;if(r===e.length)for(;--r>=0&&n(t[r],e[r]););return r<0},f=(t,e,n=s)=>t.size===e.size&&n([...t.keys()].sort(),[...e.keys()].sort()),d=(t,e,n=s)=>t.size===e.size&&n([...t].sort(),[...e].sort()),l=(t,e,n=s)=>{if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(!e.hasOwnProperty(r)||!n(t[r],e[r]))return!1;return!0};function h(t,e){for(let n of e)t.delete(n);return t}var b=n(58);const O=(t,e)=>[t[0],t[1],e],p=(t,e)=>null!=t&&"function"==typeof t[e],g=t=>p(t,"xform")?t.xform():t;class j{constructor(t){this.value=t}deref(){return this.value}}const _=t=>t instanceof j,m=t=>t instanceof j?t.deref():t;var v=n(31);const y=Object(v.a)(()=>"illegal arity"),E=t=>2===t.length?[void 0,t[1]]:3===t.length?[t[1],t[2]]:(t=>{throw new y(t)})(t.length);function M(...t){const e=t[0],n=e[0],r=e[1],i=e[2],a=null==(t=E(t))[0]?n():t[0],c=t[1];return m(r(p(c,"$reduce")?c.$reduce(i,a):null!=(o=c)&&"function"!=typeof o&&void 0!==o.length?T(i,a,c):A(i,a,c)));var o}const T=(t,e,n)=>{for(let r=0,i=n.length;r<i;r++)if(e=t(e,n[r]),_(e)){e=e.deref();break}return e},A=(t,e,n)=>{for(let r of n)if(e=t(e,r),_(e)){e=e.deref();break}return e},S=(t,e)=>[t,t=>t,e];function*R(t,e){const n=g(t)([a.a,a.a,(t,e)=>e])[2];for(let t of e){let e=n(a.b,t);if(_(e))return e=m(e.deref()),void(e!==a.b&&(yield e));e!==a.b&&(yield e)}}function F(t,e){return e?R(F(t),e):e=>{const n=e[2];return O(e,(e,r)=>n(e,t(r)))}}const w=Object(b.a)()?n(49).inspect:null,N=(t,e)=>[...F(t=>w(t,e),t)].join(", "),x=(t,e)=>[...F(([t,n])=>`${w(t,e)} => ${w(n,e)}`,t)].join(", "),I=((t,e={})=>{const n=Reflect.ownKeys(t),r=Reflect.ownKeys(e),i=Symbol("isa");function a(e){for(let r of n){const n=Object.getOwnPropertyDescriptor(e.prototype,r);!n||n.configurable?Object.defineProperty(e.prototype,r,{value:t[r],writable:!0}):console.log(`not patching: ${e.name}.${r.toString()}`)}return Object.defineProperty(e.prototype,i,{value:!0}),e}for(let t of r)Object.defineProperty(a,t,{value:e[t],enumerable:e.propertyIsEnumerable(t)});return Object.defineProperty(a,Symbol.hasInstance,{value:t=>!!t[i]}),a})({[Symbol.for("nodejs.util.inspect.custom")](t,e){const n=this[Symbol.toStringTag],r=Object.assign(Object.assign({},e),{depth:null===e.depth?null:e.depth-1});return t>=0?[`${n}(${this.size||0}) {`,w?this instanceof Set?N(this,r):this instanceof Map?x(this,r):"":"","}"].join(" "):e.stylize(`[${n}]`,"special")}}),U=t=>t instanceof Map;function D(t,e){if(U(t))for(let n of e)t.set(n[0],n[1]);else for(let n of e)t.add(n);return t}var L;const P=new WeakMap,z=t=>P.get(t).vals;let B=L=class extends Set{constructor(t,e={}){super(),P.set(this,{equiv:e.equiv||s,vals:[]}),t&&this.into(t)}*[Symbol.iterator](){yield*z(this)}get[Symbol.species](){return L}get[Symbol.toStringTag](){return"ArraySet"}get size(){return z(this).length}copy(){const t=P.get(this),e=new L(null,{equiv:t.equiv});return P.get(e).vals=t.vals.slice(),e}empty(){return new L(null,this.opts())}clear(){z(this).length=0}first(){if(this.size)return z(this)[0]}add(t){return!this.has(t)&&z(this).push(t),this}into(t){return D(this,t)}has(t){return this.get(t,a.b)!==a.b}get(t,e){const n=P.get(this),r=n.equiv,i=n.vals;for(let e=i.length;--e>=0;)if(r(i[e],t))return i[e];return e}delete(t){const e=P.get(this),n=e.equiv,r=e.vals;for(let e=r.length;--e>=0;)if(n(r[e],t))return r.splice(e,1),!0;return!1}disj(t){return h(this,t)}equiv(t){return((t,e)=>{if(t===e)return!0;if(!(e instanceof Set)||t.size!==e.size)return!1;for(let n of t.keys())if(!e.has(n))return!1;return!0})(this,t)}forEach(t,e){const n=z(this);for(let r=n.length;--r>=0;){const i=n[r];t.call(e,i,i,this)}}*entries(){for(let t of z(this))yield[t,t]}*keys(){yield*z(this)}*values(){yield*z(this)}opts(){return{equiv:P.get(this).equiv}}};B=L=i([I],B);var C;const G=new WeakMap,k=t=>G.get(t).map;let X=C=class extends Map{constructor(t,e){super();const n=Object.assign({equiv:s,keys:B},e);G.set(this,{keys:new n.keys(null,{equiv:n.equiv}),map:new Map,opts:n}),t&&this.into(t)}[Symbol.iterator](){return this.entries()}get[Symbol.species](){return C}get[Symbol.toStringTag](){return"EquivMap"}get size(){return G.get(this).keys.size}clear(){const t=G.get(this);t.keys.clear(),t.map.clear()}empty(){return new C(null,G.get(this).opts)}copy(){const t=G.get(this),e=new C;return G.set(e,{keys:t.keys.copy(),map:new Map(t.map),opts:t.opts}),e}equiv(t){return((t,e)=>{if(t===e)return!0;if(!(e instanceof Map)||t.size!==e.size)return!1;for(let n of t.entries())if(!s(e.get(n[0]),n[1]))return!1;return!0})(this,t)}delete(t){const e=G.get(this);return(t=e.keys.get(t,a.b))!==a.b&&(e.map.delete(t),e.keys.delete(t),!0)}dissoc(t){return h(this,t)}forEach(t,e){for(let n of k(this))t.call(e,n[1],n[0],this)}get(t,e){const n=G.get(this);return(t=n.keys.get(t,a.b))!==a.b?n.map.get(t):e}has(t){return G.get(this).keys.has(t)}set(t,e){const n=G.get(this),r=n.keys.get(t,a.b);return r!==a.b?n.map.set(r,e):(n.keys.add(t),n.map.set(t,e)),this}into(t){return D(this,t)}entries(){return k(this).entries()}keys(){return k(this).keys()}values(){return k(this).values()}opts(){return G.get(this).opts}};X=C=i([I],X);const V=(t,e,n)=>{if(t.size<e.size){const n=t;t=e,e=n}var r,i;return n=n?D(n,t):(r=t,i=Set,p(r,"copy")?r.copy():new(r[Symbol.species]||i)(r)),t===e?n:D(n,e)};var $=n(48);function Y(t,e){return e?R(Y(t),e):e=>{const n=e[2];return O(e,(e,r)=>t(r)?n(e,r):e)}}class q{constructor(t){if(this.dependencies=new X,this.dependents=new X,t)for(let[e,n]of t)this.addDependency(e,n)}*[Symbol.iterator](){yield*this.sort()}get[Symbol.species](){return q}copy(){const t=new q;for(let e of this.dependencies)t.dependencies.set(e[0],e[1].copy());for(let e of this.dependents)t.dependents.set(e[0],e[1].copy());return t}addNode(t){return!this.dependencies.has(t)&&this.dependencies.set(t,new B),this}addDependency(t,e){(s(t,e)||this.depends(e,t))&&Object($.a)(`Circular dependency between: ${t} & ${e}`);let n=this.dependencies.get(t);return this.dependencies.set(t,n?n.add(e):new B([e])),n=this.dependents.get(e),this.dependents.set(e,n?n.add(t):new B([t])),this}addDependencies(t,e){for(let n of e)this.addDependency(t,n)}removeEdge(t,e){let n=this.dependencies.get(t);return n&&n.delete(e),n=this.dependents.get(e),n&&n.delete(t),this}removeNode(t){return this.dependencies.delete(t),this}depends(t,e){return this.transitiveDependencies(t).has(e)}dependent(t,e){return this.transitiveDependents(t).has(e)}immediateDependencies(t){return this.dependencies.get(t)||new B}immediateDependents(t){return this.dependents.get(t)||new B}isLeaf(t){return 0===this.immediateDependents(t).size}isRoot(t){return 0===this.immediateDependencies(t).size}nodes(){return V(new B(this.dependencies.keys()),new B(this.dependents.keys()))}leaves(){return Y(t=>this.isLeaf(t),this.nodes())}roots(){return Y(t=>this.isRoot(t),this.nodes())}transitiveDependencies(t){return H(this.dependencies,t)}transitiveDependents(t){return H(this.dependents,t)}sort(){const t=[],e=this.copy();let n=new B(e.leaves());for(;;){if(!n.size)return t.reverse();const r=n.first();n.delete(r);for(let t of[...e.immediateDependencies(r)])e.removeEdge(r,t),e.isLeaf(t)&&n.add(t);t.push(r),e.removeNode(r)}}}const H=(t,e)=>{const n=t.get(e);return n?M(S(null,(e,n)=>V(e,H(t,n))),n,n):new B};var W=n(13);const K=t=>"fn"===t.tag||"for"===t.tag||"while"==t.tag?t.scope.body:"if"===t.tag?t.f?t.t.body.concat(t.f.body):t.t.body:void 0,Q=t=>K(t)||("scope"===t.tag?t.body:"ternary"===t.tag?[t.t,t.f]:"ret"===t.tag?[t.val]:"call"===t.tag||"call_i"===t.tag?t.args:"sym"===t.tag&&t.init?[t.init]:"decl"===t.tag?[t.id]:"op1"===t.tag||"swizzle"===t.tag?[t.val]:"op2"===t.tag?[t.l,t.r]:"assign"===t.tag?[t.r]:Object(W.b)(t)||Object(W.a)(t)?t.val:void 0),Z=(t,e,n,i,a=!0)=>{if(r(i))i.forEach(r=>n=Z(t,e,n,r,a));else{a&&(n=t(n,i));const r=e(i);r&&(n=Z(t,e,n,r,a)),!a&&(n=t(n,i))}return n},J=(t,e=new q)=>t.deps&&t.deps.length?t.deps.reduce((e,n)=>J(n,e.addDependency(t,n)),e):e.addNode(t),tt=t=>({tag:"decl",type:t.type,id:t}),et=(t,e=!1)=>({tag:"scope",type:"void",body:t.filter(t=>null!=t).map(t=>"sym"===t.tag?tt(t):t),global:e}),nt=t=>{const e=t.filter(t=>"fn"!==t.tag),n=t.reduce((t,e)=>"fn"===e.tag?J(e,t):t,new q);return et(e.concat(n.sort()),!0)}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(1),i=n(16);class a{constructor(){this.moveSpeed=2,this.lookSpeed=2,this.camera=new(Object(i.b)(Object(i.c)(i.a)))({fovy:.3*Math.PI,position:[0,0,5]})}}function c({lookSpeed:t,moveSpeed:e,position:n,rotationY:i,rotationX:c,fovy:o}={}){const s=new a;t&&(s.lookSpeed=t),e&&(s.moveSpeed=e),o&&(s.camera.fovy=o,s.camera.needsUpdateProjection=!0),n&&(s.camera.position=n,s.camera.needsUpdateView=!0),c&&(s.camera.rotationX=c,s.camera.updateRotationX()),i&&(s.camera.rotationY=i,s.camera.updateRotationY()),Object(r.m)("viewPort",s,{reset:{moveSpeed:!0,lookSpeed:!0}})}Object(r.a)("viewPort",(t,e)=>{const n=e.viewPort;switch(t){case r.b.FRAME:const t=e.device,i=t.tpf/1e3;n.camera.updatePosFromInput(n.moveSpeed*i,e.device.keys,e.device.pointer);const a=t.pointer,c={dragging:a.dragging,drag:{x:t.sizeMultiplier*a.drag.x/t.canvas.width,y:t.sizeMultiplier*a.drag.y/t.canvas.height}};return n.camera.updateRotFromPointer(n.lookSpeed,c),void n.camera.update();case r.b.RESIZE:n.camera.aspect=e.device.canvas.width/e.device.canvas.height,n.camera.needsUpdateProjection=!0}})},,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(3),i=n(0);function a(t){const e={drawType:"TRIANGLES",attribs:{},itemCount:0};for(const n in t){const a=t[n];if("cells"===n){const t=new(a.length>65535?Uint32Array:Uint16Array)(Object(r.c)(a));Object.assign(e,{elements:{buffer:t},itemCount:t.length})}else"positions"===n?e.attribs[i.b]={buffer:new Float32Array(Object(r.c)(a))}:"normals"===n?e.attribs[i.a]={buffer:new Float32Array(Object(r.c)(a))}:"uvs"===n?e.attribs[i.c]={buffer:new Float32Array(Object(r.c)(a))}:e.attribs[n]={buffer:new Float32Array(Object(r.c)(a))}}return e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(t,e=(t=>void 0!==t?": "+t:""))=>class extends Error{constructor(n){super(t(n)+e(n))}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=0;const i=()=>`_s${(r++).toString(36)}`},function(t,e,n){"use strict";n.d(e,"b",(function(){return y})),n.d(e,"a",(function(){return E}));var r=n(42),i=n(19),a=n(31);const c=Object(a.a)(()=>"unsupported operation"),o=t=>{throw new c(t)};var s,u=n(21);!function(t){t[t.FINE=0]="FINE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.SEVERE=4]="SEVERE",t[t.NONE=5]="NONE"}(s||(s={}));const f=Object.freeze({level:s.NONE,fine(){},debug(){},info(){},warn(){},severe(){}});const d=Symbol();let l=f;const h=(t,e,n)=>{const r=e[n];if(r)for(let n of r){let r=t[n]||h(t,e,n);if(r)return r}},b=(t,e,n)=>{const r=e[n];if(r)for(let n of r)t.push(n),b(t,e,n);return t},O=t=>{const e={};for(let n in t){const r=t[n];e[n]=r instanceof Set?r:new Set(r)}return e},p=t=>{const e=function(t,e){const n={},r=e?O(e):{},i=(...e)=>{const i=t(...e),a=n[i]||h(n,r,i)||n[d];return a?a(...e):o(`missing implementation for: "${i.toString()}"`)};return i.add=(t,e)=>(n[t]&&l.warn(`overwriting '${t.toString()}' impl`),n[t]=e,!0),i.addAll=t=>{let e=!0;for(let n in t)e=i.add(n,t[n])&&e;return e},i.remove=t=>!!n[t]&&(delete n[t],!0),i.callable=(...e)=>{const i=t(...e);return!!(n[i]||h(n,r,i)||n[d])},i.isa=(t,e)=>{let n=r[t];!n&&(r[t]=n=new Set),n.add(e)},i.impls=()=>{const t=new Set(Object.keys(n));for(let e in r)h(n,r,e)&&t.add(e);return n[d]&&t.add(d),t},i.rels=()=>r,i.parents=t=>r[t],i.ancestors=t=>new Set(b([],r,t)),i}(t=>t.tag);return e.add(d,t=>o(`no impl for AST node type: '${t.tag}'`)),e.addAll(t),e};var g,j=n(13),_=n(45);!function(t){t.GLES_100="100",t.GLES_300="300 es"}(g||(g={}));const m=/[};]$/,v=t=>{const e=Object.assign({type:"fs",version:g.GLES_300,versionPragma:!0,prelude:""},t),n="vs"===e.type,a=(t,e=", ")=>t.map(f).join(e),c=t=>`${t.id}(${a(t.args)})`,s=(t,r=!1)=>{const{id:i,type:a,opts:c,init:s}=t,d=[];if(c.type){let t;e.version<g.GLES_300?n?t={in:"attribute",out:"varying",uni:"uniform"}[c.type]:(t={in:"varying",out:null,uni:"uniform"}[c.type],!t&&o("GLSL 100 doesn't support fragment shader output variables")):(null!=c.loc&&d.push(`layout(location=${c.loc}) `),t="uni"===c.type?"uniform":c.type),d.push(t+" ")}else c.const&&d.push("const "),r&&c.q&&d.push(c.q+" ");return c.prec&&d.push(c.prec+" "),d.push(Object(u.a)(a)," ",i),c.num&&d.push(`[${c.num}]`),s&&d.push(" = ",f(s)),d.join("")},f=p({arg:t=>s(t,!0),array_init:t=>e.version>=g.GLES_300?`${t.type}(${a(t.init)})`:o(`array initializers not available in GLSL ${e.version}`),assign:t=>f(t.l)+" = "+f(t.r),ctrl:t=>t.id,call:c,call_i:t=>"texture"===t.id&&e.version<g.GLES_300?`${t.id}${t.args[0].type.substr(7)}(${a(t.args)})`:c(t),decl:t=>s(t.id),fn:t=>`${t.type} ${t.id}(${a(t.args)}) ${f(t.scope)}`,for:t=>`for(${t.init?f(t.init):""}; ${f(t.test)}; ${t.iter?f(t.iter):""}) ${f(t.scope)}`,idx:t=>`${f(t.val)}[${f(t.id)}]`,if:t=>{const e=`if (${f(t.test)}) `+f(t.t);return t.f?e+" else "+f(t.f):e},lit:t=>{const e=t.val;switch(t.type){case"bool":return Object(r.a)(e)?String(e):`bool(${f(e)})`;case"float":return Object(i.a)(e)?e===Math.trunc(e)?e+".0":String(e):`float(${f(e)})`;case"int":case"uint":return Object(i.a)(e)?String(e):`${t.type}(${f(e)})`;default:return Object(j.b)(t)||Object(j.a)(t)?`${t.type}(${a(e)})`:o(`unknown type: ${t.type}`)}},op1:t=>t.post?`(${f(t.val)}${t.op})`:`(${t.op}${f(t.val)})`,op2:t=>`(${f(t.l)} ${t.op} ${f(t.r)})`,ret:t=>"return"+(t.val?" "+f(t.val):""),scope:t=>{let n=t.body.map(f).reduce((t,e)=>(t.push(m.test(e)?e:e+";"),t),[]).join("\n");return n+=t.body.length&&!m.test(n)?";":"",t.global?(e.prelude&&(n=e.prelude+"\n"+n),e.versionPragma&&(n=`#version ${e.version}\n`+n),n):`{\n${n}\n}`},swizzle:t=>`${f(t.val)}.${t.id}`,sym:t=>t.id,ternary:t=>`(${f(t.test)} ? ${f(t.t)} : ${f(t.f)})`,while:t=>`while (${f(t.test)}) ${f(t.scope)}`});return Object.assign(f,{gl_FragColor:Object(_.c)("vec4","gl_FragColor"),gl_FragCoord:Object(_.c)("vec4","gl_FragCoord",{const:!0}),gl_FragData:Object(_.c)("vec4[]","gl_FragData",{num:1}),gl_FrontFacing:Object(_.c)("bool","gl_FrontFacing",{const:!0}),gl_PointCoord:Object(_.c)("vec2","gl_PointCoord",{const:!0}),gl_PointSize:Object(_.c)("float","gl_PointSize"),gl_Position:Object(_.c)("vec4","gl_Position")}),f},y=()=>v({version:g.GLES_100,type:"vs"}),E=(t="precision mediump float;")=>v({version:g.GLES_100,type:"fs",prelude:t})},,function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>"string"==typeof t},,function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(1);function i(t,e,{strength:n,size:i,layerOpts:a,startFrame:c,strengthOffset:o=0,blurRatioVertical:s=1,scaleFactor:u=.6}){const f=[];for(;n>=1/s;)f.push({strength:n,direction:0,source:"0"}),f.push({strength:n*s,direction:1,source:"0"}),n*=u;return c&&(f[0].source=()=>c.image()),Object(r.e)(t,e).update(Object.assign(Object.assign({},a),{frag:"precision mediump float;\n#define GLSLIFY 1\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nuniform sampler2D source;\nuniform vec2 size;\nuniform float direction;\nuniform float strength;\nuniform float strengthOffset;\n\nvarying vec2 coords;\n\nvoid main() {\n\tvec2 uv = coords;\n\tvec4 refl = texture2D(source, uv);\n\tfloat dist = refl.a * strength + strengthOffset;\n\n\tif (direction == 0.0) {\n\t\tgl_FragColor = blur9(source, uv, size, vec2(dist, 0));\n\t} else {\n\t\tgl_FragColor = blur9(source, uv, size, vec2(0, dist));\n\t}\n}\n",drawSettings:{disable:[t.gl.DEPTH_TEST]},uniforms:f.map(e=>Object.assign(Object.assign({},e),{blurRatioVertical:s,strengthOffset:o,size:i||(()=>[t.gl.canvas.width,t.gl.canvas.height])}))}))}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return i}));var r=n(46);const i=void 0===t||"1"===t.env.UMBRELLA_ASSERTS?(t,e="assertion failed")=>{if("function"==typeof t&&!t()||!t)throw new Error("function"==typeof e?e():e)}:r.a}).call(this,n(43))},,function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return h}));var r=n(20),i=n(15),a=n(3),c=n(30);const o=Object(r.a)(i.b,.5,.5),s=Object(r.a)(i.a,.5,.5);function u(t=1,e){for(let n=0;n<t;n++)e=Object(a.c)(e.map(t=>Object(a.c)(o(t).map(s))));return e}const f=[[0,0],[1,0],[1,1],[0,1]];function d(t,e,n){const r=u(n,[t]),o=Object(a.c)(r);return Object(c.a)({position:o,normal:o.map(()=>e),uv:Object(a.c)(u(n,[f])),cells:Object(i.g)(r.length)})}function l(t,e){const n=Object(i.c)([0,2*-t,0],[[-t,t,0],[t,t,0]]),r=d(n,[0,0,-1],e);return console.log(r,n),r}function h(t,e){return d(Object(i.c)([0,0,2*-t],[[-t,0,t],[t,0,t]]),[0,1,0],e)}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>"boolean"==typeof t},function(t,e){var n,r,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function o(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{r="function"==typeof clearTimeout?clearTimeout:c}catch(t){r=c}}();var s,u=[],f=!1,d=-1;function l(){f&&s&&(f=!1,s.length?u=s.concat(u):d=-1,u.length&&h())}function h(){if(!f){var t=o(l);f=!0;for(var e=u.length;e;){for(s=u,u=[];++d<e;)s&&s[d].run();d=-1,e=u.length}s=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===c||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function b(t,e){this.fun=t,this.array=e}function O(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new b(t,e)),1!==u.length||f||o(h)},b.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=O,i.addListener=O,i.once=O,i.off=O,i.removeListener=O,i.removeAllListeners=O,i.emit=O,i.prependListener=O,i.prependOnceListener=O,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},,function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return u}));n(38);var r=n(35),i=n(48),a=n(32);function c(t,...e){let n,c,o;switch(e.length){case 0:Object(r.a)(t)||(o=t,t=o.type);break;case 1:Object(r.a)(e[0])?n=e[0]:e[0].tag?o=e[0]:c=e[0];break;case 2:Object(r.a)(e[0])?[n,c]=e:[c,o]=e;break;case 3:[n,c,o]=e;break;default:Object(i.a)()}return{tag:"sym",type:t,id:n||Object(a.a)(),opts:c||{},init:o}}const o=(t,e,n)=>c(t,e,Object.assign({q:"in",type:"in"},n)),s=(t,e,n)=>c(t,e,Object.assign({q:"out",type:"out"},n)),u=(t,e,n)=>c(t,e,Object.assign({q:"in",type:"uni"},n))},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}));const r=Symbol(),i=()=>{}},function(t,e,n){"use strict";n.d(e,"a",(function(){return G}));var r=n(1),i=n(2),a=n(37),c=n(40),o=n(33),s=n(22),u=n(45),f=n(6),d=n(59),l=n(60),h=n(14),b=n(61),O=n(62),p=n(63);const g=Object(o.a)(),j=Object(o.b)();let _,m,v,y,E,M,T,A,S;const R=j(Object(s.c)([y=Object(u.a)("vec3","position"),E=Object(u.a)("vec3","normal"),M=Object(u.a)("vec2","uv"),T=Object(u.d)("mat4","transform"),A=Object(u.d)("mat4","projection"),S=Object(u.d)("mat4","view"),_=Object(u.b)("vec3","vNormal"),m=Object(u.b)("vec3","vPos"),v=Object(u.b)("vec2","vUv"),Object(f.b)(()=>[Object(d.a)(_,E),Object(d.a)(v,M),Object(d.a)(m,y),Object(d.a)(j.gl_Position,Object(l.g)(Object(l.g)(Object(l.g)(A,S),T),Object(h.n)(y,1)))])]));let F,w,N,x;const I=Object(f.c)("vec4","groundColor",["vec4","float","vec2"],(t,e,n)=>[F=Object(u.c)(Object(h.m)(Object(b.g)(Object(b.e)(Object(h.h)(0),Object(l.i)(1,Object(l.b)(e,90))),Object(h.h)(.8)),Object(b.g)(Object(b.e)(Object(h.h)(0),Object(l.i)(1,Object(l.b)(e,95))),Object(h.h)(.8)),Object(b.g)(Object(b.e)(Object(h.h)(0),Object(l.i)(1,Object(l.b)(e,100))),Object(h.h)(.8)))),w=Object(u.c)(Object(l.g)(Object(b.c)(Object(l.g)(n,40)),.02)),N=Object(u.c)(Object(l.g)(Object(b.b)(Object(l.a)(Object(b.c)(Object(l.g)(n,40)),.03)),.04)),x=Object(u.c)(Object(b.e)(Object(O.c)(N),Object(O.f)(N))),Object(f.d)(Object(h.n)(Object(l.g)(Object(l.b)(Object(l.a)(Object(l.g)(Object(O.e)(t),Object(l.i)(Object(l.i)(1,Object(l.g)(x,2)),Object(l.g)(Object(O.b)(t),.7))),Object(l.i)(Object(h.m)(Object(l.a)(.5,Object(l.a)(Object(O.c)(w),Object(O.f)(w)))),Object(h.m)(x,x,Object(l.b)(x,2)))),1.6),F),1))]);let U,D,L,P,z;const B=(t=I)=>g(Object(s.c)([U=Object(u.d)("sampler2D","reflection"),D=Object(u.d)("float","reflectionStrength"),L=Object(u.d)("vec2","size"),_=Object(u.a)("vec3","vNormal"),m=Object(u.a)("vec3","vPos"),v=Object(u.a)("vec2","vUv"),Object(f.b)(()=>[P=Object(u.c)(Object(p.a)(U,Object(l.b)(Object(O.d)(g.gl_FragCoord),L))),Object(d.a)(P,Object(l.g)(P,D)),z=Object(u.c)(Object(b.d)(Object(O.a)(m,"xz"))),Object(d.a)(g.gl_FragColor,t(P,z,v))])]));const C="mirror-scene-ground";function G(t,e,n,o={}){const{width:s,height:u,scale:f=1,renderWithDistanceAlphaUniformName:d="withDistance",groundShaderColorFn:l,blurStrengh:h=20,blurRatioVertical:b=2,blurStrenghOffset:O=.3,reflectionStrength:p=1}=o,g=Object(r.f)(t,C).update(Object(c.b)(100,3)),j=i.a.create();i.a.scale(j,j,[f,f,f]);const _=i.a.create(),m=i.a.fromValues(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1),v=Object(r.j)(t,C).update({vert:R,frag:B(l)}),y=Object(r.k)(t,C).update({form:g,shade:v,uniforms:{transform:j,reflection:"0",size:()=>[s||t.canvas.width,u||t.canvas.height],reflectionStrength:p}}),E=Object(r.h)(t,C).update({sketches:n,uniforms:{view:()=>i.a.multiply(_,e.viewPort.camera.viewMat,m),projection:()=>e.viewPort.camera.projectionMat,[d]:1},drawSettings:{clearBits:t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT}}),M=Object(r.h)(t,"scene").update({sketches:[y].concat(n),uniforms:{view:()=>e.viewPort.camera.viewMat,projection:()=>e.viewPort.camera.projectionMat,[d]:0},drawSettings:{clearBits:t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT}}),T=Object(a.a)(t,"blur",{strength:h,strengthOffset:O,blurRatioVertical:b}),A=Object(r.g)(t,"main").update({layers:[E,T,M],width:s,height:u});return s||u||Object(r.a)(C,(t,e)=>{t===r.b.RESIZE&&A.update()}),A}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(31);const i=Object(r.a)(()=>"illegal argument(s)"),a=t=>{throw new i(t)}},function(t,e){},,,,,,,,,function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return r}));const r=()=>"object"==typeof t&&"object"==typeof t.versions&&void 0!==t.versions.node}).call(this,n(43))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(38);const i=(t,e)=>(Object(r.a)("swizzle"!==t.tag||"sym"===t.val.tag,"can't assign to non-symbol swizzle"),{tag:"assign",type:t.type,l:t,r:e})},function(t,e,n){"use strict";n.d(e,"d",(function(){return f})),n.d(e,"a",(function(){return d})),n.d(e,"i",(function(){return l})),n.d(e,"g",(function(){return h})),n.d(e,"b",(function(){return b})),n.d(e,"f",(function(){return O})),n.d(e,"h",(function(){return g})),n.d(e,"e",(function(){return j})),n.d(e,"c",(function(){return _}));var r=n(19),i=n(13),a=n(21),c=n(14);const o=(t,e,n=!1)=>({tag:"op1",type:e.type,op:t,val:e,post:n}),s={mave:"mv",vema:"vm",vefl:"vn",mafl:"vn",flve:"nv",flma:"nv",ivin:"vn",iniv:"nv",uvui:"vn",uiuv:"nv"},u=(t,e,n,o,u)=>{const f=Object(r.a)(e),d=Object(r.a)(n);let l,h,b;return f?d?(h=Object(c.h)(e),b=Object(c.h)(n),l="float"):(b=n,h=Object(a.d)(b,e),l=b.type):d?(h=e,b=Object(a.d)(h,n),l=h.type):(h=e,b=n,l=o||(Object(i.b)(h)?h.type:Object(i.b)(b)||Object(i.a)(b)?b.type:h.type)),{tag:"op2",type:o||l,info:u||s[h.type.substr(0,2)+b.type.substr(0,2)],op:t,l:h,r:b}},f=t=>o("++",t,!0);function d(t,e){return u("+",t,e)}function l(t,e){return u("-",t,e)}function h(t,e){return u("*",t,e,!Object(r.a)(t)&&!Object(r.a)(e)&&Object(i.a)(t)&&Object(i.b)(e)?e.type:void 0)}function b(t,e){return u("/",t,e)}const O=(t,e,n)=>d(h(t,e),n),p=t=>(e,n)=>u(t,e,n,"bool"),g=(p("=="),p("!=")),j=(p("<"),p("<=")),_=p(">");p(">=")},function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"e",(function(){return u})),n.d(e,"i",(function(){return f})),n.d(e,"h",(function(){return d})),n.d(e,"g",(function(){return l})),n.d(e,"j",(function(){return h})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return O})),n.d(e,"f",(function(){return p}));var r=n(6);n(21);const i=t=>e=>Object(r.a)(t,e.type,e),a=t=>(e,n)=>Object(r.a)(t,e.type,e,n),c=t=>(e,n,i)=>Object(r.a)(t,e.type,e,n,i),o=t=>Object(r.a)("length","float",t),s=(t,e)=>Object(r.a)("dot","float",t,e),u=(a("min"),a("max")),f=(c("clamp"),a("step"),c("smoothstep")),d=(i("radians"),i("degrees"),i("cos"),i("sin"));i("tan"),i("acos"),i("asin");const l=a("pow"),h=(i("exp"),i("log"),i("exp2"),i("log2"),i("sqrt")),b=(i("inversesqrt"),i("abs"),i("sign"),i("floor")),O=(i("ceil"),i("fract"));function p(t,e,n){const i=Object(r.a)("mix",t.type,t,e,n);return"float"===n.type&&(i.info="n"),i}},function(t,e,n){"use strict";function r(t,e){const n=t.type[0],r=(t,n)=>1===e.length?t:n+e.length;return{tag:"swizzle",type:"i"===n?r("int","ivec"):"u"===n?r("uint","uvec"):"b"===n?r("bool","bvec"):r("float","vec"),val:t,id:e}}n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"f",(function(){return a})),n.d(e,"g",(function(){return c})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return u}));const i=t=>r(t,"x"),a=t=>r(t,"y"),c=t=>r(t,"z"),o=t=>r(t,"w");function s(t){return r(t,"xy")}function u(t){return r(t,"xyz")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(48),i=n(13),a=n(6),c=n(14);const o=t=>{const e=t.type[0],n=t.type.indexOf("Shadow")>0;return"s"===e?n?"float":"vec4":"i"===e?n?"int":"ivec4":"u"===e?n?"uint":"uvec4":Object(r.a)(`unknown sampler type ${t.type}`)},s=(t,e,n,r)=>{const s=Object(a.a)(t,o(e),e,n,r||c.a);return!Object(i.b)(s)&&(s.info="n"),s};function u(t,e,n){return s("texture",t,e,n)}},,,,,,function(t,e,n){t.exports=n(73)},,,,function(t,e,n){"use strict";n.r(e);var r=n(1);const i=document.getElementById("canvas"),a=Object(r.i)(i),c=(a.gl,Object(r.l)()),o=Object.assign({},r.b);var s=n(8),u=n(22),f=n(45),d=n(6),l=n(62),h=n(60),b=n(14),O=n(59),p=n(63);const g=(t,e,n)=>({tag:"ternary",type:e.type,test:t,t:e,f:n});function j(...t){const[e,n,r,i]=2===t.length?[,t[0],,t[1]]:3===t.length?[t[0],t[1],,t[2]]:t;return{tag:"for",type:"void",init:e?Object(u.b)(e):void 0,test:n(e),iter:r?r(e):void 0,scope:Object(u.d)(i(e))}}const _=t=>({tag:"ctrl",type:"void",id:t});_("break"),_("continue"),_("discard");var m=n(61);Object(d.c)("float","fitNorm1",["float","float","float"],(t,e,n)=>[Object(d.d)(g(Object(h.h)(e,n),Object(h.b)(Object(h.i)(t,e),Object(h.i)(n,e)),b.a))]);const v=t=>Object(h.a)(Object(h.g)(t,b.b),b.b),y=t=>Object(h.i)(Object(h.g)(t,b.d),b.c),E=Object(d.c)("vec2","aspectCorrectedUV",["vec2","vec2"],(t,e)=>{let n;return[n=Object(f.c)("vec2",y(Object(h.b)(t,e))),Object(O.a)(Object(l.c)(n),Object(h.g)(Object(l.c)(n),Object(h.b)(Object(l.c)(e),Object(l.f)(e)))),Object(d.d)(n)]}),M=(Object(d.c)("vec2","hash2",["vec2"],t=>[Object(d.d)(Object(m.c)(Object(h.g)(Object(m.h)(Object(h.g)(t,Object(b.j)(127.1,311.7,269.5,183.3))),43758.5453)))]),Object(d.c)("vec3","hash3",["vec2"],t=>[Object(d.d)(Object(m.c)(Object(h.g)(Object(m.h)(Object(b.m)(Object(m.a)(t,Object(b.l)(127.1,311.7)),Object(m.a)(t,Object(b.l)(269.5,183.3)),Object(m.a)(t,Object(b.l)(419.2,371.9)))),43758.5453)))]),Object(b.m)(.1031,.103,.0973)),T=Object(b.n)(.1031,.103,.0973,.1099),A=(Object(d.c)("float","hash11",["float"],t=>{let e;return[e=Object(f.c)(Object(m.c)(Object(h.g)(t,.1031))),Object(O.a)(e,Object(h.g)(e,Object(h.a)(e,19.19))),Object(O.a)(e,Object(h.g)(e,Object(h.a)(e,e))),Object(d.d)(Object(m.c)(e))]}),Object(d.c)("float","hash12",["vec2"],t=>{let e;return[e=Object(f.c)(Object(m.c)(Object(h.g)(Object(l.a)(t,"xyx"),.1031))),Object(O.a)(e,Object(h.a)(e,Object(m.a)(e,Object(h.a)(Object(l.a)(e,"yzx"),19.19)))),Object(d.d)(Object(m.c)(Object(h.g)(Object(h.a)(Object(l.c)(e),Object(l.f)(e)),Object(l.g)(e))))]}),Object(d.c)("float","hash13",["vec3"],t=>{let e;return[e=Object(f.c)(Object(m.c)(Object(h.g)(Object(l.a)(t,"xyx"),.1031))),Object(O.a)(e,Object(h.a)(e,Object(m.a)(e,Object(h.a)(Object(l.a)(e,"yzx"),19.19)))),Object(d.d)(Object(m.c)(Object(h.g)(Object(h.a)(Object(l.c)(e),Object(l.f)(e)),Object(l.g)(e))))]}),Object(d.c)("vec2","hash21",["float"],t=>{let e;return[e=Object(f.c)(Object(m.c)(Object(h.g)(Object(b.m)(t),M))),Object(O.a)(e,Object(h.a)(e,Object(m.a)(e,Object(h.a)(Object(l.a)(e,"yzx"),19.19)))),Object(d.d)(Object(m.c)(Object(h.g)(Object(h.a)(Object(l.a)(e,"xx"),Object(l.a)(e,"yz")),Object(l.a)(e,"zy"))))]}),Object(d.c)("vec2","hash22",["vec2"],t=>{let e;return[e=Object(f.c)(Object(m.c)(Object(h.g)(Object(l.a)(t,"xyx"),M))),Object(O.a)(e,Object(h.a)(e,Object(m.a)(e,Object(h.a)(Object(l.a)(e,"yzx"),19.19)))),Object(d.d)(Object(m.c)(Object(h.g)(Object(h.a)(Object(l.a)(e,"xx"),Object(l.a)(e,"yz")),Object(l.a)(e,"zy"))))]}),Object(d.c)("vec2","hash23",["vec3"],t=>{let e;return[e=Object(f.c)(Object(m.c)(Object(h.g)(t,M))),Object(O.a)(e,Object(h.a)(e,Object(m.a)(e,Object(h.a)(Object(l.a)(e,"yzx"),19.19)))),Object(d.d)(Object(m.c)(Object(h.g)(Object(h.a)(Object(l.a)(e,"xx"),Object(l.a)(e,"yz")),Object(l.a)(e,"zy"))))]}),Object(d.c)("vec3","hash31",["float"],t=>{let e;return[e=Object(f.c)(Object(m.c)(Object(h.g)(t,M))),Object(O.a)(e,Object(h.a)(e,Object(m.a)(e,Object(h.a)(Object(l.a)(e,"yzx"),19.19)))),Object(d.d)(Object(m.c)(Object(h.g)(Object(h.a)(Object(l.a)(e,"xxy"),Object(l.a)(e,"yzz")),Object(l.a)(e,"zyx"))))]}),Object(d.c)("vec3","hash32",["vec2"],t=>{let e;return[e=Object(f.c)(Object(m.c)(Object(h.g)(Object(l.a)(t,"xyx"),M))),Object(O.a)(e,Object(h.a)(e,Object(m.a)(e,Object(h.a)(Object(l.a)(e,"yzx"),19.19)))),Object(d.d)(Object(m.c)(Object(h.g)(Object(h.a)(Object(l.a)(e,"xxy"),Object(l.a)(e,"yzz")),Object(l.a)(e,"zyx"))))]})),S=(Object(d.c)("vec3","hash33",["vec3"],t=>{let e;return[e=Object(f.c)(Object(m.c)(Object(h.g)(t,M))),Object(O.a)(e,Object(h.a)(e,Object(m.a)(e,Object(h.a)(Object(l.a)(e,"yzx"),19.19)))),Object(d.d)(Object(m.c)(Object(h.g)(Object(h.a)(Object(l.a)(e,"xxy"),Object(l.a)(e,"yzz")),Object(l.a)(e,"zyx"))))]}),Object(d.c)("vec4","hash41",["float"],t=>{let e;return[e=Object(f.c)(Object(m.c)(Object(h.g)(t,T))),Object(O.a)(e,Object(h.a)(e,Object(m.a)(e,Object(h.a)(Object(l.a)(e,"wzxy"),19.19)))),Object(d.d)(Object(m.c)(Object(h.g)(Object(h.a)(Object(l.a)(e,"xxyz"),Object(l.a)(e,"yzzw")),Object(l.a)(e,"zywx"))))]}),Object(d.c)("vec4","hash42",["vec2"],t=>{let e;return[e=Object(f.c)(Object(m.c)(Object(h.g)(Object(l.a)(t,"xyxy"),T))),Object(O.a)(e,Object(h.a)(e,Object(m.a)(e,Object(h.a)(Object(l.a)(e,"wzxy"),19.19)))),Object(d.d)(Object(m.c)(Object(h.g)(Object(h.a)(Object(l.a)(e,"xxyz"),Object(l.a)(e,"yzzw")),Object(l.a)(e,"zywx"))))]}),Object(d.c)("vec4","hash43",["vec3"],t=>{let e;return[e=Object(f.c)(Object(m.c)(Object(h.g)(Object(l.a)(t,"xyzx"),T))),Object(O.a)(e,Object(h.a)(e,Object(m.a)(e,Object(h.a)(Object(l.a)(e,"wzxy"),19.19)))),Object(d.d)(Object(m.c)(Object(h.g)(Object(h.a)(Object(l.a)(e,"xxyz"),Object(l.a)(e,"yzzw")),Object(l.a)(e,"zywx"))))]}),Object(d.c)("vec4","hash44",["vec4"],t=>{let e;return[e=Object(f.c)(Object(m.c)(Object(h.g)(t,T))),Object(O.a)(e,Object(h.a)(e,Object(m.a)(e,Object(h.a)(Object(l.a)(e,"wzxy"),19.19)))),Object(d.d)(Object(m.c)(Object(h.g)(Object(h.a)(Object(l.a)(e,"xxyz"),Object(l.a)(e,"yzzw")),Object(l.a)(e,"zywx"))))]}),Object(d.c)("float","voronoise2",["vec2","float","float"],(t,e,n)=>{let r,i,a,c,o,s,u,p,g,_;return[r=Object(f.c)(Object(m.b)(t)),i=Object(f.c)(Object(m.c)(t)),a=Object(f.c)(Object(b.m)(e,e,1)),c=Object(f.c)(Object(h.a)(1,Object(h.g)(63,Object(m.g)(Object(h.i)(1,n),Object(b.h)(4))))),o=Object(f.c)(b.a),s=Object(f.c)(b.a),j(Object(f.c)(Object(b.i)(-2)),t=>Object(h.e)(t,Object(b.i)(2)),h.d,t=>[j(Object(f.c)(Object(b.i)(-2)),t=>Object(h.e)(t,Object(b.i)(2)),h.d,e=>[u=Object(f.c)(Object(b.l)(Object(b.h)(t),Object(b.h)(e))),p=Object(f.c)(Object(h.g)(A(Object(h.a)(r,u)),a)),g=Object(f.c)(Object(h.a)(Object(h.i)(u,i),Object(l.d)(p))),_=Object(f.c)(Object(m.g)(Object(h.i)(1,Object(m.i)(b.a,b.f,Object(m.j)(Object(m.a)(g,g)))),c)),Object(O.a)(o,Object(h.f)(_,Object(l.g)(p),o)),Object(O.a)(s,Object(h.a)(s,_))])]),Object(d.d)(Object(h.b)(o,s))]}));var R=n(33);const F=Object(R.a)();let w,N;const x=F(Object(u.c)([w=Object(f.d)("vec2","resolution"),N=Object(f.d)("float","time"),Object(d.b)(()=>{let t,e;return[t=Object(f.c)(E(Object(l.d)(F.gl_FragCoord),w)),e=Object(f.c)(S(Object(h.g)(Object(h.a)(t,N),10),Object(b.h)(1),Object(b.h)(1))),Object(O.a)(F.gl_FragColor,Object(b.n)(Object(b.m)(v(e)),1))]})]));let I;const U=F(Object(u.c)([w=Object(f.d)("vec2","resolution"),N=Object(f.d)("float","time"),I=Object(f.d)("sampler2D","noiseTex"),Object(d.b)(()=>{let t,e;return[t=Object(f.c)(Object(h.a)(Object(h.b)(N,3),Object(h.b)(Object(l.d)(F.gl_FragCoord),Object(h.g)(w,1.5)))),e=Object(f.c)(Object(p.a)(I,t)),Object(O.a)(F.gl_FragColor,Object(b.n)(Object(b.m)(v(Object(h.a)(Object(h.a)(Object(h.a)(y(Object(l.c)(e)),Object(h.b)(y(Object(l.f)(e)),2)),Object(h.b)(y(Object(l.g)(e)),4)),Object(h.b)(y(Object(l.b)(e)),8)))),1))]})]));var D=n(2),L=n(40);const P=Object(R.a)(),z=Object(R.b)();let B,C,G,k,X,V,$,Y;const q=z(Object(u.c)([G=Object(f.a)("vec3","position"),k=Object(f.a)("vec2","uv"),X=Object(f.d)("mat4","transform"),V=Object(f.d)("mat4","projection"),$=Object(f.d)("mat4","view"),B=Object(f.b)("vec2","vUv"),C=Object(f.b)("float","vHeight"),Object(d.b)(()=>[Object(O.a)(B,k),Y=Object(f.c)(Object(h.g)(X,Object(b.n)(G,1))),Object(O.a)(C,Object(l.f)(Y)),Object(O.a)(z.gl_Position,Object(h.g)(Object(h.g)(V,$),Y))])]));let H,W,K;const Q=P(Object(u.c)([H=Object(f.d)("sampler2D","texture"),W=Object(f.d)("float","withDistance"),B=Object(f.a)("vec2","vUv"),C=Object(f.a)("float","vHeight"),Object(d.b)(()=>[K=Object(f.c)(g(Object(h.c)(W,Object(b.h)(0)),Object(h.b)(C,12),Object(b.h)(1))),Object(O.a)(P.gl_FragColor,Object(b.n)(Object(l.e)(Object(p.a)(H,B)),K))])]));console.log(q),console.log(Q);var Z=n(24),J=n(11),tt=n(47);n(18);const et=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];for(let t=0;t<=256;t++)et[256+t]=et[t];Math.sqrt(3),Math.sqrt(3);const nt=(Math.sqrt(5)-1)/4,rt=(5-Math.sqrt(5))/20,it=new Uint8Array(256),at=new Uint8Array(512),ct=new Uint8Array(512);for(let t=0;t<256;t++)it[t]=256*Math.random();for(let t=0;t<512;t++)at[t]=it[255&t],ct[t]=at[t]%12;new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);const ot=new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]);function st(t,e,n,r){let i,a,c,o,s;const u=(t+e+n+r)*nt,f=Math.floor(t+u),d=Math.floor(e+u),l=Math.floor(n+u),h=Math.floor(r+u),b=(f+d+l+h)*rt,O=t-(f-b),p=e-(d-b),g=n-(l-b),j=r-(h-b);let _,m,v,y,E,M,T,A,S,R,F,w,N=0,x=0,I=0,U=0;O>p?N++:x++,O>g?N++:I++,O>j?N++:U++,p>g?x++:I++,p>j?x++:U++,g>j?I++:U++,_=N>=3?1:0,m=x>=3?1:0,v=I>=3?1:0,y=U>=3?1:0,E=N>=2?1:0,M=x>=2?1:0,T=I>=2?1:0,A=U>=2?1:0,S=N>=1?1:0,R=x>=1?1:0,F=I>=1?1:0,w=U>=1?1:0;const D=O-_+rt,L=p-m+rt,P=g-v+rt,z=j-y+rt,B=O-E+2*rt,C=p-M+2*rt,G=g-T+2*rt,k=j-A+2*rt,X=O-S+3*rt,V=p-R+3*rt,$=g-F+3*rt,Y=j-w+3*rt,q=O-1+4*rt,H=p-1+4*rt,W=g-1+4*rt,K=j-1+4*rt,Q=255&f,Z=255&d,J=255&l,tt=255&h;let et=.6-O*O-p*p-g*g-j*j;if(et<0)i=0;else{const t=at[Q+at[Z+at[J+at[tt]]]]%32*4;et*=et,i=et*et*(ot[t]*O+ot[t+1]*p+ot[t+2]*g+ot[t+3]*j)}let it=.6-D*D-L*L-P*P-z*z;if(it<0)a=0;else{const t=at[Q+_+at[Z+m+at[J+v+at[tt+y]]]]%32*4;it*=it,a=it*it*(ot[t]*D+ot[t+1]*L+ot[t+2]*P+ot[t+3]*z)}let ct=.6-B*B-C*C-G*G-k*k;if(ct<0)c=0;else{const t=at[Q+E+at[Z+M+at[J+T+at[tt+A]]]]%32*4;ct*=ct,c=ct*ct*(ot[t]*B+ot[t+1]*C+ot[t+2]*G+ot[t+3]*k)}let st=.6-X*X-V*V-$*$-Y*Y;if(st<0)o=0;else{const t=at[Q+S+at[Z+R+at[J+F+at[tt+w]]]]%32*4;st*=st,o=st*st*(ot[t]*X+ot[t+1]*V+ot[t+2]*$+ot[t+3]*Y)}let ut=.6-q*q-H*H-W*W-K*K;if(ut<0)s=0;else{const t=at[Q+1+at[Z+1+at[J+1+at[tt+1]]]]%32*4;ut*=ut,s=ut*ut*(ot[t]*q+ot[t+1]*H+ot[t+2]*W+ot[t+3]*K)}return 27*(i+a+c+o+s)}function ut(t,e,n,r){const i=[];for(let a=0;a<e;a++)for(let c=0;c<t;c++){const o=c/t,s=a/e,u=Math.cos(2*o*Math.PI)*n/(2*Math.PI),f=Math.cos(2*s*Math.PI)*r/(2*Math.PI),d=Math.sin(2*o*Math.PI)*n/(2*Math.PI),l=Math.sin(2*s*Math.PI)*r/(2*Math.PI);i.push(st(u,f,d,l))}return i}function ft(t){return Math.floor(127*(t+1))}Object(Z.a)({position:[0,3,-15],rotationY:Math.PI,lookSpeed:3});const dt=Object(r.f)(a,"plane").update(Object(L.a)(5,2)),lt=Object(r.j)(a,"plane").update({frag:Q,vert:q}),ht=D.a.create();D.a.translate(ht,ht,[0,5.5,5]);const bt=Object(r.e)(a,"noise").update({frag:x,drawSettings:{clearBits:Object(J.a)(a.gl,"color","depth")},uniforms:{time:()=>c.time,resolution:()=>[256,256]}}),Ot=Object(r.g)(a,"noise").update({layers:bt,width:256,height:256}),pt=Object(r.k)(a,"noise").update({form:dt,shade:lt,uniforms:{texture:()=>Ot.image(),transform:ht}}),gt=D.a.create();D.a.translate(gt,gt,[11,5.5,5]);const jt=Object(r.g)(a,"noiseTex").update({texture:function({startX:t=1,startY:e=1,width:n,height:r,data:i={}}){const a=new Uint8Array(n*r*4),c=ut(n,r,t,e),o=ut(n,r,2.1*t,2.1*e),s=ut(n,r,4.2*t,4.2*e),u=ut(n,r,8.3*t,8.3*e);for(let t=0;t<c.length;t++){const e=4*t;a[e]=ft(c[t]),a[e+1]=ft(o[t]),a[e+2]=ft(s[t]),a[e+3]=ft(u[t])}return i.data=a,i.width=n,i.height=r,i}({width:256,height:256,startX:3,startY:3,data:{magFilter:"LINEAR",minFilter:"LINEAR",wrap:"REPEAT"}})}),_t=Object(r.k)(a,"noiseTex").update({form:dt,shade:lt,uniforms:{texture:()=>jt.image(),transform:gt}}),mt=D.a.create();D.a.translate(mt,mt,[-11,5.5,5]);const vt=Object(r.e)(a,"noiseTex2").update({frag:U,drawSettings:{clearBits:Object(J.a)(a.gl,"color","depth")},uniforms:{time:()=>c.time,resolution:()=>[256,256],noiseTex:()=>jt.image()}}),yt=Object(r.g)(a,"noiseTex2").update({layers:vt,width:256,height:256}),Et=Object(r.k)(a,"noiseTex2").update({form:dt,shade:lt,uniforms:{texture:()=>yt.image(),transform:mt}}),Mt=Object(tt.a)(a,c,[pt,_t,Et],{scale:.5,reflectionStrength:.5});Object(r.m)("time",0),Object(r.a)("renderer",(t,e)=>{const n=e.device;t===o.FRAME&&(e.time+=n.tpf/1e4),t===o.RESIZE&&Ot.update()}),Object(s.b)(t=>{c.device.tpf=t,Object(r.c)(o.FRAME),a.compose(Ot,yt,Mt).display(Mt)},"loop")}]);
//# sourceMappingURL=main.js.map