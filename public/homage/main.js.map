{"version":3,"sources":["webpack:///homage/main.js","webpack:///../libs/tvs-libs/dist/lib/utils/sequence.js","webpack:///../libs/tvs-libs/dist/lib/math/core.js","webpack:///./homage/graph/events.ts","webpack:///./homage/graph/videos.ts","webpack:///./homage/graph/state/ground.ts","webpack:///../libs/tvs-libs/dist/lib/math/geometry.js","webpack:///./homage/graph/state/screens.ts","webpack:///./homage/graph/view/painter.ts","webpack:///../node_modules/geo-3d-box/box.js","webpack:///../libs/tvs-renderer/dist/lib/utils/stackgl.js","webpack:///../libs/tvs-renderer/dist/lib/contants.js","webpack:///../libs/tvs-libs/lib/vr/flow-painter-utils.ts","webpack:///../libs/tvs-libs/lib/utils/predicates.ts","webpack:///../libs/tvs-renderer/dist/lib/utils/context.js","webpack:///./homage/graph/state/pedestals.ts","webpack:///../libs/tvs-libs/dist/lib/math/vectors.js","webpack:///./homage/graph/view/camera.ts","webpack:///./homage/graph/view/effects/ground-reflection.ts","webpack:///./homage/graph/view/geometries/box.ts","webpack:///./homage/graph/view/geometries/plane.ts","webpack:///./homage/graph/view/shaders/ground-reflection.ts","webpack:///./homage/graph/view/shaders/ground.ts","webpack:///./homage/graph/view/shaders/object.ts","webpack:///./homage/graph/view/shaders/screen.ts","webpack:///./homage/index.ts","webpack:///./homage/flow.ts","webpack:///./homage/nodes.json","webpack:///./homage/graph \\.ts$","webpack:///../libs/tvs-libs/dist/lib/math/coords.js","webpack:///./homage/graph/view/renderer.ts","webpack:///./homage/graph/view/shaders/ground-reflection-frag.glsl","webpack:///./homage/graph/view/shaders/ground-vert.glsl","webpack:///./homage/graph/view/shaders/ground-frag.glsl","webpack:///./homage/graph/view/shaders/object-vert.glsl","webpack:///./homage/graph/view/shaders/object-frag.glsl","webpack:///./homage/graph/view/shaders/screen-vert.glsl","webpack:///./homage/graph/view/shaders/screen-frag.glsl"],"names":["webpackJsonp","module","__webpack_exports__","__webpack_require__","pickRandom","arr","Object","__WEBPACK_IMPORTED_MODULE_0__math_core__","length","doTimes","count","fn","i","yieldTimes","push","zip","as","bs","Math","min","result","randInt","int","floor","random","normalRand","PI","defineProperty","value","d","tick","tickStep","tickCounter","slowTick","windowSize","mouse","keys","__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__","__WEBPACK_IMPORTED_MODULE_1_tvs_libs_dist_lib_events_keyboard__","__WEBPACK_IMPORTED_MODULE_2_tvs_libs_dist_lib_events_mouse__","__WEBPACK_IMPORTED_MODULE_3_tvs_libs_dist_lib_events_dom__","__WEBPACK_IMPORTED_MODULE_4_tvs_libs_dist_lib_events_animation__","__WEBPACK_IMPORTED_MODULE_5__videos__","HOT","react","self","max","cnt","createVideo","src","video","document","createElement","crossOrigin","loop","source1","type","source2","appendChild","names","videosUrl","loadTimeout","videos","send","timeout","url","Promise","all","map","name","v","res","rej","t","setTimeout","console","log","addEventListener","play","clearTimeout","then","position","normal","scale","transform","planeEquation","mirrorMatrix","__WEBPACK_IMPORTED_MODULE_1_gl_matrix__","__WEBPACK_IMPORTED_MODULE_2_tvs_libs_dist_lib_math_geometry__","n","create","mat","pos","fromTranslation","rotateX","planeFromNormalAndCoplanarPoint","point","__WEBPACK_IMPORTED_MODULE_0_gl_matrix__","dot","fromValues","mirrorMatrixFromPlane","plane","_a","a","b","c","getYawQuat","quat","rotYAngle","sin","cos","getRollQuat","rotZAngle","radius","height","rotations","positions","transforms","__WEBPACK_IMPORTED_MODULE_2_tvs_libs_dist_lib_math_coords__","__WEBPACK_IMPORTED_MODULE_3__videos__","__WEBPACK_IMPORTED_MODULE_4_tvs_libs_dist_lib_utils_sequence__","_","rot","phi","x","z","rotateY","canvas","painter","gl","canvasSize","settings","__WEBPACK_IMPORTED_MODULE_1_tvs_libs_dist_lib_vr_flow_painter_utils__","__WEBPACK_IMPORTED_MODULE_2__events__","clearColor","reset","p","updateDrawSettings","exports","_createConfig","properties","config","size","segments","Array","isArray","_flatten","array","results","subarray","j","_generatePanel","rows","_generateGrid","cells","_generateCells","uvs","_generateUvs","vertexCount","sx","sy","wx","wy","step","halfY","grid","_generateRow","halfX","row","index","y","_clonePanel","panel","_generateBoxPanels","segs","zp","xp","yp","zm","xm","ym","normals","_makeNormals","slice","_generateBox","panels","_offsetCellIndices","offset","offsetCells","cell","_i","array_1","subarray_1","el","convertStackGLGeometry","stackglGeometry","geometry","drawType","attribs","itemCount","prop","STACK_GL_GEOMETRY_PROP_ELEMENTS","buffer","Uint32Array","Uint16Array","assign","elements","STACK_GL_GEOMETRY_PROP_POSITION","__WEBPACK_IMPORTED_MODULE_0__contants__","Float32Array","STACK_GL_GEOMETRY_PROP_NORMAL","STACK_GL_GEOMETRY_PROP_UV","GEOMETRY_PROP_POSITION","GEOMETRY_PROP_NORMAL","GEOMETRY_PROP_UV","makeShadeEntity","data","entity","shade","createShade","destroy","update","makeFormEntity","form","createForm","makeSketchEntity","sketch","createSketch","makeDrawingLayerEntity","layer","createDrawingLayer","makeEffectLayerEntity","createEffectLayer","unequal","makeClear","clearArray","arguments","reduce","item","toUpperCase","__WEBPACK_IMPORTED_MODULE_2_tvs_libs_dist_lib_math_vectors__","__WEBPACK_IMPORTED_MODULE_3__screens__","mul","vec","scalar","sum","val","sqrt","rotX","rotY","rotation","view","perspectiveSettings","perspective","moveSpeed","lookSpeed","moveForward","moveLeft","mouseDrag","dragDeltas","groundMirrorView","__WEBPACK_IMPORTED_MODULE_1_tvs_libs_dist_lib_vr_flow_camera__","__WEBPACK_IMPORTED_MODULE_2__painter__","__WEBPACK_IMPORTED_MODULE_3_tvs_libs_dist_lib_events_keyboard__","__WEBPACK_IMPORTED_MODULE_4_gl_matrix__","__WEBPACK_IMPORTED_MODULE_5__events__","__WEBPACK_IMPORTED_MODULE_6__state_ground__","__assign","this","s","prototype","hasOwnProperty","call","_b","updateVal","fovy","COLD","speed","UP","W","DOWN","S","LEFT","A","RIGHT","D","m","drag","o","accept","left","add","forward","multiply","blurStrength","layersData","strength","passData","direction","__WEBPACK_IMPORTED_MODULE_1_geo_3d_box__","__WEBPACK_IMPORTED_MODULE_1_geo_3d_box___default","__WEBPACK_IMPORTED_MODULE_2_tvs_renderer_dist_lib_utils_stackgl__","props","__WEBPACK_IMPORTED_MODULE_0_tvs_renderer_dist_lib_utils_geometry_plane__","__WEBPACK_IMPORTED_MODULE_1_tvs_flow_dist_lib_utils_entity_reference__","width","segX","segY","frag","__WEBPACK_IMPORTED_MODULE_1__ground_reflection_frag_glsl__","__WEBPACK_IMPORTED_MODULE_1__ground_reflection_frag_glsl___default","spec","__WEBPACK_IMPORTED_MODULE_1__ground_vert_glsl__","__WEBPACK_IMPORTED_MODULE_1__ground_vert_glsl___default","__WEBPACK_IMPORTED_MODULE_2__ground_frag_glsl__","__WEBPACK_IMPORTED_MODULE_2__ground_frag_glsl___default","vert","__WEBPACK_IMPORTED_MODULE_1__object_vert_glsl__","__WEBPACK_IMPORTED_MODULE_1__object_vert_glsl___default","__WEBPACK_IMPORTED_MODULE_2__object_frag_glsl__","__WEBPACK_IMPORTED_MODULE_2__object_frag_glsl___default","__WEBPACK_IMPORTED_MODULE_1__screen_vert_glsl__","__WEBPACK_IMPORTED_MODULE_1__screen_vert_glsl___default","__WEBPACK_IMPORTED_MODULE_2__screen_frag_glsl__","__WEBPACK_IMPORTED_MODULE_2__screen_frag_glsl___default","__WEBPACK_IMPORTED_MODULE_0__flow__","__WEBPACK_IMPORTED_MODULE_1_shared_utils_reload__","graphModules","setDebug","updateFlow","flow","tools","__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_runtime__","__WEBPACK_IMPORTED_MODULE_1_tvs_flow_tools__","__WEBPACK_IMPORTED_MODULE_2__nodes_json__","__WEBPACK_IMPORTED_MODULE_2__nodes_json___default","start","graph","window","events.tick","events.tickStep","events.tickCounter","events.slowTick","events.windowSize","events.mouse","events.keys","events.mouseDrag","state.ground.position","state.ground.normal","state.ground.scale","state.ground.transform","state.ground.planeEquation","state.ground.mirrorMatrix","state.pedestals.scale","state.pedestals.transforms","state.screens.radius","state.screens.height","state.screens.scale","state.screens.rotations","state.screens.positions","state.screens.transforms","videos.names","videos.videosUrl","videos.loadTimeout","videos.videos","view.camera.position","view.camera.yaw","view.camera.pitch","view.camera.yawQuat","view.camera.pitchQuat","view.camera.rotationQuat","view.camera.view","view.camera.fovy","view.camera.aspect","view.camera.near","view.camera.far","view.camera.perspective","view.camera.moveSpeed","view.camera.lookSpeed","view.camera.moveForward","view.camera.moveLeft","view.camera.groundMirrorView","view.context.context","view.context.canvas","view.context.canvasSize","view.effects.ground-reflection.idPrefix","view.effects.ground-reflection.passes","view.effects.ground-reflection.ids","view.effects.ground-reflection.layersData","view.geometries.box.id","view.geometries.box.size","view.geometries.box.segments","view.geometries.box.geometry","view.geometries.plane.id","view.geometries.plane.props","view.geometries.plane.geometry","view.renderer.settings","view.renderer.groundId","view.renderer.sceneLayerId","view.renderer.mirrorSceneLayerId","view.renderer.layers","view.renderer.render","view.shaders.ground-reflection.id","view.shaders.ground-reflection.spec","view.shaders.ground.id","view.shaders.ground.spec","view.shaders.object.id","view.shaders.object.spec","view.shaders.screen.id","view.shaders.screen.spec","view.effects.ground-reflection.blurStrength","view.painter.canvas","view.painter.painter","view.painter.gl","view.painter.canvasSize","view.painter.settings","view.renderer.boxForm","view.renderer.planeForm","view.renderer.groundShade","view.renderer.objectShade","view.renderer.screenShade","view.renderer.videoTextures","view.renderer.groundSketch","view.renderer.screenSketch","view.renderer.pedestalSketch","view.renderer.drawSettings","view.renderer.sceneLayer","view.renderer.mirrorSceneLayer","view.renderer.effectSettings","view.renderer.effectLayer","view.shaders.ground-reflection.frag","view.camera.perspectiveSettings","view.camera.rotation","view.camera.rotX","view.camera.rotY","webpackContext","req","webpackContextResolve","id","Error","./events.ts","./state/ground.ts","./state/pedestals.ts","./state/screens.ts","./videos.ts","./view/camera.ts","./view/effects/ground-reflection.ts","./view/geometries/box.ts","./view/geometries/plane.ts","./view/painter.ts","./view/renderer.ts","./view/shaders/ground-reflection.ts","./view/shaders/ground.ts","./view/shaders/object.ts","./view/shaders/screen.ts","resolve","polarToCartesian2D","coords","r","boxForm","planeForm","groundShade","objectShade","screenShade","videoTextures","groundSketch","screenSketch","pedestalSketch","drawSettings","sceneLayer","mirrorSceneLayer","effectSettings","effectLayer","layers","__WEBPACK_IMPORTED_MODULE_1_homage_graph_view_painter__","__WEBPACK_IMPORTED_MODULE_2_tvs_libs_lib_vr_flow_painter_utils__","__WEBPACK_IMPORTED_MODULE_3__events__","__WEBPACK_IMPORTED_MODULE_4__videos__","__WEBPACK_IMPORTED_MODULE_5_homage_graph_view_camera__","__WEBPACK_IMPORTED_MODULE_6_homage_graph_view_geometries_box__","__WEBPACK_IMPORTED_MODULE_7_homage_graph_view_geometries_plane__","__WEBPACK_IMPORTED_MODULE_8_homage_graph_view_shaders_ground_reflection__","__WEBPACK_IMPORTED_MODULE_9_homage_graph_view_shaders_ground__","__WEBPACK_IMPORTED_MODULE_10_homage_graph_view_shaders_object__","__WEBPACK_IMPORTED_MODULE_11_homage_graph_view_shaders_screen__","__WEBPACK_IMPORTED_MODULE_12__state_ground__","__WEBPACK_IMPORTED_MODULE_13__state_screens__","__WEBPACK_IMPORTED_MODULE_14__state_pedestals__","__WEBPACK_IMPORTED_MODULE_15__effects_ground_reflection__","__WEBPACK_IMPORTED_MODULE_16_tvs_libs_dist_lib_utils_sequence__","__WEBPACK_IMPORTED_MODULE_17_tvs_renderer_dist_lib_utils_context__","__WEBPACK_IMPORTED_MODULE_18_tvs_libs_dist_lib_utils_predicates__","createStaticLayer","flipY","minFilter","wrap","ts","vs","forEach","asset","uniforms","reflection","textures","tex","texture","clearBits","screens","pedestals","ground","projection","sketches","withDistance","groundHeight","groundPos","disable","DEPTH_TEST","layerData","source","mirrorScene","effect","scene","filter","l","compose","apply"],"mappings":"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","file":"homage/main.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */,\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = pickRandom;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = doTimes;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = yieldTimes;\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = zip;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__math_core__ = __webpack_require__(6);\n\nfunction pickRandom(arr) {\n    return arr[Object(__WEBPACK_IMPORTED_MODULE_0__math_core__[\"b\" /* randInt */])(arr.length)];\n}\nfunction doTimes(count, fn) {\n    for (var i = 0; i < count; i++) {\n        fn(i);\n    }\n}\nfunction yieldTimes(count, fn) {\n    var arr = [];\n    doTimes(count, function (i) { return arr.push(fn(i)); });\n    return arr;\n}\nfunction zip(as, bs, fn) {\n    var length = Math.min(as.length, bs.length);\n    var result = [];\n    for (var i = 0; i < length; i++) {\n        result.push(fn(as[i], bs[i]));\n    }\n    return result;\n}\n//# sourceMappingURL=sequence.js.map\n\n/***/ }),\n/* 5 */,\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export DEG_TO_RAD_FACTOR */\n/* unused harmony export sign */\n/* unused harmony export lerp */\n/* unused harmony export clamp */\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = randInt;\n/* unused harmony export randIntInRange */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = normalRand;\n/* unused harmony export degToRad */\nvar DEG_TO_RAD_FACTOR = Math.PI / 180;\nfunction sign(num) {\n    if (num > 0) {\n        return 1;\n    }\n    else if (num < 0) {\n        return -1;\n    }\n    else {\n        return 0;\n    }\n}\nfunction lerp(start, end, step) {\n    return start + step * (end - start);\n}\nfunction clamp(value, min, max) {\n    return Math.max(min, Math.min(value, max));\n}\nfunction randInt(int) {\n    return Math.floor(Math.random() * int);\n}\nfunction randIntInRange(from, to) {\n    return randInt(to - from) + from;\n}\nfunction normalRand() {\n    return (Math.random() + Math.random() + Math.random()) / 3;\n}\nfunction degToRad(degrees) {\n    return degrees * DEG_TO_RAD_FACTOR;\n}\n//# sourceMappingURL=core.js.map\n\n/***/ }),\n/* 7 */,\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"tick\", function() { return tick; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"tickStep\", function() { return tickStep; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"tickCounter\", function() { return tickCounter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"slowTick\", function() { return slowTick; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"windowSize\", function() { return windowSize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"mouse\", function() { return mouse; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"keys\", function() { return keys; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_tvs_libs_dist_lib_events_keyboard__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_tvs_libs_dist_lib_events_mouse__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_tvs_libs_dist_lib_events_dom__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_tvs_libs_dist_lib_events_animation__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__videos__ = __webpack_require__(9);\n\n\n\n\n\n\nvar tick = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"a\" /* asyncStream */])([__WEBPACK_IMPORTED_MODULE_5__videos__[\"videos\"].HOT], __WEBPACK_IMPORTED_MODULE_4_tvs_libs_dist_lib_events_animation__[\"a\" /* animateWithTPF */]);\nvar tickStep = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])(2);\nvar tickCounter = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])(0)\n    .react([tickStep.HOT, tick.HOT], function (self, max) { return self === max ? 0 : self + 1; });\nvar slowTick = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"d\" /* stream */])([tickCounter.HOT], function (cnt) { return cnt === 0 ? true : null; });\nvar windowSize = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"b\" /* asyncStreamStart */])(null, __WEBPACK_IMPORTED_MODULE_3_tvs_libs_dist_lib_events_dom__[\"a\" /* windowSize */]);\nvar mouse = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"b\" /* asyncStreamStart */])(null, __WEBPACK_IMPORTED_MODULE_2_tvs_libs_dist_lib_events_mouse__[\"a\" /* mouse */]);\nvar keys = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"b\" /* asyncStreamStart */])(null, __WEBPACK_IMPORTED_MODULE_1_tvs_libs_dist_lib_events_keyboard__[\"b\" /* keyboard */]);\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (immutable) */ __webpack_exports__[\"createVideo\"] = createVideo;\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"names\", function() { return names; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"videosUrl\", function() { return videosUrl; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"loadTimeout\", function() { return loadTimeout; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"videos\", function() { return videos; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__ = __webpack_require__(0);\n\nfunction createVideo(src) {\n    var video = document.createElement('video');\n    video.crossOrigin = 'anonymous';\n    video.loop = true;\n    var source1 = document.createElement('source');\n    source1.src = src + '.webm';\n    source1.type = 'video/webm';\n    var source2 = document.createElement('source');\n    source2.src = src + '.mp4';\n    source2.type = 'video/mp4';\n    video.appendChild(source1);\n    video.appendChild(source2);\n    return video;\n}\nvar names = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])([\n    'tworooms',\n    'behindglass',\n    'nanofuzz',\n    'balloon',\n    'threescreens'\n]);\nvar videosUrl = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])('videos/');\nvar loadTimeout = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])(60000);\nvar videos = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"a\" /* asyncStream */])([\n    names.HOT,\n    loadTimeout.HOT,\n    videosUrl.HOT\n], function (send, names, timeout, url) {\n    Promise.all(names\n        .map(function (name) { return createVideo(url + name); })\n        .map(function (v) { return new Promise(function (res, rej) {\n        var t = setTimeout(function () {\n            console.log('timeout', v);\n            rej('Video timeout ' + v);\n        }, timeout);\n        v.addEventListener('canplay', function () {\n            res(v);\n            v.play();\n            clearTimeout(t);\n            console.log('loaded', v);\n        });\n    }); })).then(send);\n});\n\n\n/***/ }),\n/* 10 */,\n/* 11 */,\n/* 12 */,\n/* 13 */,\n/* 14 */,\n/* 15 */,\n/* 16 */,\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */,\n/* 22 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"position\", function() { return position; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"normal\", function() { return normal; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"scale\", function() { return scale; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"transform\", function() { return transform; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"planeEquation\", function() { return planeEquation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"mirrorMatrix\", function() { return mirrorMatrix; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_gl_matrix__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_gl_matrix___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_gl_matrix__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_tvs_libs_dist_lib_math_geometry__ = __webpack_require__(23);\n\n\n\nvar position = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])([0, -3.4, 0]);\nvar normal = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])([0, 1, 0]);\nvar scale = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])(10);\nvar transform = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])(__WEBPACK_IMPORTED_MODULE_1_gl_matrix__[\"mat4\"].create())\n    .react([position.HOT, scale.HOT], function (mat, pos, scale) {\n    __WEBPACK_IMPORTED_MODULE_1_gl_matrix__[\"mat4\"].fromTranslation(mat, pos);\n    __WEBPACK_IMPORTED_MODULE_1_gl_matrix__[\"mat4\"].rotateX(mat, mat, Math.PI / 2);\n    return __WEBPACK_IMPORTED_MODULE_1_gl_matrix__[\"mat4\"].scale(mat, mat, [scale, scale, scale]);\n});\nvar planeEquation = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"d\" /* stream */])([normal.HOT, position.HOT], __WEBPACK_IMPORTED_MODULE_2_tvs_libs_dist_lib_math_geometry__[\"d\" /* planeFromNormalAndCoplanarPoint */]);\nvar mirrorMatrix = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"d\" /* stream */])([planeEquation.HOT], __WEBPACK_IMPORTED_MODULE_2_tvs_libs_dist_lib_math_geometry__[\"c\" /* mirrorMatrixFromPlane */]);\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = planeFromNormalAndCoplanarPoint;\n/* unused harmony export planeFromThreeCoplanarPoints */\n/* unused harmony export normalFromThreeCoplanarPoints */\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = mirrorMatrixFromPlane;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = getYawQuat;\n/* unused harmony export getPitchQuat */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = getRollQuat;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_gl_matrix__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_gl_matrix___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_gl_matrix__);\n\nfunction planeFromNormalAndCoplanarPoint(n, point) {\n    var d = -__WEBPACK_IMPORTED_MODULE_0_gl_matrix__[\"vec3\"].dot(n, point);\n    return __WEBPACK_IMPORTED_MODULE_0_gl_matrix__[\"vec4\"].fromValues(n[0], n[1], n[2], d);\n}\nfunction planeFromThreeCoplanarPoints(p1, p2, p3) {\n    return planeFromNormalAndCoplanarPoint(normalFromThreeCoplanarPoints(p1, p2, p3), p1);\n}\nfunction normalFromThreeCoplanarPoints(p1, p2, p3) {\n    var n = __WEBPACK_IMPORTED_MODULE_0_gl_matrix__[\"vec3\"].cross(__WEBPACK_IMPORTED_MODULE_0_gl_matrix__[\"vec3\"].create(), __WEBPACK_IMPORTED_MODULE_0_gl_matrix__[\"vec3\"].sub(__WEBPACK_IMPORTED_MODULE_0_gl_matrix__[\"vec3\"].create(), p3, p2), __WEBPACK_IMPORTED_MODULE_0_gl_matrix__[\"vec3\"].sub(__WEBPACK_IMPORTED_MODULE_0_gl_matrix__[\"vec3\"].create(), p1, p2));\n    return __WEBPACK_IMPORTED_MODULE_0_gl_matrix__[\"vec3\"].normalize(n, n);\n}\nfunction mirrorMatrixFromPlane(plane) {\n    var _a = plane, a = _a[0], b = _a[1], c = _a[2], d = _a[3];\n    return __WEBPACK_IMPORTED_MODULE_0_gl_matrix__[\"mat4\"].fromValues(1 - 2 * a * a, -2 * a * b, -2 * a * c, 0, -2 * a * b, 1 - 2 * b * b, -2 * b * c, 0, -2 * a * c, -2 * b * c, 1 - 2 * c * c, 0, -2 * a * d, -2 * b * d, -2 * c * d, 1);\n}\nfunction getYawQuat(quat, rotYAngle) {\n    rotYAngle *= 0.5;\n    quat[0] = 0;\n    quat[1] = Math.sin(rotYAngle);\n    quat[2] = 0;\n    quat[3] = Math.cos(rotYAngle);\n    return quat;\n}\nfunction getPitchQuat(quat, rotXAngle) {\n    rotXAngle *= 0.5;\n    quat[0] = Math.sin(rotXAngle);\n    quat[1] = 0;\n    quat[2] = 0;\n    quat[3] = Math.cos(rotXAngle);\n    return quat;\n}\nfunction getRollQuat(quat, rotZAngle) {\n    rotZAngle *= 0.5;\n    quat[0] = 0;\n    quat[1] = 0;\n    quat[2] = Math.sin(rotZAngle);\n    quat[3] = Math.cos(rotZAngle);\n    return quat;\n}\n//# sourceMappingURL=geometry.js.map\n\n/***/ }),\n/* 24 */,\n/* 25 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"radius\", function() { return radius; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"height\", function() { return height; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"scale\", function() { return scale; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rotations\", function() { return rotations; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"positions\", function() { return positions; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"transforms\", function() { return transforms; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_gl_matrix__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_gl_matrix___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_gl_matrix__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_tvs_libs_dist_lib_math_coords__ = __webpack_require__(93);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__videos__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_tvs_libs_dist_lib_utils_sequence__ = __webpack_require__(4);\n\n\n\n\n\nvar radius = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])(25);\nvar height = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])(2);\nvar scale = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])([1.6, 1, 1]);\nvar rotations = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"d\" /* stream */])([__WEBPACK_IMPORTED_MODULE_3__videos__[\"names\"].HOT], function (videos) { return videos.map(function (_, i) { return Math.PI * 2 * i / videos.length; }); });\nvar positions = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"d\" /* stream */])([radius.HOT, rotations.HOT, height.HOT], function (radius, rotations, height) {\n    return rotations.map(function (rot) {\n        var phi = -rot - Math.PI / 2;\n        var _a = __WEBPACK_IMPORTED_MODULE_2_tvs_libs_dist_lib_math_coords__[\"a\" /* polarToCartesian2D */]([radius, phi]), x = _a[0], z = _a[1];\n        return [x, height, z];\n    });\n});\nvar transforms = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"d\" /* stream */])([rotations.HOT, positions.HOT, scale.HOT], function (rotations, positions, scale) {\n    return Object(__WEBPACK_IMPORTED_MODULE_4_tvs_libs_dist_lib_utils_sequence__[\"d\" /* zip */])(rotations, positions, function (rot, pos) {\n        var t = __WEBPACK_IMPORTED_MODULE_1_gl_matrix__[\"mat4\"].fromTranslation(__WEBPACK_IMPORTED_MODULE_1_gl_matrix__[\"mat4\"].create(), pos);\n        __WEBPACK_IMPORTED_MODULE_1_gl_matrix__[\"mat4\"].rotateY(t, t, rot);\n        __WEBPACK_IMPORTED_MODULE_1_gl_matrix__[\"mat4\"].scale(t, t, scale);\n        return t;\n    });\n});\n\n\n/***/ }),\n/* 26 */,\n/* 27 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"canvas\", function() { return canvas; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"painter\", function() { return painter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"gl\", function() { return gl; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"canvasSize\", function() { return canvasSize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"settings\", function() { return settings; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_tvs_libs_dist_lib_vr_flow_painter_utils__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__events__ = __webpack_require__(8);\n\n\n\nvar canvas = (_a = Object(__WEBPACK_IMPORTED_MODULE_1_tvs_libs_dist_lib_vr_flow_painter_utils__[\"c\" /* makePainterCanvas */])(__WEBPACK_IMPORTED_MODULE_2__events__[\"windowSize\"]), _a.canvas), painter = _a.painter, gl = _a.gl, canvasSize = _a.canvasSize;\nvar settings = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])({\n    clearColor: [0, 0, 0, 1]\n}).reset();\npainter.react([settings.HOT], function (p, settings) { return p.updateDrawSettings(settings); });\nvar _a;\n\n\n/***/ }),\n/* 28 */,\n/* 29 */\n/***/ (function(module, exports) {\n\nfunction _createConfig( properties ) {\n\t\n\tvar config = {\n\t\tsize : [1,1,1],\n\t\tsegments : [1,1,1]\n\t}\n\t\n\tif( properties ) {\n\t\n\t\tif( Array.isArray( properties.size ) ) {\n\t\t\tconfig.size = properties.size\n\t\t} else if( typeof properties.size === \"number\" ) {\n\t\t\tconfig.size = [properties.size, properties.size, properties.size]\n\t\t}\n\t\n\t\tif( Array.isArray( properties.segments ) ) {\n\t\t\tconfig.segments = properties.segments\n\t\t} else if( typeof properties.segments === \"number\" ) {\n\t\t\tconfig.segments = [properties.segments, properties.segments, properties.segments]\n\t\t}\n\t}\n\t\n\treturn config\n}\n\nfunction _flatten( array ) {\n\tvar results = []\n\t\n\tfor( var i=0; i < array.length; i++ ) {\n\t\tvar subarray = array[i]\n\t\tfor( var j=0; j < subarray.length; j++ ) {\n\t\t\tresults.push(subarray[j])\n\t\t}\n\t}\n\treturn results\n}\n\nfunction _generatePanel( config ) {\n\t\t\t\n\tvar rows      = _generateGrid( config )\n\tvar cells     = _generateCells( config, rows )\n\tvar positions = _flatten( rows )\n\tvar uvs       = _generateUvs( config, positions )\n\t\n\treturn {\n\t\tpositions   : positions,\n\t\tcells       : cells,\n\t\tuvs         : uvs,\n\t\tvertexCount : (config.sx + 1) * (config.sy + 1)\n\t}\n}\n\nfunction _generateUvs( config, positions ) {\n\t\n\treturn positions.map(function(p) {\n\t\treturn [\n\t\t\tp[0] / config.wx + 0.5,\n\t\t\tp[1] / config.wy + 0.5\n\t\t]\n\t})\n}\n\nfunction _generateGrid( config ) {\n\t\n\tvar step   = config.wy / config.sy\n\tvar halfY  = config.wy / 2\n\tvar length = config.sy + 1\n\tvar grid   = Array(length)\n\t\n\tfor( var i=0; i < length; i++ ) {\n\t\tgrid[i] = _generateRow( config, step * i - halfY)\n\t}\n\t\n\treturn grid\n}\n\nfunction _generateRow( config, height ) {\n\t\n\tvar halfX  = config.wx / 2\n\tvar step   = config.wx / config.sx\n\tvar length = config.sx + 1\n\tvar row    = Array(length)\n\t\n\tfor( var i=0; i < length; i++ ) {\n\t\trow[i] = [ step * i - halfX, height ]\n\t}\n\t\n\treturn row\n}\n\nfunction _generateCells( config ) {\n\t\n\tfunction index( x, y ) {\n\t\treturn (config.sx + 1) * y + x\n\t}\n\t\n\tvar cells = []\n\t\n\tfor( var x=0; x < config.sx; x++ ) {\n\t\t\n\t\tfor( var y=0; y < config.sy; y++ ) {\n\n\t\t\tvar a = index( x + 0, y + 0 )  //   d __ c\n\t\t\tvar b = index( x + 1, y + 0 )  //    |  |\n\t\t\tvar c = index( x + 1, y + 1 )  //    |__|\n\t\t\tvar d = index( x + 0, y + 1 )  //   a    b\n\t\t\t\n\t\t\tcells.push( [ a, b, c ] )\n\t\t\tcells.push( [ c, d, a ] )\n\t\t}\n\t}\n\t\n\treturn cells\n}\n\nfunction _clonePanel( panel ) {\n\t\n\treturn {\n\t\tpositions   : panel.positions,\n\t\tcells       : panel.cells,\n\t\tuvs         : panel.uvs,\n\t\tvertexCount : panel.vertexCount\n\t}\n}\n\nfunction _generateBoxPanels( config ) {\n\t\n\tvar size = config.size\n\tvar segs = config.segments\n\t\n\t//       yp  zm\n\t//        | /\n\t//        |/\n\t// xm ----+----- xp\n\t//       /|\n\t//      / |\n\t//    zp  ym\n\t\n\tvar zp = _generatePanel({\n\t\twx: size[0], wy: size[1],\n\t\tsx: segs[0], sy: segs[1]\n\t})\n\tvar xp = _generatePanel({\n\t\twx: size[2], wy: size[1],\n\t\tsx: segs[2], sy: segs[1]\n\t})\n\tvar yp = _generatePanel({\n\t\twx: size[0], wy: size[2],\n\t\tsx: segs[0], sy: segs[2]\n\t})\n\t\n\tvar zm = _clonePanel(zp)\n\tvar xm = _clonePanel(xp)\n\tvar ym = _clonePanel(yp)\n\t\n\tzp.positions = zp.positions.map( function(p) { return [       p[0],       p[1],  size[2]/2 ] } )\n\tzm.positions = zm.positions.map( function(p) { return [       p[0],      -p[1], -size[2]/2 ] } )\n\txp.positions = xp.positions.map( function(p) { return [  size[0]/2,      -p[1],       p[0] ] } )\n\txm.positions = xm.positions.map( function(p) { return [ -size[0]/2,       p[1],       p[0] ] } )\n\typ.positions = yp.positions.map( function(p) { return [       p[0],  size[1]/2,      -p[1] ] } )\n\tym.positions = ym.positions.map( function(p) { return [       p[0], -size[1]/2,       p[1] ] } )\n\t\n\tzp.normals = _makeNormals( [ 0, 0, 1], zp.positions.length )\n\tzm.normals = _makeNormals( [ 0, 0,-1], zm.positions.length )\n\txp.normals = _makeNormals( [ 1, 0, 0], xp.positions.length )\n\txm.normals = _makeNormals( [-1, 0, 0], xm.positions.length )\n\typ.normals = _makeNormals( [ 0, 1, 0], yp.positions.length )\n\tym.normals = _makeNormals( [ 0,-1, 0], ym.positions.length )\n\t\n\treturn [ zp, zm, xp, xm, yp, ym ]\n}\n\nfunction _makeNormals( normal, count ) {\n\t\n\tvar normals = Array(count)\n\t\n\tfor( var i=0; i < count; i++ ) {\n\t\tnormals[i] = normal.slice()\n\t}\n\t\n\treturn normals\n}\n\t\nfunction _generateBox( config ) {\n\t\n\tvar panels = _generateBoxPanels( config )\n\t\n\tvar positions = panels.map(function(panel) { return panel.positions })\n\tvar uvs       = panels.map(function(panel) { return panel.uvs       })\n\tvar normals   = panels.map(function(panel) { return panel.normals   })\n\tvar cells     = _offsetCellIndices( panels )\n\t\n\treturn {\n\t\tpositions: _flatten( positions ),\n\t\tuvs:       _flatten( uvs ),\n\t\tcells:     _flatten( cells ),\n\t\tnormals:   _flatten( normals ),\n\t}\n}\n\nfunction _offsetCellIndices( panels ) {\n\t\n\t/*\n\t\tFrom: [[[0,1,2],[2,3,0]],[[0,1,2],[2,3,0]]]\n\t\tTo:   [[[0,1,2],[2,3,0]],[[6,7,8],[8,9,6]]]\n\t*/\n\t\n\tvar offset = 0\n\t\n\treturn panels.map(function(panel) {\n\t\t\n\t\tvar offsetCells = panel.cells.map( function(cell) {\n\t\t\treturn cell.map(function(v) {\n\t\t\t\treturn v + offset\n\t\t\t})\n\t\t})\n\t\n\t\toffset += panel.vertexCount\n\t\n\t\treturn offsetCells\n\t})\n}\n\nmodule.exports = function( properties ) {\n\t\n\tvar config = _createConfig( properties )\n\n\treturn _generateBox( config )\n}\n\n/***/ }),\n/* 30 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export STACK_GL_GEOMETRY_PROP_POSITION */\n/* unused harmony export STACK_GL_GEOMETRY_PROP_NORMAL */\n/* unused harmony export STACK_GL_GEOMETRY_PROP_UV */\n/* unused harmony export STACK_GL_GEOMETRY_PROP_ELEMENTS */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = convertStackGLGeometry;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__contants__ = __webpack_require__(31);\n\nvar STACK_GL_GEOMETRY_PROP_POSITION = 'positions';\nvar STACK_GL_GEOMETRY_PROP_NORMAL = 'normals';\nvar STACK_GL_GEOMETRY_PROP_UV = 'uvs';\nvar STACK_GL_GEOMETRY_PROP_ELEMENTS = 'cells';\nfunction _flatten(array) {\n    var results = [];\n    for (var _i = 0, array_1 = array; _i < array_1.length; _i++) {\n        var subarray = array_1[_i];\n        for (var _a = 0, subarray_1 = subarray; _a < subarray_1.length; _a++) {\n            var el = subarray_1[_a];\n            results.push(el);\n        }\n    }\n    return results;\n}\nfunction convertStackGLGeometry(stackglGeometry) {\n    var geometry = {\n        drawType: 'TRIANGLES',\n        attribs: {},\n        itemCount: 0\n    };\n    for (var prop in stackglGeometry) {\n        var arr = stackglGeometry[prop];\n        if (prop === STACK_GL_GEOMETRY_PROP_ELEMENTS) {\n            var buffer = new (arr.length > 65535 ? Uint32Array : Uint16Array)(_flatten(arr));\n            Object.assign(geometry, {\n                elements: { buffer: buffer },\n                itemCount: buffer.length\n            });\n        }\n        else if (prop === STACK_GL_GEOMETRY_PROP_POSITION) {\n            geometry.attribs[__WEBPACK_IMPORTED_MODULE_0__contants__[\"b\" /* GEOMETRY_PROP_POSITION */]] = {\n                buffer: new Float32Array(_flatten(arr))\n            };\n        }\n        else if (prop === STACK_GL_GEOMETRY_PROP_NORMAL) {\n            geometry.attribs[__WEBPACK_IMPORTED_MODULE_0__contants__[\"a\" /* GEOMETRY_PROP_NORMAL */]] = {\n                buffer: new Float32Array(_flatten(arr))\n            };\n        }\n        else if (prop === STACK_GL_GEOMETRY_PROP_UV) {\n            geometry.attribs[__WEBPACK_IMPORTED_MODULE_0__contants__[\"c\" /* GEOMETRY_PROP_UV */]] = {\n                buffer: new Float32Array(_flatten(arr))\n            };\n        }\n        else {\n            geometry.attribs[prop] = { buffer: new Float32Array(_flatten(arr)) };\n        }\n    }\n    return geometry;\n}\n//# sourceMappingURL=stackgl.js.map\n\n/***/ }),\n/* 31 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return GEOMETRY_PROP_POSITION; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return GEOMETRY_PROP_NORMAL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return GEOMETRY_PROP_UV; });\n/* unused harmony export UNIFORM_SOURCE_TEXTURE */\n/* unused harmony export VARYING_UV_COORDS */\n/* unused harmony export GL_TYPE */\nvar GEOMETRY_PROP_POSITION = 'position';\nvar GEOMETRY_PROP_NORMAL = 'normal';\nvar GEOMETRY_PROP_UV = 'uv';\nvar UNIFORM_SOURCE_TEXTURE = 'source';\nvar VARYING_UV_COORDS = 'coords';\nvar GL_TYPE = {\n    FLOAT: 0x1406,\n    FLOAT_VEC2: 0x8B50,\n    FLOAT_VEC3: 0x8B51,\n    FLOAT_VEC4: 0x8B52,\n    INT: 0x1404,\n    INT_VEC2: 0x8B53,\n    INT_VEC3: 0x8B54,\n    INT_VEC4: 0x8B55,\n    BOOL: 0x8B56,\n    BOOL_VEC2: 0x8B57,\n    BOOL_VEC3: 0x8B58,\n    BOOL_VEC4: 0x8B59,\n    FLOAT_MAT2: 0x8B5A,\n    FLOAT_MAT3: 0x8B5B,\n    FLOAT_MAT4: 0x8B5C,\n    SAMPLER_2D: 0x8B5E,\n    SAMPLER_CUBE: 0x8B60,\n    SAMPLER_3D: 0x8B5F,\n    SAMPLER_2D_SHADOW: 0x8B62,\n    FLOAT_MAT2X3: 0x8B65,\n    FLOAT_MAT2X4: 0x8B66,\n    FLOAT_MAT3X2: 0x8B67,\n    FLOAT_MAT3X4: 0x8B68,\n    FLOAT_MAT4X2: 0x8B69,\n    FLOAT_MAT4X3: 0x8B6A,\n    SAMPLER_2D_ARRAY: 0x8DC1,\n    SAMPLER_2D_ARRAY_SHADOW: 0x8DC4,\n    SAMPLER_CUBE_SHADOW: 0x8DC5,\n    UNSIGNED_INT: 0x1405,\n    UNSIGNED_INT_VEC2: 0x8DC6,\n    UNSIGNED_INT_VEC3: 0x8DC7,\n    UNSIGNED_INT_VEC4: 0x8DC8,\n    INT_SAMPLER_2D: 0x8DCA,\n    INT_SAMPLER_3D: 0x8DCB,\n    INT_SAMPLER_CUBE: 0x8DCC,\n    INT_SAMPLER_2D_ARRAY: 0x8DCF,\n    UNSIGNED_INT_SAMPLER_2D: 0x8DD2,\n    UNSIGNED_INT_SAMPLER_3D: 0x8DD3,\n    UNSIGNED_INT_SAMPLER_CUBE: 0x8DD4,\n    UNSIGNED_INT_SAMPLER_2D_ARRAY: 0x8DD7,\n    TEXTURE_2D: 0x0DE1,\n    TEXTURE_CUBE_MAP: 0x8513,\n    TEXTURE_3D: 0x806F,\n    TEXTURE_2D_ARRAY: 0x8C1A,\n    BYTE: 0x1400,\n    UNSIGNED_BYTE: 0x1401,\n    SHORT: 0x1402,\n    UNSIGNED_SHORT: 0x1403,\n    UNSIGNED_SHORT_4_4_4_4: 0x8033,\n    UNSIGNED_SHORT_5_5_5_1: 0x8034,\n    UNSIGNED_SHORT_5_6_5: 0x8363,\n    HALF_FLOAT: 0x140B,\n    UNSIGNED_INT_2_10_10_10_REV: 0x8368,\n    UNSIGNED_INT_10F_11F_11F_REV: 0x8C3B,\n    UNSIGNED_INT_5_9_9_9_REV: 0x8C3E,\n    FLOAT_32_UNSIGNED_INT_24_8_REV: 0x8DAD,\n    UNSIGNED_INT_24_8: 0x84FA\n};\n//# sourceMappingURL=contants.js.map\n\n/***/ }),\n/* 32 */,\n/* 33 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export makePainterCanvas */\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = makeShadeEntity;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = makeFormEntity;\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = makeSketchEntity;\n/* unused harmony export makeFlatSketchEntity */\n/* unused harmony export makeStaticLayerEntity */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = makeDrawingLayerEntity;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = makeEffectLayerEntity;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_tvs_renderer_dist_lib_painter__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_tvs_renderer_dist_lib_utils_context__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_predicates__ = __webpack_require__(34);\n\n\n\n\nfunction makePainterCanvas(windowSizeEntity, painterSettings) {\n    var canvas = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"b\" /* asyncStreamStart */])(null, function (send) {\n        var canvas = document.createElement('canvas');\n        document.body.appendChild(canvas);\n        send(canvas);\n        return function () {\n            document.body.removeChild(canvas);\n        };\n    });\n    var gl = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"c\" /* stream */])([canvas.HOT], __WEBPACK_IMPORTED_MODULE_2_tvs_renderer_dist_lib_utils_context__[\"a\" /* getContext */]);\n    var painter = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"a\" /* asyncStream */])([gl.HOT], function (send, gl) {\n        var p = Object(__WEBPACK_IMPORTED_MODULE_1_tvs_renderer_dist_lib_painter__[\"a\" /* create */])(gl);\n        send(p);\n        return p.destroy;\n    })\n        .accept(__WEBPACK_IMPORTED_MODULE_3__utils_predicates__[\"a\" /* unequal */]);\n    var canvasSize = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"c\" /* stream */])([canvas.HOT, windowSizeEntity.HOT], function (canvas) { return ({\n        width: canvas.clientWidth,\n        height: canvas.clientHeight\n    }); });\n    painter.react([canvasSize.HOT], function (p, _) { return p.resize(); }, 'updateSize');\n    if (painterSettings) {\n        painter.react([painterSettings.HOT], function (p, s) { return p.updateDrawSettings(s); });\n    }\n    return { canvas: canvas, painter: painter, gl: gl, canvasSize: canvasSize };\n}\nfunction makeShadeEntity(painter, data) {\n    var entity = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"a\" /* asyncStream */])([painter.HOT], function (send, painter) {\n        var shade = painter.createShade();\n        send(shade);\n        return shade.destroy;\n    });\n    if (data) {\n        entity.react([data.HOT], function (entity, data) { return entity.update(data); });\n    }\n    return entity;\n}\nfunction makeFormEntity(painter, data) {\n    var entity = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"a\" /* asyncStream */])([painter.HOT], function (send, painter) {\n        var form = painter.createForm();\n        send(form);\n        return form.destroy;\n    });\n    if (data) {\n        entity.react([data.HOT], function (entity, data) { return entity.update(data); });\n    }\n    return entity;\n}\nfunction makeSketchEntity(painter, data) {\n    var entity = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"a\" /* asyncStream */])([painter.HOT], function (send, painter) {\n        var sketch = painter.createSketch();\n        send(sketch);\n        return sketch.destroy;\n    });\n    if (data) {\n        entity.react([data.HOT], function (entity, data) { return entity.update(data); });\n    }\n    return entity;\n}\nfunction makeFlatSketchEntity(painter, data) {\n    var entity = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"a\" /* asyncStream */])([painter.HOT], function (send, painter) {\n        var sketch = painter.createFlatSketch();\n        send(sketch);\n        return sketch.destroy;\n    });\n    if (data) {\n        entity.react([data.HOT], function (entity, data) { return entity.update(data); });\n    }\n    return entity;\n}\nfunction makeStaticLayerEntity(painter, data) {\n    var entity = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"a\" /* asyncStream */])([painter.HOT], function (send, painter) {\n        var layer = painter.createStaticLayer();\n        send(layer);\n        return layer.destroy;\n    });\n    if (data) {\n        entity.react([data.HOT], function (entity, data) { return entity.update(data); });\n    }\n    return entity;\n}\nfunction makeDrawingLayerEntity(painter, data) {\n    var entity = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"a\" /* asyncStream */])([painter.HOT], function (send, painter) {\n        var layer = painter.createDrawingLayer();\n        send(layer);\n        return layer.destroy;\n    });\n    if (data) {\n        entity.react([data.HOT], function (entity, data) { return entity.update(data); });\n    }\n    return entity;\n}\nfunction makeEffectLayerEntity(painter, data) {\n    var entity = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"a\" /* asyncStream */])([painter.HOT], function (send, painter) {\n        var layer = painter.createEffectLayer();\n        send(layer);\n        return layer.destroy;\n    });\n    if (data) {\n        entity.react([data.HOT], function (entity, data) { return entity.update(data); });\n    }\n    return entity;\n}\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return unequal; });\n/* unused harmony export defined */\n/* unused harmony export notEmpty */\n/* unused harmony export and */\nvar unequal = function (a, b) { return a !== b; };\nvar defined = function (a) { return a != null; };\nvar notEmpty = function (a) { return a && a.length; };\nvar and = function (p1, p2) { return function (a, b) { return p1(a, b) && p2(a, b); }; };\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export getContext */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = makeClear;\n/* unused harmony export setBlendFunc */\n/* unused harmony export resizeCanvas */\nfunction getContext(canvas) {\n    var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n    if (gl == null) {\n        throw Error('Webgl context cannot be initialized');\n    }\n    return gl;\n}\nfunction makeClear(gl) {\n    var clearArray = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        clearArray[_i - 1] = arguments[_i];\n    }\n    return clearArray.reduce(function (res, item) { return res | gl[item.toUpperCase() + '_BUFFER_BIT']; }, 0);\n}\nfunction setBlendFunc(gl, blendOpts) {\n    gl.blendFunc.apply(gl, blendOpts.map(function (opt) { return gl[opt.toUpperCase()]; }));\n}\n/**\n * @param {HTMLCanvasElement} canvas The canvas to resize.\n * @param {number} [multiplier] optional `window.devicePixelRatio`.\n * @return {boolean} true if the canvas was resized.\n */\nfunction resizeCanvas(canvas, multiplier) {\n    if (multiplier === void 0) { multiplier = 1; }\n    multiplier = Math.max(1, multiplier);\n    var width = canvas.clientWidth * multiplier | 0;\n    var height = canvas.clientHeight * multiplier | 0;\n    if (canvas.width !== width ||\n        canvas.height !== height) {\n        canvas.width = width;\n        canvas.height = height;\n        return true;\n    }\n    return false;\n}\n//# sourceMappingURL=context.js.map\n\n/***/ }),\n/* 36 */,\n/* 37 */,\n/* 38 */,\n/* 39 */,\n/* 40 */,\n/* 41 */,\n/* 42 */,\n/* 43 */,\n/* 44 */,\n/* 45 */,\n/* 46 */,\n/* 47 */,\n/* 48 */,\n/* 49 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"scale\", function() { return scale; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"transforms\", function() { return transforms; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_gl_matrix__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_gl_matrix___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_gl_matrix__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_tvs_libs_dist_lib_math_vectors__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__screens__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_tvs_libs_dist_lib_utils_sequence__ = __webpack_require__(4);\n\n\n\n\n\nvar scale = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])([1.65, 1, 1]);\nvar transforms = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"d\" /* stream */])([__WEBPACK_IMPORTED_MODULE_3__screens__[\"rotations\"].HOT, __WEBPACK_IMPORTED_MODULE_3__screens__[\"positions\"].HOT, scale.HOT], function (rotations, positions, scale) {\n    return Object(__WEBPACK_IMPORTED_MODULE_4_tvs_libs_dist_lib_utils_sequence__[\"d\" /* zip */])(rotations, positions, function (rot, pos) {\n        var p = __WEBPACK_IMPORTED_MODULE_2_tvs_libs_dist_lib_math_vectors__[\"b\" /* mul */](pos, 1.045);\n        p[1] -= 1.9;\n        var t = __WEBPACK_IMPORTED_MODULE_1_gl_matrix__[\"mat4\"].fromTranslation(__WEBPACK_IMPORTED_MODULE_1_gl_matrix__[\"mat4\"].create(), p);\n        __WEBPACK_IMPORTED_MODULE_1_gl_matrix__[\"mat4\"].rotateY(t, t, rot);\n        __WEBPACK_IMPORTED_MODULE_1_gl_matrix__[\"mat4\"].scale(t, t, scale);\n        return t;\n    });\n});\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export add */\n/* unused harmony export addScalar */\n/* unused harmony export sub */\n/* unused harmony export subScalar */\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = mul;\n/* unused harmony export div */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = length;\n/* unused harmony export normalize */\n/* unused harmony export limit */\n/* unused harmony export isEqual */\nfunction add(vec1, vec2) {\n    var results = [];\n    for (var i = 0; i < vec1.length; i++) {\n        results[i] = vec1[i] + vec2[i];\n    }\n    return results;\n}\nfunction addScalar(vec, scalar) {\n    var results = [];\n    for (var i = 0; i < vec.length; i++) {\n        results[i] = vec[i] + scalar;\n    }\n    return results;\n}\nfunction sub(vec1, vec2) {\n    var results = [];\n    for (var i = 0; i < vec1.length; i++) {\n        results[i] = vec1[i] - vec2[i];\n    }\n    return results;\n}\nfunction subScalar(vec, scalar) {\n    var results = [];\n    for (var i = 0; i < vec.length; i++) {\n        results[i] = vec[i] - scalar;\n    }\n    return results;\n}\nfunction mul(vec, scalar) {\n    var results = [];\n    for (var i = 0; i < vec.length; i++) {\n        results[i] = vec[i] * scalar;\n    }\n    return results;\n}\nfunction div(vec, scalar) {\n    var results = [];\n    for (var i = 0; i < vec.length; i++) {\n        results[i] = vec[i] / scalar;\n    }\n    return results;\n}\nfunction length(vec) {\n    var sum = 0;\n    for (var i = 0; i < vec.length; i++) {\n        var val = vec[i];\n        sum += val * val;\n    }\n    return Math.sqrt(sum);\n}\nfunction normalize(vec) {\n    return div(vec, length(vec));\n}\nfunction limit(vec, maxLenght) {\n    if (maxLenght < length(vec)) {\n        return mul(normalize(vec), maxLenght);\n    }\n    else {\n        return vec;\n    }\n}\nfunction isEqual(vec1, vec2) {\n    if (vec1.length !== vec2.length)\n        return false;\n    for (var i = 0; i < vec1.length; i++) {\n        if (vec1[i] !== vec2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n//# sourceMappingURL=vectors.js.map\n\n/***/ }),\n/* 51 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"position\", function() { return position; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rotX\", function() { return rotX; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rotY\", function() { return rotY; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rotation\", function() { return rotation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"view\", function() { return view; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"perspectiveSettings\", function() { return perspectiveSettings; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"perspective\", function() { return perspective; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"moveSpeed\", function() { return moveSpeed; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"lookSpeed\", function() { return lookSpeed; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"moveForward\", function() { return moveForward; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"moveLeft\", function() { return moveLeft; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"mouseDrag\", function() { return mouseDrag; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"dragDeltas\", function() { return dragDeltas; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"groundMirrorView\", function() { return groundMirrorView; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_tvs_libs_dist_lib_vr_flow_camera__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__painter__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_tvs_libs_dist_lib_events_keyboard__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_gl_matrix__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_gl_matrix___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_gl_matrix__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__events__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__state_ground__ = __webpack_require__(22);\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\n\n\n\n\n\n\n\nvar position = (_a = __WEBPACK_IMPORTED_MODULE_1_tvs_libs_dist_lib_vr_flow_camera__[\"a\" /* makeFirstPersonView */](), _a.position), rotX = _a.rotX, rotY = _a.rotY, rotation = _a.rotation, view = _a.view;\nvar perspectiveSettings = (_b = __WEBPACK_IMPORTED_MODULE_1_tvs_libs_dist_lib_vr_flow_camera__[\"b\" /* makePerspective */](__WEBPACK_IMPORTED_MODULE_2__painter__[\"canvasSize\"]), _b.perspectiveSettings), perspective = _b.perspective;\nperspectiveSettings.updateVal(function (s) { return (__assign({}, s, { fovy: Math.PI * 0.4 })); });\nvar moveSpeed = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])(0.05);\nvar lookSpeed = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])(0.002);\nvar moveForward = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"a\" /* asyncStream */])([__WEBPACK_IMPORTED_MODULE_5__events__[\"keys\"].COLD, moveSpeed.COLD, __WEBPACK_IMPORTED_MODULE_5__events__[\"tick\"].HOT], function (send, keys, speed, _) {\n    if (!keys)\n        return;\n    if (keys[__WEBPACK_IMPORTED_MODULE_3_tvs_libs_dist_lib_events_keyboard__[\"a\" /* Keys */].UP] || keys[__WEBPACK_IMPORTED_MODULE_3_tvs_libs_dist_lib_events_keyboard__[\"a\" /* Keys */].W]) {\n        send(speed);\n    }\n    if (keys[__WEBPACK_IMPORTED_MODULE_3_tvs_libs_dist_lib_events_keyboard__[\"a\" /* Keys */].DOWN] || keys[__WEBPACK_IMPORTED_MODULE_3_tvs_libs_dist_lib_events_keyboard__[\"a\" /* Keys */].S]) {\n        send(-speed);\n    }\n});\nvar moveLeft = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"a\" /* asyncStream */])([__WEBPACK_IMPORTED_MODULE_5__events__[\"keys\"].COLD, moveSpeed.COLD, __WEBPACK_IMPORTED_MODULE_5__events__[\"tick\"].HOT], function (send, keys, speed) {\n    if (!keys)\n        return;\n    if (keys[__WEBPACK_IMPORTED_MODULE_3_tvs_libs_dist_lib_events_keyboard__[\"a\" /* Keys */].LEFT] || keys[__WEBPACK_IMPORTED_MODULE_3_tvs_libs_dist_lib_events_keyboard__[\"a\" /* Keys */].A]) {\n        send(speed);\n    }\n    if (keys[__WEBPACK_IMPORTED_MODULE_3_tvs_libs_dist_lib_events_keyboard__[\"a\" /* Keys */].RIGHT] || keys[__WEBPACK_IMPORTED_MODULE_3_tvs_libs_dist_lib_events_keyboard__[\"a\" /* Keys */].D]) {\n        send(-speed);\n    }\n});\nvar mouseDrag = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"d\" /* stream */])([__WEBPACK_IMPORTED_MODULE_5__events__[\"mouse\"].HOT], function (m) { return ({\n    x: m.drag.x,\n    y: m.drag.y\n}); });\nvar dragDeltas = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"c\" /* delta */])(mouseDrag, function (n, o) { return ({\n    x: n.x === 0 ? n.x : o.x - n.x,\n    y: n.y === 0 ? n.y : o.y - n.y\n}); })\n    .accept(function (drag) { return !!(drag && (drag.x || drag.y)); });\nrotX.react([dragDeltas.HOT, lookSpeed.COLD], function (rot, drag, speed) { return rot + drag.y * speed; });\nrotY.react([dragDeltas.HOT, lookSpeed.COLD], function (rot, drag, speed) { return rot + drag.x * speed; });\nposition.react([moveLeft.HOT, rotation.COLD], function (pos, left, rotation) {\n    var v = __WEBPACK_IMPORTED_MODULE_4_gl_matrix__[\"vec3\"].fromValues(rotation.rotY[0], rotation.rotY[1], rotation.rotY[2]);\n    return __WEBPACK_IMPORTED_MODULE_4_gl_matrix__[\"vec3\"].add(pos, pos, __WEBPACK_IMPORTED_MODULE_4_gl_matrix__[\"vec3\"].scale(v, v, -left));\n});\nposition.react([moveForward.HOT, rotation.COLD], function (pos, forward, rotation) {\n    var v = __WEBPACK_IMPORTED_MODULE_4_gl_matrix__[\"vec3\"].fromValues(rotation.rotY[8], rotation.rotY[9], rotation.rotY[10]);\n    return __WEBPACK_IMPORTED_MODULE_4_gl_matrix__[\"vec3\"].add(pos, pos, __WEBPACK_IMPORTED_MODULE_4_gl_matrix__[\"vec3\"].scale(v, v, -forward));\n});\nvar groundMirrorView = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])(__WEBPACK_IMPORTED_MODULE_4_gl_matrix__[\"mat4\"].create())\n    .react([view.HOT, __WEBPACK_IMPORTED_MODULE_6__state_ground__[\"mirrorMatrix\"].HOT], __WEBPACK_IMPORTED_MODULE_4_gl_matrix__[\"mat4\"].multiply);\nvar _a, _b;\n\n\n/***/ }),\n/* 52 */,\n/* 53 */,\n/* 54 */,\n/* 55 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"blurStrength\", function() { return blurStrength; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"layersData\", function() { return layersData; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__ = __webpack_require__(0);\n\nvar blurStrength = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])(10);\nvar layersData = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"d\" /* stream */])([blurStrength.HOT], function (strength) {\n    var passData = [];\n    while (strength >= 1) {\n        passData.push({\n            direction: 0,\n            strength: strength\n        });\n        passData.push({\n            direction: 1,\n            strength: strength\n        });\n        strength /= 2;\n    }\n    return passData;\n});\n\n\n/***/ }),\n/* 56 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"size\", function() { return size; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"segments\", function() { return segments; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"geometry\", function() { return geometry; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_geo_3d_box__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_geo_3d_box___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_geo_3d_box__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_tvs_renderer_dist_lib_utils_stackgl__ = __webpack_require__(30);\n\n\n\nvar size = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])([10, 14, 2]);\nvar segments = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])([5, 7, 1]);\nvar geometry = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"d\" /* stream */])([size.HOT, segments.HOT], function (size, segments) { return Object(__WEBPACK_IMPORTED_MODULE_2_tvs_renderer_dist_lib_utils_stackgl__[\"a\" /* convertStackGLGeometry */])(__WEBPACK_IMPORTED_MODULE_1_geo_3d_box___default()({ size: size, segments: segments })); });\n\n\n/***/ }),\n/* 57 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"props\", function() { return props; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"geometry\", function() { return geometry; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tvs_renderer_dist_lib_utils_geometry_plane__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_tvs_flow_dist_lib_utils_entity_reference__ = __webpack_require__(0);\n\n\nvar props = Object(__WEBPACK_IMPORTED_MODULE_1_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])({\n    width: 10,\n    height: 10,\n    segX: 5,\n    segY: 5\n});\nvar geometry = Object(__WEBPACK_IMPORTED_MODULE_1_tvs_flow_dist_lib_utils_entity_reference__[\"d\" /* stream */])([props.HOT], function (props) { return Object(__WEBPACK_IMPORTED_MODULE_0_tvs_renderer_dist_lib_utils_geometry_plane__[\"a\" /* plane */])(props.width, props.height, props.segX, props.segY); });\n\n\n/***/ }),\n/* 58 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"frag\", function() { return frag; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ground_reflection_frag_glsl__ = __webpack_require__(103);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ground_reflection_frag_glsl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__ground_reflection_frag_glsl__);\n\n\nvar frag = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])(__WEBPACK_IMPORTED_MODULE_1__ground_reflection_frag_glsl___default.a).reset();\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"spec\", function() { return spec; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ground_vert_glsl__ = __webpack_require__(104);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ground_vert_glsl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__ground_vert_glsl__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ground_frag_glsl__ = __webpack_require__(105);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ground_frag_glsl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__ground_frag_glsl__);\n\n\n\nvar spec = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])({\n    vert: __WEBPACK_IMPORTED_MODULE_1__ground_vert_glsl___default.a, frag: __WEBPACK_IMPORTED_MODULE_2__ground_frag_glsl___default.a\n}).reset();\n\n\n/***/ }),\n/* 60 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"spec\", function() { return spec; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__object_vert_glsl__ = __webpack_require__(106);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__object_vert_glsl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__object_vert_glsl__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__object_frag_glsl__ = __webpack_require__(107);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__object_frag_glsl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__object_frag_glsl__);\n\n\n\nvar spec = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])({\n    vert: __WEBPACK_IMPORTED_MODULE_1__object_vert_glsl___default.a, frag: __WEBPACK_IMPORTED_MODULE_2__object_frag_glsl___default.a\n}).reset();\n\n\n/***/ }),\n/* 61 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"spec\", function() { return spec; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__screen_vert_glsl__ = __webpack_require__(108);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__screen_vert_glsl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__screen_vert_glsl__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__screen_frag_glsl__ = __webpack_require__(109);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__screen_frag_glsl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__screen_frag_glsl__);\n\n\n\nvar spec = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"f\" /* val */])({\n    vert: __WEBPACK_IMPORTED_MODULE_1__screen_vert_glsl___default.a, frag: __WEBPACK_IMPORTED_MODULE_2__screen_frag_glsl___default.a\n}).reset();\n\n\n/***/ }),\n/* 62 */,\n/* 63 */,\n/* 64 */,\n/* 65 */,\n/* 66 */,\n/* 67 */,\n/* 68 */,\n/* 69 */,\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(71);\n\n\n/***/ }),\n/* 71 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__flow__ = __webpack_require__(72);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_shared_utils_reload__ = __webpack_require__(18);\n\n\nvar graphModules = __webpack_require__(81);\n__WEBPACK_IMPORTED_MODULE_0__flow__[\"a\" /* flow */].setDebug(true);\nObject(__WEBPACK_IMPORTED_MODULE_1_shared_utils_reload__[\"a\" /* updateFlow */])(__WEBPACK_IMPORTED_MODULE_0__flow__[\"a\" /* flow */], graphModules);\n__WEBPACK_IMPORTED_MODULE_0__flow__[\"b\" /* tools */].updateFlow(__WEBPACK_IMPORTED_MODULE_0__flow__[\"a\" /* flow */]);\nsetTimeout(function () {\n    __WEBPACK_IMPORTED_MODULE_0__flow__[\"a\" /* flow */].setDebug(false);\n}, 1000);\nif (false) {\n    module.hot.accept(graphModules.id, function () {\n        var newGraphModules = require.context('./graph', true, /\\.ts$/);\n        updateFlow(flow, newGraphModules);\n        tools.updateFlow(flow);\n    });\n}\n\n\n/***/ }),\n/* 72 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return flow; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return tools; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_runtime__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_tvs_flow_tools__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_tvs_flow_tools___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_tvs_flow_tools__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__nodes_json__ = __webpack_require__(74);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__nodes_json___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__nodes_json__);\n\n\n\nvar flow = __WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_runtime__[\"a\" /* create */]();\nvar tools = __WEBPACK_IMPORTED_MODULE_1_tvs_flow_tools__[\"ui\"].start('hommage', { graph: __WEBPACK_IMPORTED_MODULE_2__nodes_json___default.a });\nwindow['flow'] = flow;\nwindow['tools'] = tools;\n\n\n/***/ }),\n/* 73 */,\n/* 74 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"events.tick\":{\"x\":76.37013521738253,\"y\":967.8899375261426},\"events.tickStep\":{\"x\":-88.54211021864192,\"y\":1149.5365811578254},\"events.tickCounter\":{\"x\":-86.42228704674415,\"y\":1025.2726218196487},\"events.slowTick\":{\"x\":-89.39012731866174,\"y\":909.1161590323211},\"events.windowSize\":{\"x\":-321.5586674242749,\"y\":75.69464521831355},\"events.mouse\":{\"x\":84.64912924067285,\"y\":1160.0565503448497},\"events.keys\":{\"x\":79.03973887451365,\"y\":1314.3952534337925},\"events.mouseDrag\":{\"x\":474.4023259424609,\"y\":1322.7508623644567},\"state.ground.position\":{\"x\":592.7404100568693,\"y\":624.031846800227},\"state.ground.normal\":{\"x\":504.7884520353441,\"y\":714.5222912429182},\"state.ground.scale\":{\"x\":797.9947351233101,\"y\":630.5047118228944},\"state.ground.transform\":{\"x\":698.2485552304572,\"y\":559.4338492923177},\"state.ground.planeEquation\":{\"x\":631.9337813902545,\"y\":724.2228367000495},\"state.ground.mirrorMatrix\":{\"x\":715.5861218389874,\"y\":714.071908209991},\"state.pedestals.scale\":{\"x\":647.253423275873,\"y\":364.49536428853844},\"state.pedestals.transforms\":{\"x\":564.9359466056333,\"y\":362.17044822954483},\"state.screens.radius\":{\"x\":406.8475962909673,\"y\":951.3303280816247},\"state.screens.height\":{\"x\":493.91266724747953,\"y\":935.1046468058489},\"state.screens.scale\":{\"x\":355.988578249499,\"y\":690.4597199966503},\"state.screens.rotations\":{\"x\":317.1936869081563,\"y\":849.2562322426841},\"state.screens.positions\":{\"x\":445.62061738472056,\"y\":832.93919050267},\"state.screens.transforms\":{\"x\":247.26046803440056,\"y\":730.7944432890839},\"videos.names\":{\"x\":-240.9605196924283,\"y\":871.0833947024504},\"videos.videosUrl\":{\"x\":-347.41035113278747,\"y\":626.539953383678},\"videos.loadTimeout\":{\"x\":-348.6475316951279,\"y\":717.3067731881337},\"videos.videos\":{\"x\":-230.12750364632961,\"y\":751.6924508089568},\"view.camera.position\":{\"x\":790.3398564642989,\"y\":909.0243066769095},\"view.camera.yaw\":{\"x\":979.7292995097882,\"y\":1024.1723831431384},\"view.camera.pitch\":{\"x\":866.931176093401,\"y\":1017.613940816167},\"view.camera.yawQuat\":{\"x\":950.7250700056459,\"y\":985.2994559326827},\"view.camera.pitchQuat\":{\"x\":848.6194783856471,\"y\":990.4232465306249},\"view.camera.rotationQuat\":{\"x\":886.0279826893238,\"y\":862.2376098902693},\"view.camera.view\":{\"x\":846.7302436434592,\"y\":718.659045690319},\"view.camera.fovy\":{\"x\":909.7380213367651,\"y\":397.25748549932973},\"view.camera.aspect\":{\"x\":828.8830993669557,\"y\":306.5148271889604},\"view.camera.near\":{\"x\":923.4260311370798,\"y\":491.02928225574874},\"view.camera.far\":{\"x\":855.5649608378067,\"y\":540.3694536732753},\"view.camera.perspective\":{\"x\":781.7706423474369,\"y\":434.0524770138193},\"view.camera.moveSpeed\":{\"x\":597.9945683686861,\"y\":1143.371211706991},\"view.camera.lookSpeed\":{\"x\":889.8335434674065,\"y\":1198.7719519060117},\"view.camera.moveForward\":{\"x\":648.3435930868013,\"y\":1013.6221826793449},\"view.camera.moveLeft\":{\"x\":733.9361829891851,\"y\":1068.4109397705483},\"view.camera.groundMirrorView\":{\"x\":675.6861671117312,\"y\":875.9000552412393},\"view.context.context\":{\"x\":828.1487644249696,\"y\":444.6804810288013},\"view.context.canvas\":{\"x\":562.0466731353072,\"y\":1007.8653299673556},\"view.context.canvasSize\":{\"x\":562.1710007262274,\"y\":823.4757086322784},\"view.effects.ground-reflection.idPrefix\":{\"x\":522.4912120851072,\"y\":232.74836492468168},\"view.effects.ground-reflection.passes\":{\"x\":590.0198178576956,\"y\":149.12624196425492},\"view.effects.ground-reflection.ids\":{\"x\":680.4206899259791,\"y\":292.7584523164205},\"view.effects.ground-reflection.layersData\":{\"x\":-192.28551172745892,\"y\":348.71286741648436},\"view.geometries.box.id\":{\"x\":1029.5525109457433,\"y\":472.68211532913733},\"view.geometries.box.size\":{\"x\":-159.69285555560447,\"y\":-444.68327993863016},\"view.geometries.box.segments\":{\"x\":-246.5105025242645,\"y\":-467.50383894006865},\"view.geometries.box.geometry\":{\"x\":-201.86152502274976,\"y\":-325.56369819511843},\"view.geometries.plane.id\":{\"x\":953.8170285043042,\"y\":595.8553833490097},\"view.geometries.plane.props\":{\"x\":-20.775144708776157,\"y\":-444.4948568850864},\"view.geometries.plane.geometry\":{\"x\":-11.706444326645107,\"y\":-340.5392636976263},\"view.renderer.settings\":{\"x\":1042.9195868646505,\"y\":726.4928330927078},\"view.renderer.groundId\":{\"x\":884.723659471565,\"y\":591.3077890907022},\"view.renderer.sceneLayerId\":{\"x\":939.1584036320023,\"y\":682.0469810481528},\"view.renderer.mirrorSceneLayerId\":{\"x\":828.1793170264023,\"y\":637.8534834855615},\"view.renderer.layers\":{\"x\":131.8588844592779,\"y\":255.05405553172773},\"view.renderer.render\":{\"x\":827.0244621752382,\"y\":737.5311206996205},\"view.shaders.ground-reflection.id\":{\"x\":1109.0648188588332,\"y\":443.256993660846},\"view.shaders.ground-reflection.spec\":{\"x\":1097.5023436070187,\"y\":379.8357597038137},\"view.shaders.ground.id\":{\"x\":951.4119381195983,\"y\":392.2938787000862},\"view.shaders.ground.spec\":{\"x\":117.06845546598672,\"y\":-352.3781185348165},\"view.shaders.object.id\":{\"x\":810.5860490583541,\"y\":237.59669964236718},\"view.shaders.object.spec\":{\"x\":379.0755217658776,\"y\":-352.52570544330433},\"view.shaders.screen.id\":{\"x\":957.4036693689073,\"y\":252.17528500161927},\"view.shaders.screen.spec\":{\"x\":263.6191586482107,\"y\":-351.18688610339007},\"view.effects.ground-reflection.blurStrength\":{\"x\":-345.60366357546985,\"y\":327.67609327248886},\"view.painter.canvas\":{\"x\":-319.48762399373373,\"y\":-62.03968334452382},\"view.painter.painter\":{\"x\":138.78817453681478,\"y\":97.5842379795651},\"view.painter.gl\":{\"x\":-125.42149986426554,\"y\":-59.55606229289543},\"view.painter.canvasSize\":{\"x\":-22.430947669878467,\"y\":100.40913184342033},\"view.painter.settings\":{\"x\":430.98345411350965,\"y\":94.05643707740764},\"view.renderer.boxForm\":{\"x\":-200.55316140856522,\"y\":-241.68856914295444},\"view.renderer.planeForm\":{\"x\":-12.781744194991061,\"y\":-235.45380938571012},\"view.renderer.groundShade\":{\"x\":118.23712320620626,\"y\":-234.85350411335045},\"view.renderer.objectShade\":{\"x\":378.4782987226048,\"y\":-243.34962202464104},\"view.renderer.screenShade\":{\"x\":263.5664421644574,\"y\":-242.52129725993902},\"view.renderer.videoTextures\":{\"x\":-67.54484217344844,\"y\":726.1716072493961},\"view.renderer.groundSketch\":{\"x\":301.02434057322114,\"y\":260.69070271021934},\"view.renderer.screenSketch\":{\"x\":313.87183327383883,\"y\":521.8017717630416},\"view.renderer.pedestalSketch\":{\"x\":307.5084662318118,\"y\":390.7504457136656},\"view.renderer.drawSettings\":{\"x\":-149.98267232831833,\"y\":523.5973752265169},\"view.renderer.sceneLayer\":{\"x\":-61.68510190196802,\"y\":443.23190846334165},\"view.renderer.mirrorSceneLayer\":{\"x\":-67.04531865411052,\"y\":585.1263787346121},\"view.renderer.effectSettings\":{\"x\":-194.8937377441701,\"y\":173.30614401111063},\"view.renderer.effectLayer\":{\"x\":-57.52895070372746,\"y\":310.4618039969952},\"view.shaders.ground-reflection.frag\":{\"x\":-196.04242909270076,\"y\":269.6326479926565},\"view.camera.perspectiveSettings\":{\"x\":787.2897812836087,\"y\":302.1874485076259},\"view.camera.rotation\":{\"x\":916.7472111414572,\"y\":897.3703048642972},\"view.camera.rotX\":{\"x\":976.2769558185639,\"y\":1023.9768601392549},\"view.camera.rotY\":{\"x\":869.7332379459998,\"y\":1020.3363808980113}}\n\n/***/ }),\n/* 75 */,\n/* 76 */,\n/* 77 */,\n/* 78 */,\n/* 79 */,\n/* 80 */,\n/* 81 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar map = {\n\t\"./events.ts\": 8,\n\t\"./state/ground.ts\": 22,\n\t\"./state/pedestals.ts\": 49,\n\t\"./state/screens.ts\": 25,\n\t\"./videos.ts\": 9,\n\t\"./view/camera.ts\": 51,\n\t\"./view/effects/ground-reflection.ts\": 55,\n\t\"./view/geometries/box.ts\": 56,\n\t\"./view/geometries/plane.ts\": 57,\n\t\"./view/painter.ts\": 27,\n\t\"./view/renderer.ts\": 102,\n\t\"./view/shaders/ground-reflection.ts\": 58,\n\t\"./view/shaders/ground.ts\": 59,\n\t\"./view/shaders/object.ts\": 60,\n\t\"./view/shaders/screen.ts\": 61\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 81;\n\n/***/ }),\n/* 82 */,\n/* 83 */,\n/* 84 */,\n/* 85 */,\n/* 86 */,\n/* 87 */,\n/* 88 */,\n/* 89 */,\n/* 90 */,\n/* 91 */,\n/* 92 */,\n/* 93 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export cartesianToPolar2D */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = polarToCartesian2D;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__vectors__ = __webpack_require__(50);\n\nfunction cartesianToPolar2D(v) {\n    return [Object(__WEBPACK_IMPORTED_MODULE_0__vectors__[\"a\" /* length */])(v), Math.atan2(v[1], v[0])];\n}\nfunction polarToCartesian2D(coords) {\n    var r = coords[0], phi = coords[1];\n    return [r * Math.cos(phi), r * Math.sin(phi)];\n}\n//# sourceMappingURL=coords.js.map\n\n/***/ }),\n/* 94 */,\n/* 95 */,\n/* 96 */,\n/* 97 */,\n/* 98 */,\n/* 99 */,\n/* 100 */,\n/* 101 */,\n/* 102 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"boxForm\", function() { return boxForm; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"planeForm\", function() { return planeForm; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"groundShade\", function() { return groundShade; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"objectShade\", function() { return objectShade; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"screenShade\", function() { return screenShade; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"videoTextures\", function() { return videoTextures; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"groundSketch\", function() { return groundSketch; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"screenSketch\", function() { return screenSketch; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"pedestalSketch\", function() { return pedestalSketch; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"drawSettings\", function() { return drawSettings; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"sceneLayer\", function() { return sceneLayer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"mirrorSceneLayer\", function() { return mirrorSceneLayer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"effectSettings\", function() { return effectSettings; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"effectLayer\", function() { return effectLayer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"layers\", function() { return layers; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_homage_graph_view_painter__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_tvs_libs_lib_vr_flow_painter_utils__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__events__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__videos__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_homage_graph_view_camera__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_homage_graph_view_geometries_box__ = __webpack_require__(56);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_homage_graph_view_geometries_plane__ = __webpack_require__(57);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_homage_graph_view_shaders_ground_reflection__ = __webpack_require__(58);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_homage_graph_view_shaders_ground__ = __webpack_require__(59);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_homage_graph_view_shaders_object__ = __webpack_require__(60);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_homage_graph_view_shaders_screen__ = __webpack_require__(61);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__state_ground__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__state_screens__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__state_pedestals__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__effects_ground_reflection__ = __webpack_require__(55);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16_tvs_libs_dist_lib_utils_sequence__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17_tvs_renderer_dist_lib_utils_context__ = __webpack_require__(35);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18_tvs_libs_dist_lib_utils_predicates__ = __webpack_require__(54);\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar boxForm = Object(__WEBPACK_IMPORTED_MODULE_2_tvs_libs_lib_vr_flow_painter_utils__[\"c\" /* makeFormEntity */])(__WEBPACK_IMPORTED_MODULE_1_homage_graph_view_painter__[\"painter\"], __WEBPACK_IMPORTED_MODULE_6_homage_graph_view_geometries_box__[\"geometry\"]);\nvar planeForm = Object(__WEBPACK_IMPORTED_MODULE_2_tvs_libs_lib_vr_flow_painter_utils__[\"c\" /* makeFormEntity */])(__WEBPACK_IMPORTED_MODULE_1_homage_graph_view_painter__[\"painter\"], __WEBPACK_IMPORTED_MODULE_7_homage_graph_view_geometries_plane__[\"geometry\"]);\nvar groundShade = Object(__WEBPACK_IMPORTED_MODULE_2_tvs_libs_lib_vr_flow_painter_utils__[\"d\" /* makeShadeEntity */])(__WEBPACK_IMPORTED_MODULE_1_homage_graph_view_painter__[\"painter\"], __WEBPACK_IMPORTED_MODULE_9_homage_graph_view_shaders_ground__[\"spec\"]);\nvar objectShade = Object(__WEBPACK_IMPORTED_MODULE_2_tvs_libs_lib_vr_flow_painter_utils__[\"d\" /* makeShadeEntity */])(__WEBPACK_IMPORTED_MODULE_1_homage_graph_view_painter__[\"painter\"], __WEBPACK_IMPORTED_MODULE_10_homage_graph_view_shaders_object__[\"spec\"]);\nvar screenShade = Object(__WEBPACK_IMPORTED_MODULE_2_tvs_libs_lib_vr_flow_painter_utils__[\"d\" /* makeShadeEntity */])(__WEBPACK_IMPORTED_MODULE_1_homage_graph_view_painter__[\"painter\"], __WEBPACK_IMPORTED_MODULE_11_homage_graph_view_shaders_screen__[\"spec\"]);\nvar videoTextures = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"d\" /* stream */])([__WEBPACK_IMPORTED_MODULE_1_homage_graph_view_painter__[\"painter\"].HOT, __WEBPACK_IMPORTED_MODULE_4__videos__[\"names\"].HOT], function (painter, videos) { return videos.map(function () { return painter.createStaticLayer().update({\n    flipY: true,\n    minFilter: 'LINEAR',\n    wrap: 'CLAMP_TO_EDGE'\n}); }); })\n    .react([__WEBPACK_IMPORTED_MODULE_4__videos__[\"videos\"].HOT, __WEBPACK_IMPORTED_MODULE_3__events__[\"slowTick\"].HOT], function (ts, vs, _) {\n    ts.forEach(function (t, i) { return t.update({ asset: vs[i] }); });\n}).accept(__WEBPACK_IMPORTED_MODULE_18_tvs_libs_dist_lib_utils_predicates__[\"a\" /* defined */]);\nvar groundSketch = Object(__WEBPACK_IMPORTED_MODULE_2_tvs_libs_lib_vr_flow_painter_utils__[\"e\" /* makeSketchEntity */])(__WEBPACK_IMPORTED_MODULE_1_homage_graph_view_painter__[\"painter\"])\n    .react([groundShade.HOT, planeForm.HOT, __WEBPACK_IMPORTED_MODULE_12__state_ground__[\"transform\"].HOT, __WEBPACK_IMPORTED_MODULE_1_homage_graph_view_painter__[\"canvasSize\"].HOT], function (sketch, shade, form, transform, size) { return sketch.update({\n    form: form, shade: shade,\n    uniforms: {\n        transform: transform,\n        reflection: null,\n        size: [size.width, size.height]\n    }\n}); });\nvar screenSketch = Object(__WEBPACK_IMPORTED_MODULE_2_tvs_libs_lib_vr_flow_painter_utils__[\"e\" /* makeSketchEntity */])(__WEBPACK_IMPORTED_MODULE_1_homage_graph_view_painter__[\"painter\"])\n    .react([screenShade.HOT, planeForm.HOT, __WEBPACK_IMPORTED_MODULE_13__state_screens__[\"transforms\"].HOT, videoTextures.HOT], function (sketch, shade, form, transforms, textures) { return sketch.update({\n    form: form, shade: shade,\n    uniforms: Object(__WEBPACK_IMPORTED_MODULE_16_tvs_libs_dist_lib_utils_sequence__[\"d\" /* zip */])(transforms, textures, function (transform, tex) { return ({\n        transform: transform,\n        video: tex.texture()\n    }); })\n}); });\nvar pedestalSketch = Object(__WEBPACK_IMPORTED_MODULE_2_tvs_libs_lib_vr_flow_painter_utils__[\"e\" /* makeSketchEntity */])(__WEBPACK_IMPORTED_MODULE_1_homage_graph_view_painter__[\"painter\"])\n    .react([objectShade.HOT, boxForm.HOT, __WEBPACK_IMPORTED_MODULE_14__state_pedestals__[\"transforms\"].HOT], function (sketch, shade, form, transforms) { return sketch.update({\n    form: form, shade: shade,\n    uniforms: transforms.map(function (transform) { return ({\n        transform: transform\n    }); })\n}); });\nvar drawSettings = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"d\" /* stream */])([__WEBPACK_IMPORTED_MODULE_1_homage_graph_view_painter__[\"gl\"].HOT], function (gl) { return ({\n    clearBits: Object(__WEBPACK_IMPORTED_MODULE_17_tvs_renderer_dist_lib_utils_context__[\"a\" /* makeClear */])(gl, 'color', 'depth')\n}); });\nvar sceneLayer = Object(__WEBPACK_IMPORTED_MODULE_2_tvs_libs_lib_vr_flow_painter_utils__[\"a\" /* makeDrawingLayerEntity */])(__WEBPACK_IMPORTED_MODULE_1_homage_graph_view_painter__[\"painter\"])\n    .react([\n    screenSketch.HOT,\n    pedestalSketch.HOT,\n    groundSketch.HOT,\n    drawSettings.HOT,\n    __WEBPACK_IMPORTED_MODULE_5_homage_graph_view_camera__[\"view\"].COLD,\n    __WEBPACK_IMPORTED_MODULE_5_homage_graph_view_camera__[\"perspective\"].COLD\n], function (layer, screens, pedestals, ground, settings, view, projection) { return layer.update({\n    sketches: [screens, pedestals, ground],\n    drawSettings: settings,\n    uniforms: {\n        view: view, projection: projection,\n        withDistance: 0,\n        groundHeight: 0\n    }\n}); });\nvar mirrorSceneLayer = Object(__WEBPACK_IMPORTED_MODULE_2_tvs_libs_lib_vr_flow_painter_utils__[\"a\" /* makeDrawingLayerEntity */])(__WEBPACK_IMPORTED_MODULE_1_homage_graph_view_painter__[\"painter\"])\n    .react([\n    screenSketch.HOT,\n    pedestalSketch.HOT,\n    __WEBPACK_IMPORTED_MODULE_12__state_ground__[\"position\"].HOT,\n    drawSettings.HOT,\n    __WEBPACK_IMPORTED_MODULE_5_homage_graph_view_camera__[\"groundMirrorView\"].COLD,\n    __WEBPACK_IMPORTED_MODULE_5_homage_graph_view_camera__[\"perspective\"].COLD\n], function (layer, screens, pedestals, groundPos, settings, view, projection) { return layer.update({\n    flipY: true,\n    sketches: [screens, pedestals],\n    drawSettings: settings,\n    uniforms: {\n        view: view, projection: projection,\n        withDistance: 1,\n        groundHeight: groundPos[1]\n    }\n}); });\nvar effectSettings = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"d\" /* stream */])([__WEBPACK_IMPORTED_MODULE_1_homage_graph_view_painter__[\"gl\"].HOT], function (gl) { return ({\n    disable: [gl.DEPTH_TEST]\n}); });\nvar effectLayer = Object(__WEBPACK_IMPORTED_MODULE_2_tvs_libs_lib_vr_flow_painter_utils__[\"b\" /* makeEffectLayerEntity */])(__WEBPACK_IMPORTED_MODULE_1_homage_graph_view_painter__[\"painter\"])\n    .react([\n    __WEBPACK_IMPORTED_MODULE_15__effects_ground_reflection__[\"layersData\"].HOT,\n    __WEBPACK_IMPORTED_MODULE_8_homage_graph_view_shaders_ground_reflection__[\"frag\"].HOT,\n    __WEBPACK_IMPORTED_MODULE_1_homage_graph_view_painter__[\"canvasSize\"].HOT,\n    effectSettings.HOT\n], function (layer, layerData, frag, size, settings) { return layer.update({\n    frag: frag,\n    drawSettings: settings,\n    uniforms: layerData.map(function (d) { return (__assign({ source: null }, d, { size: [size.width, size.height] })); })\n}); });\nvar layers = Object(__WEBPACK_IMPORTED_MODULE_0_tvs_flow_dist_lib_utils_entity_reference__[\"d\" /* stream */])([mirrorSceneLayer.HOT, effectLayer.HOT, sceneLayer.HOT], function (mirrorScene, effect, scene) { return [\n    [mirrorScene, true],\n    [effect, true],\n    [scene, true]\n].filter(function (l) { return l[1]; }).map(function (l) { return l[0]; }); });\n__WEBPACK_IMPORTED_MODULE_1_homage_graph_view_painter__[\"painter\"].react([layers.COLD, __WEBPACK_IMPORTED_MODULE_3__events__[\"tick\"].HOT], function (p, layers, _) { return p.compose.apply(null, layers); });\n\n\n/***/ }),\n/* 103 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"precision mediump float;\\n#define GLSLIFY 1\\nvec4 blur9_1_0(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\\n  vec4 color = vec4(0.0);\\n  vec2 off1 = vec2(1.3846153846) * direction;\\n  vec2 off2 = vec2(3.2307692308) * direction;\\n  color += texture2D(image, uv) * 0.2270270270;\\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\\n  return color;\\n}\\n\\n\\n\\nuniform sampler2D source;\\nuniform vec2 size;\\nuniform float direction;\\nuniform float strength;\\n\\nvarying vec2 coords;\\n\\nvoid main() {\\n\\tvec2 uv = coords;\\n\\tvec4 refl = texture2D(source, uv);\\n\\tfloat dist = refl.a * strength + 0.2;\\n\\n\\tif (direction == 0.0) {\\n\\t\\tgl_FragColor = vec4(blur9_1_0(source, uv, size, vec2(dist, 0)).rgb, refl.a);\\n\\t} else {\\n\\t\\tgl_FragColor = vec4(blur9_1_0(source, uv, size, vec2(0, dist)).rgb, refl.a);\\n\\t}\\n}\\n\"\n\n/***/ }),\n/* 104 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"#define GLSLIFY 1\\nattribute vec3 position;\\n\\nuniform mat4 transform;\\nuniform mat4 projection;\\nuniform mat4 view;\\n\\nvarying float dist;\\n\\nvoid main() {\\n\\tvec4 pos = transform * vec4(position, 1.0);\\n\\tdist = length(pos.xyz);\\n\\tgl_Position = projection * view * pos;\\n}\\n\"\n\n/***/ }),\n/* 105 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"precision mediump float;\\n#define GLSLIFY 1\\n\\nuniform sampler2D reflection;\\nuniform vec2 size;\\n\\nvarying float dist;\\n\\nvoid main() {\\n\\tfloat scale = (50.0 - dist) / 50.0;\\n\\tvec4 refl = texture2D(reflection, gl_FragCoord.xy / size);\\n\\tvec4 ground = vec4(vec3(scale * 0.6), 1.0);\\n\\tgl_FragColor = mix(ground, vec4(refl.rgb, 1.0), refl / 2.0 + 0.25);\\n}\\n\"\n\n/***/ }),\n/* 106 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"#define GLSLIFY 1\\nattribute vec3 position;\\n\\nuniform mat4 transform;\\nuniform mat4 projection;\\nuniform mat4 view;\\nuniform float groundHeight;\\n\\nvarying float dist;\\nvarying float height;\\n\\nvoid main() {\\n\\tvec4 pos = transform * vec4(position, 1.0);\\n\\tdist = length(pos.xyz);\\n\\theight = (pos.y - groundHeight) / 10.0;\\n\\tgl_Position = projection * view * pos;\\n}\\n\"\n\n/***/ }),\n/* 107 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"precision mediump float;\\n#define GLSLIFY 1\\n\\nuniform int withDistance;\\n\\nvarying float dist;\\nvarying float height;\\n\\nvoid main() {\\n\\tfloat scale = (50.0 - dist) / 50.0;\\n\\tif (withDistance == 0) {\\n\\t\\tgl_FragColor = vec4(vec3(scale * 0.6), 1.0);\\n\\t} else {\\n\\t\\tgl_FragColor = vec4(vec3(scale * 0.6), height);\\n\\t\\t// gl_FragColor = vec4(vec3(height), 1.0);\\n\\t}\\n}\\n\"\n\n/***/ }),\n/* 108 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"#define GLSLIFY 1\\nattribute vec3 position;\\nattribute vec2 uv;\\nuniform float groundHeight;\\n\\nuniform mat4 transform;\\nuniform mat4 projection;\\nuniform mat4 view;\\n\\nvarying vec2 vUv;\\nvarying float height;\\n\\nvoid main() {\\n\\tvUv = uv;\\n\\tvec4 pos = transform * vec4(position, 1.0);\\n\\theight = (pos.y - groundHeight) / 10.0;\\n\\tgl_Position = projection * view * pos;\\n}\\n\"\n\n/***/ }),\n/* 109 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"precision mediump float;\\n#define GLSLIFY 1\\n\\nuniform sampler2D video;\\nuniform int withDistance;\\n\\nvarying vec2 vUv;\\nvarying float height;\\n\\nvoid main() {\\n\\tvec4 tex = texture2D(video, vUv);\\n\\tif (withDistance == 0) {\\n\\t\\tgl_FragColor = vec4(tex.rgb, 1.0);\\n\\t} else {\\n\\t\\tgl_FragColor = vec4(tex.rgb, height);\\n\\t\\t// gl_FragColor = vec4(vec3(height), 1.0);\\n\\t}\\n}\\n\"\n\n/***/ })\n],[70]);\n\n\n// WEBPACK FOOTER //\n// homage/main.js","import { randInt } from '../math/core';\nexport function pickRandom(arr) {\n    return arr[randInt(arr.length)];\n}\nexport function doTimes(count, fn) {\n    for (var i = 0; i < count; i++) {\n        fn(i);\n    }\n}\nexport function yieldTimes(count, fn) {\n    var arr = [];\n    doTimes(count, function (i) { return arr.push(fn(i)); });\n    return arr;\n}\nexport function zip(as, bs, fn) {\n    var length = Math.min(as.length, bs.length);\n    var result = [];\n    for (var i = 0; i < length; i++) {\n        result.push(fn(as[i], bs[i]));\n    }\n    return result;\n}\n//# sourceMappingURL=sequence.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../libs/tvs-libs/dist/lib/utils/sequence.js\n// module id = 4\n// module chunks = 0 2","export var DEG_TO_RAD_FACTOR = Math.PI / 180;\nexport function sign(num) {\n    if (num > 0) {\n        return 1;\n    }\n    else if (num < 0) {\n        return -1;\n    }\n    else {\n        return 0;\n    }\n}\nexport function lerp(start, end, step) {\n    return start + step * (end - start);\n}\nexport function clamp(value, min, max) {\n    return Math.max(min, Math.min(value, max));\n}\nexport function randInt(int) {\n    return Math.floor(Math.random() * int);\n}\nexport function randIntInRange(from, to) {\n    return randInt(to - from) + from;\n}\nexport function normalRand() {\n    return (Math.random() + Math.random() + Math.random()) / 3;\n}\nexport function degToRad(degrees) {\n    return degrees * DEG_TO_RAD_FACTOR;\n}\n//# sourceMappingURL=core.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../libs/tvs-libs/dist/lib/math/core.js\n// module id = 6\n// module chunks = 0 2","import { asyncStream, stream, val, asyncStreamStart } from 'tvs-flow/dist/lib/utils/entity-reference'\nimport { keyboard } from 'tvs-libs/dist/lib/events/keyboard'\nimport { mouse as getMouse } from 'tvs-libs/dist/lib/events/mouse'\nimport { windowSize as getWindowSize } from 'tvs-libs/dist/lib/events/dom'\nimport { animateWithTPF } from 'tvs-libs/dist/lib/events/animation'\nimport { videos } from './videos'\n\n\nexport const tick = asyncStream([videos.HOT], animateWithTPF)\n\n\nexport const tickStep = val(2)\n\nexport const tickCounter = val(0)\n.react(\n\t[tickStep.HOT, tick.HOT],\n\t(self, max) => self === max ? 0 : self + 1\n)\n\nexport const slowTick = stream(\n\t[tickCounter.HOT],\n\tcnt => cnt === 0 ? true : null\n)\n\nexport const windowSize = asyncStreamStart(null, getWindowSize)\n\nexport const mouse = asyncStreamStart(null, getMouse)\n\nexport const keys = asyncStreamStart(null, keyboard)\n\n\n\n// WEBPACK FOOTER //\n// ./homage/graph/events.ts","import { val, EntityRef, asyncStream } from 'tvs-flow/dist/lib/utils/entity-reference'\n\n\nexport function createVideo (src: string) {\n\tconst video = document.createElement('video')\n\tvideo.crossOrigin = 'anonymous'\n\tvideo.loop = true\n\n\tconst source1 = document.createElement('source')\n\tsource1.src = src + '.webm'\n\tsource1.type = 'video/webm'\n\n\tconst source2 = document.createElement('source')\n\tsource2.src = src + '.mp4'\n\tsource2.type = 'video/mp4'\n\n\tvideo.appendChild(source1)\n\tvideo.appendChild(source2)\n\treturn video\n}\n\n\nexport const names = val([\n\t'tworooms',\n\t'behindglass',\n\t'nanofuzz',\n\t'balloon',\n\t'threescreens'\n])\n\n\n//export const videosUrl = val(\"//s3.eu-central-1.amazonaws.com/trivialspace.net/tvs1/\")\nexport const videosUrl = val('videos/')\n\n\nexport const loadTimeout = val(60000)\n\n\nexport const videos: EntityRef<HTMLVideoElement[]> = asyncStream([\n\tnames.HOT,\n\tloadTimeout.HOT,\n\tvideosUrl.HOT\n],\n\t(send, names, timeout, url) => {\n\n\t\tPromise.all<HTMLVideoElement>(\n\t\t\tnames\n\t\t\t\t.map(name => createVideo(url + name))\n\t\t\t\t.map((v: HTMLVideoElement) => new Promise((res, rej) => {\n\t\t\t\t\tconst t = setTimeout(() => {\n\t\t\t\t\t\tconsole.log('timeout', v)\n\t\t\t\t\t\trej('Video timeout ' + v)\n\t\t\t\t\t}, timeout)\n\n\t\t\t\t\tv.addEventListener('canplay', () => {\n\t\t\t\t\t\tres(v)\n\t\t\t\t\t\tv.play()\n\t\t\t\t\t\tclearTimeout(t)\n\t\t\t\t\t\tconsole.log('loaded', v)\n\t\t\t\t\t})\n\t\t\t\t}))\n\n\t\t).then(send)\n\t}\n)\n\n\n\n// WEBPACK FOOTER //\n// ./homage/graph/videos.ts","import { val, stream } from 'tvs-flow/dist/lib/utils/entity-reference'\nimport { mat4 } from 'gl-matrix'\nimport * as geo from 'tvs-libs/dist/lib/math/geometry'\n\n\nexport const position = val([0, -3.4, 0])\n\nexport const normal = val([0, 1, 0])\n\nexport const scale = val(10)\n\n\nexport const transform = val(mat4.create())\n.react(\n\t[position.HOT, scale.HOT],\n\t(mat, pos, scale) => {\n\t\tmat4.fromTranslation(mat, pos)\n\t\tmat4.rotateX(mat, mat, Math.PI / 2)\n\t\treturn mat4.scale(mat, mat, [scale, scale, scale])\n\t}\n)\n\n\nexport const planeEquation = stream(\n\t[normal.HOT, position.HOT],\n\tgeo.planeFromNormalAndCoplanarPoint\n)\n\n\nexport const mirrorMatrix = stream(\n\t[planeEquation.HOT],\n\tgeo.mirrorMatrixFromPlane\n)\n\n\n\n// WEBPACK FOOTER //\n// ./homage/graph/state/ground.ts","import { vec3, vec4, mat4 } from 'gl-matrix';\nexport function planeFromNormalAndCoplanarPoint(n, point) {\n    var d = -vec3.dot(n, point);\n    return vec4.fromValues(n[0], n[1], n[2], d);\n}\nexport function planeFromThreeCoplanarPoints(p1, p2, p3) {\n    return planeFromNormalAndCoplanarPoint(normalFromThreeCoplanarPoints(p1, p2, p3), p1);\n}\nexport function normalFromThreeCoplanarPoints(p1, p2, p3) {\n    var n = vec3.cross(vec3.create(), vec3.sub(vec3.create(), p3, p2), vec3.sub(vec3.create(), p1, p2));\n    return vec3.normalize(n, n);\n}\nexport function mirrorMatrixFromPlane(plane) {\n    var _a = plane, a = _a[0], b = _a[1], c = _a[2], d = _a[3];\n    return mat4.fromValues(1 - 2 * a * a, -2 * a * b, -2 * a * c, 0, -2 * a * b, 1 - 2 * b * b, -2 * b * c, 0, -2 * a * c, -2 * b * c, 1 - 2 * c * c, 0, -2 * a * d, -2 * b * d, -2 * c * d, 1);\n}\nexport function getYawQuat(quat, rotYAngle) {\n    rotYAngle *= 0.5;\n    quat[0] = 0;\n    quat[1] = Math.sin(rotYAngle);\n    quat[2] = 0;\n    quat[3] = Math.cos(rotYAngle);\n    return quat;\n}\nexport function getPitchQuat(quat, rotXAngle) {\n    rotXAngle *= 0.5;\n    quat[0] = Math.sin(rotXAngle);\n    quat[1] = 0;\n    quat[2] = 0;\n    quat[3] = Math.cos(rotXAngle);\n    return quat;\n}\nexport function getRollQuat(quat, rotZAngle) {\n    rotZAngle *= 0.5;\n    quat[0] = 0;\n    quat[1] = 0;\n    quat[2] = Math.sin(rotZAngle);\n    quat[3] = Math.cos(rotZAngle);\n    return quat;\n}\n//# sourceMappingURL=geometry.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../libs/tvs-libs/dist/lib/math/geometry.js\n// module id = 23\n// module chunks = 0 2","import { val, stream } from 'tvs-flow/dist/lib/utils/entity-reference'\nimport { mat4 } from 'gl-matrix'\nimport * as coords from 'tvs-libs/dist/lib/math/coords'\nimport * as videos from '../videos'\nimport { zip } from 'tvs-libs/dist/lib/utils/sequence'\n\n\nexport const radius = val(25)\n\nexport const height = val(2)\n\nexport const scale = val([1.6, 1, 1])\n\n\nexport const rotations = stream(\n\t[videos.names.HOT],\n\tvideos => videos.map((_, i) => Math.PI * 2 * i / videos.length)\n)\n\n\nexport const positions = stream(\n\t[radius.HOT, rotations.HOT, height.HOT],\n\t(radius: number, rotations: number[], height: number) =>\n\t\trotations.map(rot => {\n\t\t\tconst phi = -rot - Math.PI / 2\n\t\t\tconst [x, z] = coords.polarToCartesian2D([radius, phi])\n\t\t\treturn [x, height, z]\n\t\t})\n)\n\n\nexport const transforms = stream(\n\t[rotations.HOT, positions.HOT, scale.HOT],\n\t(rotations: number[], positions: number[][], scale: number[]) =>\n\t\tzip(rotations, positions, (rot, pos) => {\n\t\t\tconst t = mat4.fromTranslation(mat4.create(), pos)\n\t\t\tmat4.rotateY(t, t, rot)\n\t\t\tmat4.scale(t, t, scale)\n\t\t\treturn t\n\t\t})\n)\n\n\n\n// WEBPACK FOOTER //\n// ./homage/graph/state/screens.ts","import { val } from 'tvs-flow/dist/lib/utils/entity-reference'\nimport { makePainterCanvas } from 'tvs-libs/dist/lib/vr/flow-painter-utils'\nimport * as events from '../events'\nimport { DrawSettings } from 'tvs-renderer/dist/lib'\n\n\nexport const {canvas, painter, gl, canvasSize} =\n\tmakePainterCanvas(events.windowSize)\n\n\nexport const settings = val<DrawSettings>({\n\tclearColor: [0, 0, 0, 1]\n}).reset()\n\n\npainter.react(\n\t[settings.HOT],\n\t(p, settings) => p.updateDrawSettings(settings)\n)\n\n\n\n// WEBPACK FOOTER //\n// ./homage/graph/view/painter.ts","function _createConfig( properties ) {\n\t\n\tvar config = {\n\t\tsize : [1,1,1],\n\t\tsegments : [1,1,1]\n\t}\n\t\n\tif( properties ) {\n\t\n\t\tif( Array.isArray( properties.size ) ) {\n\t\t\tconfig.size = properties.size\n\t\t} else if( typeof properties.size === \"number\" ) {\n\t\t\tconfig.size = [properties.size, properties.size, properties.size]\n\t\t}\n\t\n\t\tif( Array.isArray( properties.segments ) ) {\n\t\t\tconfig.segments = properties.segments\n\t\t} else if( typeof properties.segments === \"number\" ) {\n\t\t\tconfig.segments = [properties.segments, properties.segments, properties.segments]\n\t\t}\n\t}\n\t\n\treturn config\n}\n\nfunction _flatten( array ) {\n\tvar results = []\n\t\n\tfor( var i=0; i < array.length; i++ ) {\n\t\tvar subarray = array[i]\n\t\tfor( var j=0; j < subarray.length; j++ ) {\n\t\t\tresults.push(subarray[j])\n\t\t}\n\t}\n\treturn results\n}\n\nfunction _generatePanel( config ) {\n\t\t\t\n\tvar rows      = _generateGrid( config )\n\tvar cells     = _generateCells( config, rows )\n\tvar positions = _flatten( rows )\n\tvar uvs       = _generateUvs( config, positions )\n\t\n\treturn {\n\t\tpositions   : positions,\n\t\tcells       : cells,\n\t\tuvs         : uvs,\n\t\tvertexCount : (config.sx + 1) * (config.sy + 1)\n\t}\n}\n\nfunction _generateUvs( config, positions ) {\n\t\n\treturn positions.map(function(p) {\n\t\treturn [\n\t\t\tp[0] / config.wx + 0.5,\n\t\t\tp[1] / config.wy + 0.5\n\t\t]\n\t})\n}\n\nfunction _generateGrid( config ) {\n\t\n\tvar step   = config.wy / config.sy\n\tvar halfY  = config.wy / 2\n\tvar length = config.sy + 1\n\tvar grid   = Array(length)\n\t\n\tfor( var i=0; i < length; i++ ) {\n\t\tgrid[i] = _generateRow( config, step * i - halfY)\n\t}\n\t\n\treturn grid\n}\n\nfunction _generateRow( config, height ) {\n\t\n\tvar halfX  = config.wx / 2\n\tvar step   = config.wx / config.sx\n\tvar length = config.sx + 1\n\tvar row    = Array(length)\n\t\n\tfor( var i=0; i < length; i++ ) {\n\t\trow[i] = [ step * i - halfX, height ]\n\t}\n\t\n\treturn row\n}\n\nfunction _generateCells( config ) {\n\t\n\tfunction index( x, y ) {\n\t\treturn (config.sx + 1) * y + x\n\t}\n\t\n\tvar cells = []\n\t\n\tfor( var x=0; x < config.sx; x++ ) {\n\t\t\n\t\tfor( var y=0; y < config.sy; y++ ) {\n\n\t\t\tvar a = index( x + 0, y + 0 )  //   d __ c\n\t\t\tvar b = index( x + 1, y + 0 )  //    |  |\n\t\t\tvar c = index( x + 1, y + 1 )  //    |__|\n\t\t\tvar d = index( x + 0, y + 1 )  //   a    b\n\t\t\t\n\t\t\tcells.push( [ a, b, c ] )\n\t\t\tcells.push( [ c, d, a ] )\n\t\t}\n\t}\n\t\n\treturn cells\n}\n\nfunction _clonePanel( panel ) {\n\t\n\treturn {\n\t\tpositions   : panel.positions,\n\t\tcells       : panel.cells,\n\t\tuvs         : panel.uvs,\n\t\tvertexCount : panel.vertexCount\n\t}\n}\n\nfunction _generateBoxPanels( config ) {\n\t\n\tvar size = config.size\n\tvar segs = config.segments\n\t\n\t//       yp  zm\n\t//        | /\n\t//        |/\n\t// xm ----+----- xp\n\t//       /|\n\t//      / |\n\t//    zp  ym\n\t\n\tvar zp = _generatePanel({\n\t\twx: size[0], wy: size[1],\n\t\tsx: segs[0], sy: segs[1]\n\t})\n\tvar xp = _generatePanel({\n\t\twx: size[2], wy: size[1],\n\t\tsx: segs[2], sy: segs[1]\n\t})\n\tvar yp = _generatePanel({\n\t\twx: size[0], wy: size[2],\n\t\tsx: segs[0], sy: segs[2]\n\t})\n\t\n\tvar zm = _clonePanel(zp)\n\tvar xm = _clonePanel(xp)\n\tvar ym = _clonePanel(yp)\n\t\n\tzp.positions = zp.positions.map( function(p) { return [       p[0],       p[1],  size[2]/2 ] } )\n\tzm.positions = zm.positions.map( function(p) { return [       p[0],      -p[1], -size[2]/2 ] } )\n\txp.positions = xp.positions.map( function(p) { return [  size[0]/2,      -p[1],       p[0] ] } )\n\txm.positions = xm.positions.map( function(p) { return [ -size[0]/2,       p[1],       p[0] ] } )\n\typ.positions = yp.positions.map( function(p) { return [       p[0],  size[1]/2,      -p[1] ] } )\n\tym.positions = ym.positions.map( function(p) { return [       p[0], -size[1]/2,       p[1] ] } )\n\t\n\tzp.normals = _makeNormals( [ 0, 0, 1], zp.positions.length )\n\tzm.normals = _makeNormals( [ 0, 0,-1], zm.positions.length )\n\txp.normals = _makeNormals( [ 1, 0, 0], xp.positions.length )\n\txm.normals = _makeNormals( [-1, 0, 0], xm.positions.length )\n\typ.normals = _makeNormals( [ 0, 1, 0], yp.positions.length )\n\tym.normals = _makeNormals( [ 0,-1, 0], ym.positions.length )\n\t\n\treturn [ zp, zm, xp, xm, yp, ym ]\n}\n\nfunction _makeNormals( normal, count ) {\n\t\n\tvar normals = Array(count)\n\t\n\tfor( var i=0; i < count; i++ ) {\n\t\tnormals[i] = normal.slice()\n\t}\n\t\n\treturn normals\n}\n\t\nfunction _generateBox( config ) {\n\t\n\tvar panels = _generateBoxPanels( config )\n\t\n\tvar positions = panels.map(function(panel) { return panel.positions })\n\tvar uvs       = panels.map(function(panel) { return panel.uvs       })\n\tvar normals   = panels.map(function(panel) { return panel.normals   })\n\tvar cells     = _offsetCellIndices( panels )\n\t\n\treturn {\n\t\tpositions: _flatten( positions ),\n\t\tuvs:       _flatten( uvs ),\n\t\tcells:     _flatten( cells ),\n\t\tnormals:   _flatten( normals ),\n\t}\n}\n\nfunction _offsetCellIndices( panels ) {\n\t\n\t/*\n\t\tFrom: [[[0,1,2],[2,3,0]],[[0,1,2],[2,3,0]]]\n\t\tTo:   [[[0,1,2],[2,3,0]],[[6,7,8],[8,9,6]]]\n\t*/\n\t\n\tvar offset = 0\n\t\n\treturn panels.map(function(panel) {\n\t\t\n\t\tvar offsetCells = panel.cells.map( function(cell) {\n\t\t\treturn cell.map(function(v) {\n\t\t\t\treturn v + offset\n\t\t\t})\n\t\t})\n\t\n\t\toffset += panel.vertexCount\n\t\n\t\treturn offsetCells\n\t})\n}\n\nmodule.exports = function( properties ) {\n\t\n\tvar config = _createConfig( properties )\n\n\treturn _generateBox( config )\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/geo-3d-box/box.js\n// module id = 29\n// module chunks = 0 1","import * as constants from '../contants';\nexport var STACK_GL_GEOMETRY_PROP_POSITION = 'positions';\nexport var STACK_GL_GEOMETRY_PROP_NORMAL = 'normals';\nexport var STACK_GL_GEOMETRY_PROP_UV = 'uvs';\nexport var STACK_GL_GEOMETRY_PROP_ELEMENTS = 'cells';\nfunction _flatten(array) {\n    var results = [];\n    for (var _i = 0, array_1 = array; _i < array_1.length; _i++) {\n        var subarray = array_1[_i];\n        for (var _a = 0, subarray_1 = subarray; _a < subarray_1.length; _a++) {\n            var el = subarray_1[_a];\n            results.push(el);\n        }\n    }\n    return results;\n}\nexport function convertStackGLGeometry(stackglGeometry) {\n    var geometry = {\n        drawType: 'TRIANGLES',\n        attribs: {},\n        itemCount: 0\n    };\n    for (var prop in stackglGeometry) {\n        var arr = stackglGeometry[prop];\n        if (prop === STACK_GL_GEOMETRY_PROP_ELEMENTS) {\n            var buffer = new (arr.length > 65535 ? Uint32Array : Uint16Array)(_flatten(arr));\n            Object.assign(geometry, {\n                elements: { buffer: buffer },\n                itemCount: buffer.length\n            });\n        }\n        else if (prop === STACK_GL_GEOMETRY_PROP_POSITION) {\n            geometry.attribs[constants.GEOMETRY_PROP_POSITION] = {\n                buffer: new Float32Array(_flatten(arr))\n            };\n        }\n        else if (prop === STACK_GL_GEOMETRY_PROP_NORMAL) {\n            geometry.attribs[constants.GEOMETRY_PROP_NORMAL] = {\n                buffer: new Float32Array(_flatten(arr))\n            };\n        }\n        else if (prop === STACK_GL_GEOMETRY_PROP_UV) {\n            geometry.attribs[constants.GEOMETRY_PROP_UV] = {\n                buffer: new Float32Array(_flatten(arr))\n            };\n        }\n        else {\n            geometry.attribs[prop] = { buffer: new Float32Array(_flatten(arr)) };\n        }\n    }\n    return geometry;\n}\n//# sourceMappingURL=stackgl.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../libs/tvs-renderer/dist/lib/utils/stackgl.js\n// module id = 30\n// module chunks = 0 1","export var GEOMETRY_PROP_POSITION = 'position';\nexport var GEOMETRY_PROP_NORMAL = 'normal';\nexport var GEOMETRY_PROP_UV = 'uv';\nexport var UNIFORM_SOURCE_TEXTURE = 'source';\nexport var VARYING_UV_COORDS = 'coords';\nexport var GL_TYPE = {\n    FLOAT: 0x1406,\n    FLOAT_VEC2: 0x8B50,\n    FLOAT_VEC3: 0x8B51,\n    FLOAT_VEC4: 0x8B52,\n    INT: 0x1404,\n    INT_VEC2: 0x8B53,\n    INT_VEC3: 0x8B54,\n    INT_VEC4: 0x8B55,\n    BOOL: 0x8B56,\n    BOOL_VEC2: 0x8B57,\n    BOOL_VEC3: 0x8B58,\n    BOOL_VEC4: 0x8B59,\n    FLOAT_MAT2: 0x8B5A,\n    FLOAT_MAT3: 0x8B5B,\n    FLOAT_MAT4: 0x8B5C,\n    SAMPLER_2D: 0x8B5E,\n    SAMPLER_CUBE: 0x8B60,\n    SAMPLER_3D: 0x8B5F,\n    SAMPLER_2D_SHADOW: 0x8B62,\n    FLOAT_MAT2X3: 0x8B65,\n    FLOAT_MAT2X4: 0x8B66,\n    FLOAT_MAT3X2: 0x8B67,\n    FLOAT_MAT3X4: 0x8B68,\n    FLOAT_MAT4X2: 0x8B69,\n    FLOAT_MAT4X3: 0x8B6A,\n    SAMPLER_2D_ARRAY: 0x8DC1,\n    SAMPLER_2D_ARRAY_SHADOW: 0x8DC4,\n    SAMPLER_CUBE_SHADOW: 0x8DC5,\n    UNSIGNED_INT: 0x1405,\n    UNSIGNED_INT_VEC2: 0x8DC6,\n    UNSIGNED_INT_VEC3: 0x8DC7,\n    UNSIGNED_INT_VEC4: 0x8DC8,\n    INT_SAMPLER_2D: 0x8DCA,\n    INT_SAMPLER_3D: 0x8DCB,\n    INT_SAMPLER_CUBE: 0x8DCC,\n    INT_SAMPLER_2D_ARRAY: 0x8DCF,\n    UNSIGNED_INT_SAMPLER_2D: 0x8DD2,\n    UNSIGNED_INT_SAMPLER_3D: 0x8DD3,\n    UNSIGNED_INT_SAMPLER_CUBE: 0x8DD4,\n    UNSIGNED_INT_SAMPLER_2D_ARRAY: 0x8DD7,\n    TEXTURE_2D: 0x0DE1,\n    TEXTURE_CUBE_MAP: 0x8513,\n    TEXTURE_3D: 0x806F,\n    TEXTURE_2D_ARRAY: 0x8C1A,\n    BYTE: 0x1400,\n    UNSIGNED_BYTE: 0x1401,\n    SHORT: 0x1402,\n    UNSIGNED_SHORT: 0x1403,\n    UNSIGNED_SHORT_4_4_4_4: 0x8033,\n    UNSIGNED_SHORT_5_5_5_1: 0x8034,\n    UNSIGNED_SHORT_5_6_5: 0x8363,\n    HALF_FLOAT: 0x140B,\n    UNSIGNED_INT_2_10_10_10_REV: 0x8368,\n    UNSIGNED_INT_10F_11F_11F_REV: 0x8C3B,\n    UNSIGNED_INT_5_9_9_9_REV: 0x8C3E,\n    FLOAT_32_UNSIGNED_INT_24_8_REV: 0x8DAD,\n    UNSIGNED_INT_24_8: 0x84FA\n};\n//# sourceMappingURL=contants.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../libs/tvs-renderer/dist/lib/contants.js\n// module id = 31\n// module chunks = 0 1","import { EntityRef, asyncStreamStart, stream, asyncStream } from 'tvs-flow/dist/lib/utils/entity-reference'\nimport { WindowSizeState } from '../events/dom'\nimport { create } from 'tvs-renderer/dist/lib/painter'\nimport { getContext } from 'tvs-renderer/dist/lib/utils/context'\nimport { Painter, Shade, Form, Sketch, Layer, GL, SketchData, LayerData, ShadeData, FormData, DrawSettings } from 'tvs-renderer/dist/lib/render-types'\nimport { unequal } from '../utils/predicates'\n\n\nexport function makePainterCanvas (\n\twindowSizeEntity: EntityRef<WindowSizeState>,\n\tpainterSettings?: EntityRef<DrawSettings>\n) {\n\n\tconst canvas = asyncStreamStart<HTMLCanvasElement>(\n\t\tnull,\n\t\t(send) => {\n\n\t\t\tconst canvas = document.createElement('canvas')\n\t\t\tdocument.body.appendChild(canvas)\n\n\t\t\tsend(canvas)\n\n\t\t\treturn () => {\n\t\t\t\tdocument.body.removeChild(canvas)\n\t\t\t}\n\t\t}\n\t)\n\n\tconst gl = stream([canvas.HOT], getContext)\n\n\tconst painter = asyncStream<Painter, GL>(\n\t\t[gl.HOT],\n\t\t(send, gl) => {\n\t\t\tconst p = create(gl)\n\t\t\tsend(p)\n\t\t\treturn p.destroy\n\t\t}\n\t)\n\t.accept(unequal)\n\n\tconst canvasSize = stream(\n\t\t[canvas.HOT, windowSizeEntity.HOT],\n\t\t(canvas: HTMLCanvasElement) => ({\n\t\t\twidth: canvas.clientWidth,\n\t\t\theight: canvas.clientHeight\n\t\t})\n\t)\n\n\tpainter.react(\n\t\t[canvasSize.HOT],\n\t\t(p, _) => p.resize(),\n\t\t'updateSize'\n\t)\n\n\tif (painterSettings) {\n\t\tpainter.react([painterSettings.HOT], (p, s) => p.updateDrawSettings(s))\n\t}\n\n\treturn { canvas, painter, gl, canvasSize }\n}\n\n\nexport function makeShadeEntity (\n\tpainter: EntityRef<Painter>,\n\tdata?: EntityRef<ShadeData>\n): EntityRef<Shade> {\n\tconst entity = asyncStream<Shade, Painter>(\n\t\t[painter.HOT],\n\t\t(send, painter) => {\n\t\t\tconst shade = painter.createShade()\n\t\t\tsend(shade)\n\t\t\treturn shade.destroy\n\t\t}\n\t)\n\n\tif (data) {\n\t\tentity.react(\n\t\t\t[data.HOT],\n\t\t\t(entity, data) => entity.update(data)\n\t\t)\n\t}\n\n\treturn entity\n}\n\nexport function makeFormEntity (\n\tpainter: EntityRef<Painter>,\n\tdata?: EntityRef<FormData>\n): EntityRef<Form> {\n\tconst entity = asyncStream<Form, Painter>(\n\t\t[painter.HOT],\n\t\t(send, painter) => {\n\t\t\tconst form = painter.createForm()\n\t\t\tsend(form)\n\t\t\treturn form.destroy\n\t\t}\n\t)\n\n\tif (data) {\n\t\tentity.react(\n\t\t\t[data.HOT],\n\t\t\t(entity, data) => entity.update(data)\n\t\t)\n\t}\n\n\treturn entity\n}\n\nexport function makeSketchEntity (\n\tpainter: EntityRef<Painter>,\n\tdata?: EntityRef<SketchData>\n): EntityRef<Sketch> {\n\tconst entity = asyncStream<Sketch, Painter>(\n\t\t[painter.HOT],\n\t\t(send, painter) => {\n\t\t\tconst sketch = painter.createSketch()\n\t\t\tsend(sketch)\n\t\t\treturn sketch.destroy\n\t\t}\n\t)\n\n\tif (data) {\n\t\tentity.react( [data.HOT], (entity, data) => entity.update(data))\n\t}\n\n\treturn entity\n}\n\nexport function makeFlatSketchEntity (\n\tpainter: EntityRef<Painter>,\n\tdata?: EntityRef<SketchData>\n): EntityRef<Sketch> {\n\tconst entity = asyncStream<Sketch, Painter>(\n\t\t[painter.HOT],\n\t\t(send, painter) => {\n\t\t\tconst sketch = painter.createFlatSketch()\n\t\t\tsend(sketch)\n\t\t\treturn sketch.destroy\n\t\t}\n\t)\n\n\tif (data) {\n\t\tentity.react( [data.HOT], (entity, data) => entity.update(data))\n\t}\n\n\treturn entity\n}\n\nexport function makeStaticLayerEntity (\n\tpainter: EntityRef<Painter>,\n\tdata?: EntityRef<LayerData>\n): EntityRef<Layer> {\n\tconst entity = asyncStream<Layer, Painter>(\n\t\t[painter.HOT],\n\t\t(send, painter) => {\n\t\t\tconst layer = painter.createStaticLayer()\n\t\t\tsend(layer)\n\t\t\treturn layer.destroy\n\t\t}\n\t)\n\n\tif (data) {\n\t\tentity.react( [data.HOT], (entity, data) => entity.update(data))\n\t}\n\n\treturn entity\n}\n\nexport function makeDrawingLayerEntity (\n\tpainter: EntityRef<Painter>,\n\tdata?: EntityRef<LayerData>\n): EntityRef<Layer> {\n\tconst entity = asyncStream<Layer, Painter>(\n\t\t[painter.HOT],\n\t\t(send, painter) => {\n\t\t\tconst layer = painter.createDrawingLayer()\n\t\t\tsend(layer)\n\t\t\treturn layer.destroy\n\t\t}\n\t)\n\n\tif (data) {\n\t\tentity.react( [data.HOT], (entity, data) => entity.update(data))\n\t}\n\n\treturn entity\n}\n\nexport function makeEffectLayerEntity (\n\tpainter: EntityRef<Painter>,\n\tdata?: EntityRef<LayerData>\n): EntityRef<Layer> {\n\tconst entity = asyncStream<Layer, Painter>(\n\t\t[painter.HOT],\n\t\t(send, painter) => {\n\t\t\tconst layer = painter.createEffectLayer()\n\t\t\tsend(layer)\n\t\t\treturn layer.destroy\n\t\t}\n\t)\n\n\tif (data) {\n\t\tentity.react( [data.HOT], (entity, data) => entity.update(data))\n\t}\n\n\treturn entity\n}\n\n\n\n// WEBPACK FOOTER //\n// ../libs/tvs-libs/lib/vr/flow-painter-utils.ts","export type Predicate1 = (a: any) => boolean\nexport type Predicate2 = (a: any, b: any) => boolean\n\n\nexport const unequal: Predicate2 = (a, b) => a !== b\n\nexport const defined: Predicate1 = a => a != null\n\nexport const notEmpty: Predicate1 = a => a && a.length\n\nexport const and = (p1: Predicate2, p2: Predicate2): Predicate2 => (a, b) => p1(a, b) && p2(a, b)\n\n\n\n// WEBPACK FOOTER //\n// ../libs/tvs-libs/lib/utils/predicates.ts","export function getContext(canvas) {\n    var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n    if (gl == null) {\n        throw Error('Webgl context cannot be initialized');\n    }\n    return gl;\n}\nexport function makeClear(gl) {\n    var clearArray = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        clearArray[_i - 1] = arguments[_i];\n    }\n    return clearArray.reduce(function (res, item) { return res | gl[item.toUpperCase() + '_BUFFER_BIT']; }, 0);\n}\nexport function setBlendFunc(gl, blendOpts) {\n    gl.blendFunc.apply(gl, blendOpts.map(function (opt) { return gl[opt.toUpperCase()]; }));\n}\n/**\n * @param {HTMLCanvasElement} canvas The canvas to resize.\n * @param {number} [multiplier] optional `window.devicePixelRatio`.\n * @return {boolean} true if the canvas was resized.\n */\nexport function resizeCanvas(canvas, multiplier) {\n    if (multiplier === void 0) { multiplier = 1; }\n    multiplier = Math.max(1, multiplier);\n    var width = canvas.clientWidth * multiplier | 0;\n    var height = canvas.clientHeight * multiplier | 0;\n    if (canvas.width !== width ||\n        canvas.height !== height) {\n        canvas.width = width;\n        canvas.height = height;\n        return true;\n    }\n    return false;\n}\n//# sourceMappingURL=context.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../libs/tvs-renderer/dist/lib/utils/context.js\n// module id = 35\n// module chunks = 0 1","import { val, stream } from 'tvs-flow/dist/lib/utils/entity-reference'\nimport { mat4 } from 'gl-matrix'\nimport * as vec from 'tvs-libs/dist/lib/math/vectors'\nimport * as screens from './screens'\nimport { zip } from 'tvs-libs/dist/lib/utils/sequence'\n\n\nexport const scale = val([1.65, 1, 1])\n\n\nexport const transforms = stream(\n\t[screens.rotations.HOT, screens.positions.HOT, scale.HOT],\n\t(rotations: number[], positions: number[][], scale: number[]) =>\n\n\t\tzip(rotations, positions, (rot, pos) => {\n\t\t\tconst p = vec.mul(pos, 1.045)\n\t\t\tp[1] -= 1.9\n\n\t\t\tconst t = mat4.fromTranslation(mat4.create(), p)\n\t\t\tmat4.rotateY(t, t, rot)\n\t\t\tmat4.scale(t, t, scale)\n\t\t\treturn t\n\t\t})\n)\n\n\n\n// WEBPACK FOOTER //\n// ./homage/graph/state/pedestals.ts","export function add(vec1, vec2) {\n    var results = [];\n    for (var i = 0; i < vec1.length; i++) {\n        results[i] = vec1[i] + vec2[i];\n    }\n    return results;\n}\nexport function addScalar(vec, scalar) {\n    var results = [];\n    for (var i = 0; i < vec.length; i++) {\n        results[i] = vec[i] + scalar;\n    }\n    return results;\n}\nexport function sub(vec1, vec2) {\n    var results = [];\n    for (var i = 0; i < vec1.length; i++) {\n        results[i] = vec1[i] - vec2[i];\n    }\n    return results;\n}\nexport function subScalar(vec, scalar) {\n    var results = [];\n    for (var i = 0; i < vec.length; i++) {\n        results[i] = vec[i] - scalar;\n    }\n    return results;\n}\nexport function mul(vec, scalar) {\n    var results = [];\n    for (var i = 0; i < vec.length; i++) {\n        results[i] = vec[i] * scalar;\n    }\n    return results;\n}\nexport function div(vec, scalar) {\n    var results = [];\n    for (var i = 0; i < vec.length; i++) {\n        results[i] = vec[i] / scalar;\n    }\n    return results;\n}\nexport function length(vec) {\n    var sum = 0;\n    for (var i = 0; i < vec.length; i++) {\n        var val = vec[i];\n        sum += val * val;\n    }\n    return Math.sqrt(sum);\n}\nexport function normalize(vec) {\n    return div(vec, length(vec));\n}\nexport function limit(vec, maxLenght) {\n    if (maxLenght < length(vec)) {\n        return mul(normalize(vec), maxLenght);\n    }\n    else {\n        return vec;\n    }\n}\nexport function isEqual(vec1, vec2) {\n    if (vec1.length !== vec2.length)\n        return false;\n    for (var i = 0; i < vec1.length; i++) {\n        if (vec1[i] !== vec2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n//# sourceMappingURL=vectors.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../libs/tvs-libs/dist/lib/math/vectors.js\n// module id = 50\n// module chunks = 0","import { val, asyncStream, EntityRef, delta, stream } from 'tvs-flow/dist/lib/utils/entity-reference'\nimport * as flowCamera from 'tvs-libs/dist/lib/vr/flow-camera'\nimport { canvasSize } from './painter'\nimport { Keys } from 'tvs-libs/dist/lib/events/keyboard'\nimport { mat4, vec3 } from 'gl-matrix'\nimport { keys, tick, mouse } from '../events'\nimport * as ground from '../state/ground'\n\n\nexport const {\n\tposition, rotX, rotY, rotation, view\n} = flowCamera.makeFirstPersonView()\n\n\nexport const {\n\tperspectiveSettings, perspective\n} = flowCamera.makePerspective(canvasSize)\n\n\nperspectiveSettings.updateVal(s => ({ ...s, fovy: Math.PI * 0.4 }))\n\n\nexport const moveSpeed = val(0.05)\n\nexport const lookSpeed = val(0.002)\n\n\nexport const moveForward: EntityRef<number> = asyncStream(\n\t[keys.COLD, moveSpeed.COLD, tick.HOT],\n\t(send, keys, speed, _) => {\n\t\tif (!keys) return\n\t\tif (keys[Keys.UP] || keys[Keys.W]) {\n\t\t\tsend(speed)\n\t\t}\n\t\tif (keys[Keys.DOWN] || keys[Keys.S]) {\n\t\t\tsend(-speed)\n\t\t}\n\t}\n)\n\n\nexport const moveLeft: EntityRef<number> = asyncStream(\n\t[keys.COLD, moveSpeed.COLD, tick.HOT],\n\t(send, keys, speed) => {\n\n\t\tif (!keys) return\n\t\tif (keys[Keys.LEFT] || keys[Keys.A]) {\n\t\t\tsend(speed)\n\t\t}\n\t\tif (keys[Keys.RIGHT] || keys[Keys.D]) {\n\t\t\tsend(-speed)\n\t\t}\n\t}\n)\n\n\nexport const mouseDrag = stream(\n\t[mouse.HOT], m => ({\n\t\tx: m.drag.x,\n\t\ty: m.drag.y\n\t})\n)\n\n\nexport const dragDeltas = delta(mouseDrag, (n, o) => ({\n\tx: n.x === 0 ? n.x : o.x - n.x,\n\ty: n.y === 0 ? n.y : o.y - n.y\n}))\n.accept(drag => !!(drag && (drag.x || drag.y)))\n\n\nrotX.react(\n\t[dragDeltas.HOT, lookSpeed.COLD],\n\t(rot, drag, speed) => rot + drag.y * speed\n)\n\n\nrotY.react(\n\t[dragDeltas.HOT, lookSpeed.COLD],\n\t(rot, drag, speed) => rot + drag.x * speed\n)\n\nposition.react(\n\t[moveLeft.HOT, rotation.COLD],\n\t(pos, left, rotation) => {\n\t\tconst v = vec3.fromValues(rotation.rotY[0], rotation.rotY[1], rotation.rotY[2])\n\t\treturn vec3.add(pos, pos, vec3.scale(v, v, -left))\n\t}\n)\n\nposition.react(\n\t[moveForward.HOT, rotation.COLD],\n\t(pos, forward, rotation) => {\n\t\tconst v = vec3.fromValues(rotation.rotY[8], rotation.rotY[9], rotation.rotY[10])\n\t\treturn vec3.add(pos, pos, vec3.scale(v, v, -forward))\n\t}\n)\n\n\nexport const groundMirrorView = val(mat4.create())\n.react(\n\t[view.HOT, ground.mirrorMatrix.HOT],\n\tmat4.multiply\n)\n\n\n\n// WEBPACK FOOTER //\n// ./homage/graph/view/camera.ts","import { val, stream } from 'tvs-flow/dist/lib/utils/entity-reference'\n\n\nexport const blurStrength = val(10)\n\n\nexport const layersData = stream(\n\t[blurStrength.HOT],\n\t(strength) => {\n\t\tconst passData: any[] = []\n\t\twhile (strength >= 1) {\n\t\t\tpassData.push({\n\t\t\t\tdirection: 0,\n\t\t\t\tstrength\n\t\t\t})\n\t\t\tpassData.push({\n\t\t\t\tdirection: 1,\n\t\t\t\tstrength\n\t\t\t})\n\t\t\tstrength /= 2\n\t\t}\n\t\treturn passData\n\t}\n)\n\n\n\n// WEBPACK FOOTER //\n// ./homage/graph/view/effects/ground-reflection.ts","import { val, stream } from 'tvs-flow/dist/lib/utils/entity-reference'\nimport box from 'geo-3d-box'\nimport { convertStackGLGeometry } from 'tvs-renderer/dist/lib/utils/stackgl'\n\n\nexport const size = val([10, 14, 2])\n\nexport const segments = val([5, 7, 1])\n\n\nexport const geometry = stream(\n  [size.HOT, segments.HOT],\n  (size, segments) => convertStackGLGeometry(box({ size, segments }))\n)\n\n\n\n// WEBPACK FOOTER //\n// ./homage/graph/view/geometries/box.ts","import { plane } from 'tvs-renderer/dist/lib/utils/geometry/plane'\nimport { val, stream } from 'tvs-flow/dist/lib/utils/entity-reference'\n\n\nexport const props = val({\n  width: 10,\n  height: 10,\n  segX: 5,\n  segY: 5\n})\n\n\nexport const geometry = stream(\n  [props.HOT],\n  props => plane(props.width, props.height, props.segX, props.segY)\n)\n\n\n\n// WEBPACK FOOTER //\n// ./homage/graph/view/geometries/plane.ts","import { val } from 'tvs-flow/dist/lib/utils/entity-reference'\nimport fragSrc from './ground-reflection-frag.glsl'\n\n\nexport const frag = val(fragSrc).reset()\n\n\n\n// WEBPACK FOOTER //\n// ./homage/graph/view/shaders/ground-reflection.ts","import { val } from 'tvs-flow/dist/lib/utils/entity-reference'\nimport vert from './ground-vert.glsl'\nimport frag from './ground-frag.glsl'\n\n\nexport const spec = val({\n\tvert, frag\n}).reset()\n\n\n\n\n// WEBPACK FOOTER //\n// ./homage/graph/view/shaders/ground.ts","import { val } from 'tvs-flow/dist/lib/utils/entity-reference'\nimport vert from './object-vert.glsl'\nimport frag from './object-frag.glsl'\n\n\nexport const spec = val({\n\tvert, frag\n}).reset()\n\n\n\n\n// WEBPACK FOOTER //\n// ./homage/graph/view/shaders/object.ts","import { val } from 'tvs-flow/dist/lib/utils/entity-reference'\nimport vert from './screen-vert.glsl'\nimport frag from './screen-frag.glsl'\n\n\nexport const spec = val({\n\tvert, frag\n}).reset()\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./homage/graph/view/shaders/screen.ts","import { flow, tools } from './flow'\nimport { updateFlow } from 'shared-utils/reload'\n\n\nconst graphModules = require.context('./graph', true, /\\.ts$/)\n\n\nflow.setDebug(true)\n\nupdateFlow(flow, graphModules)\n\ntools.updateFlow(flow)\n\nsetTimeout(function () {\n  flow.setDebug(false)\n}, 1000)\n\n\nif (module.hot) {\n  module.hot.accept((graphModules as any).id, function() {\n    const newGraphModules = require.context('./graph', true, /\\.ts$/)\n    updateFlow(flow, newGraphModules)\n    tools.updateFlow(flow)\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./homage/index.ts","import * as runtime from 'tvs-flow/dist/lib/runtime'\nimport * as tvsTools from 'tvs-flow-tools'\nimport graph from './nodes.json'\n\nexport const flow = runtime.create()\n\nexport const tools = tvsTools.ui.start('hommage', { graph })\n\n; (window as any)['flow'] = flow\n; (window as any)['tools'] = tools\n\n\n\n// WEBPACK FOOTER //\n// ./homage/flow.ts","module.exports = {\"events.tick\":{\"x\":76.37013521738253,\"y\":967.8899375261426},\"events.tickStep\":{\"x\":-88.54211021864192,\"y\":1149.5365811578254},\"events.tickCounter\":{\"x\":-86.42228704674415,\"y\":1025.2726218196487},\"events.slowTick\":{\"x\":-89.39012731866174,\"y\":909.1161590323211},\"events.windowSize\":{\"x\":-321.5586674242749,\"y\":75.69464521831355},\"events.mouse\":{\"x\":84.64912924067285,\"y\":1160.0565503448497},\"events.keys\":{\"x\":79.03973887451365,\"y\":1314.3952534337925},\"events.mouseDrag\":{\"x\":474.4023259424609,\"y\":1322.7508623644567},\"state.ground.position\":{\"x\":592.7404100568693,\"y\":624.031846800227},\"state.ground.normal\":{\"x\":504.7884520353441,\"y\":714.5222912429182},\"state.ground.scale\":{\"x\":797.9947351233101,\"y\":630.5047118228944},\"state.ground.transform\":{\"x\":698.2485552304572,\"y\":559.4338492923177},\"state.ground.planeEquation\":{\"x\":631.9337813902545,\"y\":724.2228367000495},\"state.ground.mirrorMatrix\":{\"x\":715.5861218389874,\"y\":714.071908209991},\"state.pedestals.scale\":{\"x\":647.253423275873,\"y\":364.49536428853844},\"state.pedestals.transforms\":{\"x\":564.9359466056333,\"y\":362.17044822954483},\"state.screens.radius\":{\"x\":406.8475962909673,\"y\":951.3303280816247},\"state.screens.height\":{\"x\":493.91266724747953,\"y\":935.1046468058489},\"state.screens.scale\":{\"x\":355.988578249499,\"y\":690.4597199966503},\"state.screens.rotations\":{\"x\":317.1936869081563,\"y\":849.2562322426841},\"state.screens.positions\":{\"x\":445.62061738472056,\"y\":832.93919050267},\"state.screens.transforms\":{\"x\":247.26046803440056,\"y\":730.7944432890839},\"videos.names\":{\"x\":-240.9605196924283,\"y\":871.0833947024504},\"videos.videosUrl\":{\"x\":-347.41035113278747,\"y\":626.539953383678},\"videos.loadTimeout\":{\"x\":-348.6475316951279,\"y\":717.3067731881337},\"videos.videos\":{\"x\":-230.12750364632961,\"y\":751.6924508089568},\"view.camera.position\":{\"x\":790.3398564642989,\"y\":909.0243066769095},\"view.camera.yaw\":{\"x\":979.7292995097882,\"y\":1024.1723831431384},\"view.camera.pitch\":{\"x\":866.931176093401,\"y\":1017.613940816167},\"view.camera.yawQuat\":{\"x\":950.7250700056459,\"y\":985.2994559326827},\"view.camera.pitchQuat\":{\"x\":848.6194783856471,\"y\":990.4232465306249},\"view.camera.rotationQuat\":{\"x\":886.0279826893238,\"y\":862.2376098902693},\"view.camera.view\":{\"x\":846.7302436434592,\"y\":718.659045690319},\"view.camera.fovy\":{\"x\":909.7380213367651,\"y\":397.25748549932973},\"view.camera.aspect\":{\"x\":828.8830993669557,\"y\":306.5148271889604},\"view.camera.near\":{\"x\":923.4260311370798,\"y\":491.02928225574874},\"view.camera.far\":{\"x\":855.5649608378067,\"y\":540.3694536732753},\"view.camera.perspective\":{\"x\":781.7706423474369,\"y\":434.0524770138193},\"view.camera.moveSpeed\":{\"x\":597.9945683686861,\"y\":1143.371211706991},\"view.camera.lookSpeed\":{\"x\":889.8335434674065,\"y\":1198.7719519060117},\"view.camera.moveForward\":{\"x\":648.3435930868013,\"y\":1013.6221826793449},\"view.camera.moveLeft\":{\"x\":733.9361829891851,\"y\":1068.4109397705483},\"view.camera.groundMirrorView\":{\"x\":675.6861671117312,\"y\":875.9000552412393},\"view.context.context\":{\"x\":828.1487644249696,\"y\":444.6804810288013},\"view.context.canvas\":{\"x\":562.0466731353072,\"y\":1007.8653299673556},\"view.context.canvasSize\":{\"x\":562.1710007262274,\"y\":823.4757086322784},\"view.effects.ground-reflection.idPrefix\":{\"x\":522.4912120851072,\"y\":232.74836492468168},\"view.effects.ground-reflection.passes\":{\"x\":590.0198178576956,\"y\":149.12624196425492},\"view.effects.ground-reflection.ids\":{\"x\":680.4206899259791,\"y\":292.7584523164205},\"view.effects.ground-reflection.layersData\":{\"x\":-192.28551172745892,\"y\":348.71286741648436},\"view.geometries.box.id\":{\"x\":1029.5525109457433,\"y\":472.68211532913733},\"view.geometries.box.size\":{\"x\":-159.69285555560447,\"y\":-444.68327993863016},\"view.geometries.box.segments\":{\"x\":-246.5105025242645,\"y\":-467.50383894006865},\"view.geometries.box.geometry\":{\"x\":-201.86152502274976,\"y\":-325.56369819511843},\"view.geometries.plane.id\":{\"x\":953.8170285043042,\"y\":595.8553833490097},\"view.geometries.plane.props\":{\"x\":-20.775144708776157,\"y\":-444.4948568850864},\"view.geometries.plane.geometry\":{\"x\":-11.706444326645107,\"y\":-340.5392636976263},\"view.renderer.settings\":{\"x\":1042.9195868646505,\"y\":726.4928330927078},\"view.renderer.groundId\":{\"x\":884.723659471565,\"y\":591.3077890907022},\"view.renderer.sceneLayerId\":{\"x\":939.1584036320023,\"y\":682.0469810481528},\"view.renderer.mirrorSceneLayerId\":{\"x\":828.1793170264023,\"y\":637.8534834855615},\"view.renderer.layers\":{\"x\":131.8588844592779,\"y\":255.05405553172773},\"view.renderer.render\":{\"x\":827.0244621752382,\"y\":737.5311206996205},\"view.shaders.ground-reflection.id\":{\"x\":1109.0648188588332,\"y\":443.256993660846},\"view.shaders.ground-reflection.spec\":{\"x\":1097.5023436070187,\"y\":379.8357597038137},\"view.shaders.ground.id\":{\"x\":951.4119381195983,\"y\":392.2938787000862},\"view.shaders.ground.spec\":{\"x\":117.06845546598672,\"y\":-352.3781185348165},\"view.shaders.object.id\":{\"x\":810.5860490583541,\"y\":237.59669964236718},\"view.shaders.object.spec\":{\"x\":379.0755217658776,\"y\":-352.52570544330433},\"view.shaders.screen.id\":{\"x\":957.4036693689073,\"y\":252.17528500161927},\"view.shaders.screen.spec\":{\"x\":263.6191586482107,\"y\":-351.18688610339007},\"view.effects.ground-reflection.blurStrength\":{\"x\":-345.60366357546985,\"y\":327.67609327248886},\"view.painter.canvas\":{\"x\":-319.48762399373373,\"y\":-62.03968334452382},\"view.painter.painter\":{\"x\":138.78817453681478,\"y\":97.5842379795651},\"view.painter.gl\":{\"x\":-125.42149986426554,\"y\":-59.55606229289543},\"view.painter.canvasSize\":{\"x\":-22.430947669878467,\"y\":100.40913184342033},\"view.painter.settings\":{\"x\":430.98345411350965,\"y\":94.05643707740764},\"view.renderer.boxForm\":{\"x\":-200.55316140856522,\"y\":-241.68856914295444},\"view.renderer.planeForm\":{\"x\":-12.781744194991061,\"y\":-235.45380938571012},\"view.renderer.groundShade\":{\"x\":118.23712320620626,\"y\":-234.85350411335045},\"view.renderer.objectShade\":{\"x\":378.4782987226048,\"y\":-243.34962202464104},\"view.renderer.screenShade\":{\"x\":263.5664421644574,\"y\":-242.52129725993902},\"view.renderer.videoTextures\":{\"x\":-67.54484217344844,\"y\":726.1716072493961},\"view.renderer.groundSketch\":{\"x\":301.02434057322114,\"y\":260.69070271021934},\"view.renderer.screenSketch\":{\"x\":313.87183327383883,\"y\":521.8017717630416},\"view.renderer.pedestalSketch\":{\"x\":307.5084662318118,\"y\":390.7504457136656},\"view.renderer.drawSettings\":{\"x\":-149.98267232831833,\"y\":523.5973752265169},\"view.renderer.sceneLayer\":{\"x\":-61.68510190196802,\"y\":443.23190846334165},\"view.renderer.mirrorSceneLayer\":{\"x\":-67.04531865411052,\"y\":585.1263787346121},\"view.renderer.effectSettings\":{\"x\":-194.8937377441701,\"y\":173.30614401111063},\"view.renderer.effectLayer\":{\"x\":-57.52895070372746,\"y\":310.4618039969952},\"view.shaders.ground-reflection.frag\":{\"x\":-196.04242909270076,\"y\":269.6326479926565},\"view.camera.perspectiveSettings\":{\"x\":787.2897812836087,\"y\":302.1874485076259},\"view.camera.rotation\":{\"x\":916.7472111414572,\"y\":897.3703048642972},\"view.camera.rotX\":{\"x\":976.2769558185639,\"y\":1023.9768601392549},\"view.camera.rotY\":{\"x\":869.7332379459998,\"y\":1020.3363808980113}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./homage/nodes.json\n// module id = 74\n// module chunks = 0","var map = {\n\t\"./events.ts\": 8,\n\t\"./state/ground.ts\": 22,\n\t\"./state/pedestals.ts\": 49,\n\t\"./state/screens.ts\": 25,\n\t\"./videos.ts\": 9,\n\t\"./view/camera.ts\": 51,\n\t\"./view/effects/ground-reflection.ts\": 55,\n\t\"./view/geometries/box.ts\": 56,\n\t\"./view/geometries/plane.ts\": 57,\n\t\"./view/painter.ts\": 27,\n\t\"./view/renderer.ts\": 102,\n\t\"./view/shaders/ground-reflection.ts\": 58,\n\t\"./view/shaders/ground.ts\": 59,\n\t\"./view/shaders/object.ts\": 60,\n\t\"./view/shaders/screen.ts\": 61\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 81;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./homage/graph \\.ts$\n// module id = 81\n// module chunks = 0","import { length } from './vectors';\nexport function cartesianToPolar2D(v) {\n    return [length(v), Math.atan2(v[1], v[0])];\n}\nexport function polarToCartesian2D(coords) {\n    var r = coords[0], phi = coords[1];\n    return [r * Math.cos(phi), r * Math.sin(phi)];\n}\n//# sourceMappingURL=coords.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../libs/tvs-libs/dist/lib/math/coords.js\n// module id = 93\n// module chunks = 0","import { stream } from 'tvs-flow/dist/lib/utils/entity-reference'\nimport { painter, canvasSize, gl } from 'homage/graph/view/painter'\nimport { makeFormEntity, makeShadeEntity, makeSketchEntity, makeDrawingLayerEntity, makeEffectLayerEntity } from 'tvs-libs/lib/vr/flow-painter-utils'\nimport * as events from '../events'\nimport * as videos from '../videos'\nimport * as camera from 'homage/graph/view/camera'\nimport * as box from 'homage/graph/view/geometries/box'\nimport * as plane from 'homage/graph/view/geometries/plane'\nimport * as reflectionShader from 'homage/graph/view/shaders/ground-reflection'\nimport * as groundShader from 'homage/graph/view/shaders/ground'\nimport * as objectShader from 'homage/graph/view/shaders/object'\nimport * as screenShader from 'homage/graph/view/shaders/screen'\nimport * as ground from '../state/ground'\nimport * as screens from '../state/screens'\nimport * as pedestals from '../state/pedestals'\nimport * as reflectionEffect from './effects/ground-reflection'\nimport { zip } from 'tvs-libs/dist/lib/utils/sequence'\nimport { makeClear } from 'tvs-renderer/dist/lib/utils/context'\nimport { defined } from 'tvs-libs/dist/lib/utils/predicates'\n\n\n// Forms\n\nexport const boxForm = makeFormEntity(painter, box.geometry)\n\nexport const planeForm = makeFormEntity(painter, plane.geometry)\n\n\n// Shades\n\nexport const groundShade = makeShadeEntity(painter, groundShader.spec)\n\nexport const objectShade = makeShadeEntity(painter, objectShader.spec)\n\nexport const screenShade = makeShadeEntity(painter, screenShader.spec)\n\n\n// Textures\n\nexport const videoTextures = stream(\n\t[painter.HOT, videos.names.HOT],\n\t(painter, videos) => videos.map(\n\t\t() => painter.createStaticLayer().update({\n\t\t\tflipY: true,\n\t\t\tminFilter: 'LINEAR',\n\t\t\twrap: 'CLAMP_TO_EDGE'\n\t\t})\n\t)\n)\n.react(\n\t[videos.videos.HOT, events.slowTick.HOT],\n\t(ts, vs, _) => {\n\t\tts.forEach((t, i) => t.update({asset: vs[i]}))\n\t}\n).accept(defined)\n\n\n\n// Sketches\n\nexport const groundSketch = makeSketchEntity(painter)\n.react(\n\t[groundShade.HOT, planeForm.HOT, ground.transform.HOT, canvasSize.HOT],\n\t(sketch, shade, form, transform, size) => sketch.update({\n\t\tform, shade,\n\t\tuniforms: {\n\t\t\ttransform,\n\t\t\treflection: null,\n\t\t\tsize: [size.width, size.height]\n\t\t}\n\t})\n)\n\n\nexport const screenSketch = makeSketchEntity(painter)\n.react(\n\t[screenShade.HOT, planeForm.HOT, screens.transforms.HOT, videoTextures.HOT],\n\t(sketch, shade, form, transforms, textures) => sketch.update({\n\t\tform, shade,\n\t\tuniforms: zip(transforms, textures, (transform, tex) => ({\n\t\t\ttransform,\n\t\t\tvideo: tex.texture()\n\t\t}))\n\t})\n)\n\n\nexport const pedestalSketch = makeSketchEntity(painter)\n.react(\n\t[objectShade.HOT, boxForm.HOT, pedestals.transforms.HOT],\n\t(sketch, shade, form, transforms) => sketch.update({\n\t\tform, shade,\n\t\tuniforms: transforms.map(transform => ({\n\t\t\ttransform\n\t\t}))\n\t})\n)\n\n\n// Layers\n\n\nexport const drawSettings = stream(\n\t[gl.HOT],\n\tgl => ({\n\t\tclearBits: makeClear(gl, 'color', 'depth')\n\t})\n)\n\nexport const sceneLayer = makeDrawingLayerEntity(painter)\n.react(\n\t[\n\t\tscreenSketch.HOT,\n\t\tpedestalSketch.HOT,\n\t\tgroundSketch.HOT,\n\t\tdrawSettings.HOT,\n\t\tcamera.view.COLD,\n\t\tcamera.perspective.COLD\n\t],\n\t(layer, screens, pedestals, ground, settings, view, projection) => layer.update({\n\t\tsketches: [screens, pedestals, ground],\n\t\tdrawSettings: settings,\n\t\tuniforms: {\n\t\t\tview, projection,\n\t\t\twithDistance: 0,\n\t\t\tgroundHeight: 0\n\t\t}\n\t})\n)\n\n\nexport const mirrorSceneLayer = makeDrawingLayerEntity(painter)\n.react(\n\t[\n\t\tscreenSketch.HOT,\n\t\tpedestalSketch.HOT,\n\t\tground.position.HOT,\n\t\tdrawSettings.HOT,\n\t\tcamera.groundMirrorView.COLD,\n\t\tcamera.perspective.COLD\n\t],\n\t(layer, screens, pedestals, groundPos, settings, view, projection) => layer.update({\n\t\tflipY: true,\n\t\tsketches: [screens, pedestals],\n\t\tdrawSettings: settings,\n\t\tuniforms: {\n\t\t\tview, projection,\n\t\t\twithDistance: 1,\n\t\t\tgroundHeight: groundPos[1]\n\t\t}\n\t})\n)\n\n\nexport const effectSettings = stream(\n\t[gl.HOT],\n\tgl => ({\n\t\tdisable: [gl.DEPTH_TEST]\n\t})\n)\n\n\nexport const effectLayer = makeEffectLayerEntity(painter)\n.react(\n\t[\n\t\treflectionEffect.layersData.HOT,\n\t\treflectionShader.frag.HOT,\n\t\tcanvasSize.HOT,\n\t\teffectSettings.HOT\n\t],\n\t(layer, layerData, frag, size, settings) => layer.update({\n\t\tfrag,\n\t\tdrawSettings: settings,\n\t\tuniforms: layerData.map(d => ({\n\t\t\tsource: null,\n\t\t\t...d,\n\t\t\tsize: [size.width, size.height]\n\t\t}))\n\t})\n)\n\n\nexport const layers = stream(\n\t[mirrorSceneLayer.HOT, effectLayer.HOT, sceneLayer.HOT],\n\t(mirrorScene, effect, scene) => [\n\t\t[mirrorScene, true],\n\t\t[effect, true],\n\t\t[scene, true]\n\t].filter(l => l[1]).map(l => l[0])\n)\n\n\npainter.react(\n\t[layers.COLD, events.tick.HOT],\n\t(p, layers, _) => p.compose.apply(null, layers)\n)\n\n\n\n// WEBPACK FOOTER //\n// ./homage/graph/view/renderer.ts","module.exports = \"precision mediump float;\\n#define GLSLIFY 1\\nvec4 blur9_1_0(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\\n  vec4 color = vec4(0.0);\\n  vec2 off1 = vec2(1.3846153846) * direction;\\n  vec2 off2 = vec2(3.2307692308) * direction;\\n  color += texture2D(image, uv) * 0.2270270270;\\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\\n  return color;\\n}\\n\\n\\n\\nuniform sampler2D source;\\nuniform vec2 size;\\nuniform float direction;\\nuniform float strength;\\n\\nvarying vec2 coords;\\n\\nvoid main() {\\n\\tvec2 uv = coords;\\n\\tvec4 refl = texture2D(source, uv);\\n\\tfloat dist = refl.a * strength + 0.2;\\n\\n\\tif (direction == 0.0) {\\n\\t\\tgl_FragColor = vec4(blur9_1_0(source, uv, size, vec2(dist, 0)).rgb, refl.a);\\n\\t} else {\\n\\t\\tgl_FragColor = vec4(blur9_1_0(source, uv, size, vec2(0, dist)).rgb, refl.a);\\n\\t}\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./homage/graph/view/shaders/ground-reflection-frag.glsl\n// module id = 103\n// module chunks = 0","module.exports = \"#define GLSLIFY 1\\nattribute vec3 position;\\n\\nuniform mat4 transform;\\nuniform mat4 projection;\\nuniform mat4 view;\\n\\nvarying float dist;\\n\\nvoid main() {\\n\\tvec4 pos = transform * vec4(position, 1.0);\\n\\tdist = length(pos.xyz);\\n\\tgl_Position = projection * view * pos;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./homage/graph/view/shaders/ground-vert.glsl\n// module id = 104\n// module chunks = 0","module.exports = \"precision mediump float;\\n#define GLSLIFY 1\\n\\nuniform sampler2D reflection;\\nuniform vec2 size;\\n\\nvarying float dist;\\n\\nvoid main() {\\n\\tfloat scale = (50.0 - dist) / 50.0;\\n\\tvec4 refl = texture2D(reflection, gl_FragCoord.xy / size);\\n\\tvec4 ground = vec4(vec3(scale * 0.6), 1.0);\\n\\tgl_FragColor = mix(ground, vec4(refl.rgb, 1.0), refl / 2.0 + 0.25);\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./homage/graph/view/shaders/ground-frag.glsl\n// module id = 105\n// module chunks = 0","module.exports = \"#define GLSLIFY 1\\nattribute vec3 position;\\n\\nuniform mat4 transform;\\nuniform mat4 projection;\\nuniform mat4 view;\\nuniform float groundHeight;\\n\\nvarying float dist;\\nvarying float height;\\n\\nvoid main() {\\n\\tvec4 pos = transform * vec4(position, 1.0);\\n\\tdist = length(pos.xyz);\\n\\theight = (pos.y - groundHeight) / 10.0;\\n\\tgl_Position = projection * view * pos;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./homage/graph/view/shaders/object-vert.glsl\n// module id = 106\n// module chunks = 0","module.exports = \"precision mediump float;\\n#define GLSLIFY 1\\n\\nuniform int withDistance;\\n\\nvarying float dist;\\nvarying float height;\\n\\nvoid main() {\\n\\tfloat scale = (50.0 - dist) / 50.0;\\n\\tif (withDistance == 0) {\\n\\t\\tgl_FragColor = vec4(vec3(scale * 0.6), 1.0);\\n\\t} else {\\n\\t\\tgl_FragColor = vec4(vec3(scale * 0.6), height);\\n\\t\\t// gl_FragColor = vec4(vec3(height), 1.0);\\n\\t}\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./homage/graph/view/shaders/object-frag.glsl\n// module id = 107\n// module chunks = 0","module.exports = \"#define GLSLIFY 1\\nattribute vec3 position;\\nattribute vec2 uv;\\nuniform float groundHeight;\\n\\nuniform mat4 transform;\\nuniform mat4 projection;\\nuniform mat4 view;\\n\\nvarying vec2 vUv;\\nvarying float height;\\n\\nvoid main() {\\n\\tvUv = uv;\\n\\tvec4 pos = transform * vec4(position, 1.0);\\n\\theight = (pos.y - groundHeight) / 10.0;\\n\\tgl_Position = projection * view * pos;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./homage/graph/view/shaders/screen-vert.glsl\n// module id = 108\n// module chunks = 0","module.exports = \"precision mediump float;\\n#define GLSLIFY 1\\n\\nuniform sampler2D video;\\nuniform int withDistance;\\n\\nvarying vec2 vUv;\\nvarying float height;\\n\\nvoid main() {\\n\\tvec4 tex = texture2D(video, vUv);\\n\\tif (withDistance == 0) {\\n\\t\\tgl_FragColor = vec4(tex.rgb, 1.0);\\n\\t} else {\\n\\t\\tgl_FragColor = vec4(tex.rgb, height);\\n\\t\\t// gl_FragColor = vec4(vec3(height), 1.0);\\n\\t}\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./homage/graph/view/shaders/screen-frag.glsl\n// module id = 109\n// module chunks = 0"],"sourceRoot":""}